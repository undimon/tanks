!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("PIXI")):"function"==typeof define&&define.amd?define("typescript_intro",["PIXI"],e):"object"==typeof exports?exports.typescript_intro=e(require("PIXI")):t.typescript_intro=e(t.PIXI)}(window,function(i){return o={},n.m=r=[function(t,e,i){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=r(i(72)),o=(s.getInstance=function(){return s.instance||(s.instance=new s),s.instance},s.prototype.getSceneWidth=function(){return this.sceneWidth},s.prototype.getSceneHeight=function(){return this.sceneHeight},s.prototype.startAssetsLoading=function(e,i,r){var n=this,o=new PIXI.Loader;Object.keys(e).forEach(function(t){o.add(e[t],e[t])}),o.onProgress.add(function(t,e){r.call(n,t.progress)}),o.onComplete.add(function(t,e){n.resources=e,i.call(n)}),o.load()},s.prototype.addLayerToScene=function(t){this.pixiApp.stage.addChild(t)},s.prototype.initPixiApp=function(){this.pixiApp=new PIXI.Application({width:this.sceneWidth,height:this.sceneHeight,backgroundColor:16777215}),document.body.appendChild(this.pixiApp.view),window.addEventListener("keydown",this.handleKeyDown.bind(this)),window.addEventListener("keyup",this.handleKeyUp.bind(this))},s.prototype.playSound=function(t){n.default.Sound.from({url:t,preload:!0,loaded:function(t,e){e.play()}})},s.prototype.getTexture=function(t){return this.resources[t].texture},s.prototype.getSpriteTextures=function(t,e,i,r){for(var n=[],o=new PIXI.BaseTexture(this.resources[t].url),s=0;s<e;s++){var a=new PIXI.Texture(o,new PIXI.Rectangle(s*i,0,i,r));n.push(a)}return n},s.prototype.handleKeyDown=function(t){this.keys[t.code]=!0},s.prototype.handleKeyUp=function(t){this.keys[t.code]=!1},s.prototype.resize=function(){},s);function s(){if(this.sceneWidth=768,this.sceneHeight=768,this.keys={},s.instance)throw new Error("Error - use AppManager.getInstance()");this.initPixiApp()}e.AppManager=o},function(t,e){t.exports=i},function(t,e,i){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.GameObjectTypes||(e.GameObjectTypes={}))[r.Player=0]="Player",r[r.Enemy=1]="Enemy",r[r.Eagle=2]="Eagle",r[r.Bullet=3]="Bullet",r[r.StoneWall=4]="StoneWall",r[r.BrickWall=5]="BrickWall",r[r.EnemySpawnPoint=6]="EnemySpawnPoint",r[r.PlayerSpawnPoint=7]="PlayerSpawnPoint",r[r.Water=8]="Water",r[r.Tree=9]="Tree",r[r.BonusSpeed=10]="BonusSpeed",r[r.BonusSlow=11]="BonusSlow",r[r.BonusLife=12]="BonusLife",r[r.BonusImmortal=13]="BonusImmortal"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=(r(a,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),a);function a(t,e,i){void 0===e&&(e=!1),o(this,a),this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}function h(t,e){return t._head?(t._tail._next=e)._prev=t._tail:t._head=e,(t._tail=e)._owner=t,e}var u=(r(l,[{key:"handlers",value:function(t){var e=!(arguments.length<=0||void 0===t)&&t,i=this._head;if(e)return!!i;for(var r=[];i;)r.push(i),i=i._next;return r}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t,e){var i=arguments.length<=1||void 0===e?null:e;if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return h(this,new s(t,!1,i))}},{key:"once",value:function(t,e){var i=arguments.length<=1||void 0===e?null:e;if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return h(this,new s(t,!0,i))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),l);function l(){o(this,l),this._head=this._tail=void 0}u.MiniSignalBinding=s,e.default=u,t.exports=e.default},function(t,e,i){var r,n,o,s,a,h,u,l,c,p,f,d,_,y,m,v,g,b;function x(t,e){return t.test(e)}function T(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),i=e.split("[FBAN");void 0!==i[1]&&(e=i[0]),void 0!==(i=e.split("Twitter"))[1]&&(e=i[0]);var r={apple:{phone:x(a,e)&&!x(d,e),ipod:x(h,e),tablet:!x(a,e)&&x(u,e)&&!x(d,e),device:(x(a,e)||x(h,e)||x(u,e))&&!x(d,e)},amazon:{phone:x(p,e),tablet:!x(p,e)&&x(f,e),device:x(p,e)||x(f,e)},android:{phone:!x(d,e)&&x(p,e)||!x(d,e)&&x(l,e),tablet:!x(d,e)&&!x(p,e)&&!x(l,e)&&(x(f,e)||x(c,e)),device:!x(d,e)&&(x(p,e)||x(f,e)||x(l,e)||x(c,e))||x(/\bokhttp\b/i,e)},windows:{phone:x(d,e),tablet:x(_,e),device:x(d,e)||x(_,e)},other:{blackberry:x(y,e),blackberry10:x(m,e),opera:x(v,e),firefox:x(b,e),chrome:x(g,e),device:x(y,e)||x(m,e)||x(v,e)||x(b,e)||x(g,e)}};return r.any=r.apple.device||r.android.device||r.windows.device||r.other.device,r.phone=r.apple.phone||r.android.phone||r.windows.phone,r.tablet=r.apple.tablet||r.android.tablet||r.windows.tablet,r}s=this,a=/iPhone/i,h=/iPod/i,u=/iPad/i,l=/\bAndroid(?:.+)Mobile\b/i,c=/Android/i,p=/\bAndroid(?:.+)SD4930UR\b/i,f=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,d=/Windows Phone/i,_=/\bWindows(?:.+)ARM\b/i,y=/BlackBerry/i,m=/BB10/i,v=/Opera Mini/i,g=/\b(CriOS|Chrome)(?:.+)Mobile/i,b=/Mobile(?:.+)Firefox\b/i,t.exports&&"undefined"==typeof window?t.exports=T:t.exports&&"undefined"!=typeof window?(t.exports=T(),t.exports.isMobile=T):(n=[],r=s.isMobile=T(),void 0===(o="function"==typeof r?r.apply(e,n):r)||(t.exports=o))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.level=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,,,,2,1,,,,,9,,,,,,1,2,,,,9,1,1,,,,,,,,,,,,,,,,,,,,,,,1,1,,2,2,2,,,2,,,2,,,2,,2,,2,,,2,2,,1,1,,,2,,,2,,2,,2,2,,2,,2,,2,,2,,,,1,1,,,2,,,2,2,2,,2,,2,2,,2,2,,,2,2,,,1,1,,,2,,,2,,2,,2,,,2,,2,,2,,,,2,,1,1,,,2,,,2,,2,,2,,,2,,2,,2,,2,2,,,1,1,,,,,,,,,,,,,,,,,,,,,,2,1,1,2,2,1,,,,,,,,,,,,,,,,,,,2,1,1,3,3,1,,,,1,4,4,1,1,1,4,4,1,,,,,,,2,1,1,3,3,1,,,,2,3,3,3,3,3,3,3,2,,,,,2,2,3,1,1,3,3,1,,,,1,4,4,4,4,4,4,4,1,,,,2,2,3,3,1,1,3,3,3,,,,,,,,,,,,,,,,2,2,3,3,1,1,3,3,3,,,,,,2,2,2,2,2,,,,,,2,2,2,2,1,1,2,2,2,,,,,2,2,,,,2,2,,,,,,2,2,2,1,1,2,2,1,,,,,2,,,,,,2,,,,,,2,2,2,1,1,,,2,,,,,,,,,,,,,,,,,,,2,1,1,,1,1,,,,,,,,,,,,,,,,,,,2,1,1,2,2,2,,,,,,,2,2,2,,,,,,,,,,2,1,1,3,3,2,,2,,,,8,2,7,2,,,,2,,,,,,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],n.enemiesOnLevel=20,n.preloaderAassets={loaderBg:"assets/loader-bar/loader-bg.png",loaderBar:"assets/loader-bar/loader-bar.png"},n.assets={tank:"assets/tanks/tank.png",enemy1:"assets/tanks/enemy_red.png",enemy2:"assets/tanks/enemy_white.png",enemy3:"assets/tanks/enemy_blue.png",eagle:"assets/board/eagle.png",stoneWall:"assets/board/wall.png",brickWall:"assets/board/small_wall_1.png",tree:"assets/board/leaves.png",water:"assets/board/water.png",bullet:"assets/bullet.png",enemyBullet:"assets/enemy_bullet.png",explode:"assets/explode.png",appear:"assets/appear.png",bonusSpeed:"assets/bonus/bonus_speed.png",bonusSlow:"assets/bonus/bonus_slow.png",bonusLife:"assets/bonus/bonus_live.png",bonusImmortal:"assets/bonus/bonus_immortal.png",soundShoot:"assets/sounds/shot.wav",soundWin:"assets/sounds/win.wav",soundLose:"assets/sounds/lose.wav",soundHit:"assets/sounds/hit.wav",soundExplode:"assets/sounds/explode.wav",soundBonus:"assets/sounds/bonus.wav"},n);function n(){}e.Config=r},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s,a=i(13),h=(o=a.MVCEntity,n(u,o),u.prototype.init=function(t){},u.prototype.initView=function(t,e){this.view=new t,this.view.init(e)},u.prototype.destroy=function(){this.onDestroy(),this.view&&this.view.destroy(),this.isDestroyed=!0},u.prototype.update=function(){},Object.defineProperty(u.prototype,"size",{get:function(){return this.view.size},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"x",{get:function(){return this.view.x},set:function(t){this.view.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"y",{get:function(){return this.view.y},set:function(t){this.view.y=t},enumerable:!0,configurable:!0}),u.prototype.setPosition=function(t,e){this.x=t,this.y=e},u.prototype.addToStage=function(t){t.addChild(this.view.display)},u.prototype.checkCollisionWith=function(t){this.isDestroyed||t.isDestroyed||this.canCollide&&t.canCollide&&this!==t&&(this.y>t.y+t.size.height||this.x+this.size.width<t.x||this.y+this.size.height<t.y||this.x>t.x+t.size.width||(this.handleCollisionWith(t),t.handleCollisionWith(this)))},u.prototype.handleCollisionWith=function(t){},u);function u(){var t=null!==o&&o.apply(this,arguments)||this;return t.canCollide=!0,t.isDestroyed=!1,t}e.GameObject=h,(s=e.MoveDirections||(e.MoveDirections={}))[s.Up=1]="Up",s[s.Down=-1]="Down",s[s.Left=2]="Left",s[s.Right=-2]="Right"},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(13),a=(o=s.MVCEntity,n(h,o),h.prototype.postRegister=function(){},h.prototype.execute=function(t){},h.prototype.addNotifications=function(){},h.prototype.addNotification=function(t,e){this.notificationHandlers[t]||(this.notificationHandlers[t]=[]),this.notificationHandlers[t].push(e),this.mvc.addNotification(t,this)},h.prototype.handleNotification=function(e){var i=this;this.notificationHandlers[e.name]&&this.notificationHandlers[e.name].forEach(function(t){t.call(i,e)})},h.prototype.sendNotification=function(t,e){console.log("sendNotification: ",t,e),this.mvc.sendNotification(t,e)},h.prototype.retrieveModel=function(t){return this.mvc.retrieveModel(t)},h.prototype.layerTransitionInStart=function(){this.view.layerTransitionInStart()},h.prototype.layerTransitionOutStart=function(){this.view.layerTransitionOutStart()},h.prototype.getTicker=function(){return this.app.pixiApp.ticker},h);function h(){var t=o.call(this)||this;return t.notificationHandlers={},t.addNotifications(),t}e.Controller=a},function(t,e,i){"use strict";function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}
/*!
 * GSAP 3.5.0
 * https://greensock.com
 *
 * @license Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/i.r(e);function k(t){return"string"==typeof t}function f(t){return"function"==typeof t}function A(t){return"number"==typeof t}function n(t){return void 0===t}function P(t){return"object"==typeof t}function L(t){return!1!==t}function r(){return"undefined"!=typeof window}function C(t){return f(t)||k(t)}function s(t){return(se=_e(t,oe))&&li}function j(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")}function M(t,e){return!e&&console.warn(t)}function a(t,e){return t&&(oe[t]=e)&&se&&(se[t]=e)||oe}function I(){return 0}function U(t){var e,i,r=t[0];if(P(r)||f(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(i=fe.length;i--&&!fe[i].targetTest(r););e=fe[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Ue(t[i],e)))||t.splice(i,1);return t}function F(t){return t._gsap||U(be(t))[0]._gsap}function h(t,e,i){return(i=t[e])&&f(i)?t[e]():n(i)&&t.getAttribute&&t.getAttribute(e)||i}function d(t,e){return(t=t.split(",")).forEach(e)||t}function G(t){return Math.round(1e5*t)/1e5||0}function u(t,e){for(var i=e.length,r=0;t.indexOf(e[r])<0&&++r<i;);return r<i}function l(t,e,i){var r,n=A(t[1]),o=(n?2:1)+(e<2?0:1),s=t[o];if(n&&(s.duration=t[1]),s.parent=i,e){for(r=s;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=L(i.vars.inherit)&&i.parent;s.immediateRender=L(r.immediateRender),e<2?s.runBackwards=1:s.startAt=t[o-1]}return s}function B(){var t,e,i=he.length,r=he.slice(0);for(ue={},t=he.length=0;t<i;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)}function c(t,e,i,r){he.length&&B(),t.render(e,i,r),he.length&&B()}function p(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(ne).length<2?e:k(t)?t.trim():t}function _(t){return t}function X(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}function y(t,e){for(var i in e)i in t||"duration"===i||"ease"===i||(t[i]=e[i])}function m(t,e){for(var i in e)t[i]=P(e[i])?m(t[i]||(t[i]={}),e[i]):e[i];return t}function H(t,e){var i,r={};for(i in t)i in e||(r[i]=t[i]);return r}function R(t){var e=t.parent||mt,i=t.keyframes?y:X;if(L(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t}function v(t,e,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var n=e._prev,o=e._next;n?n._next=o:t[i]===e&&(t[i]=o),o?o._prev=n:t[r]===e&&(t[r]=n),e._next=e._prev=e.parent=null}function V(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0}function g(t,e){if(!e||e._end>t._dur||e._start<0)for(var i=t;i;)i._dirty=1,i=i.parent;return t}function b(t){return t._repeat?ye(t._tTime,t=t.duration()+t._rDelay)*t:0}function x(t,e){return(t-e._start)*e._ts+(0<=e._ts?0:e._dirty?e.totalDuration():e._tDur)}function E(t){return t._end=G(t._start+(t._tDur/Math.abs(t._ts||t._rts||Vt)||0))}function T(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=G(t._dp._time-(0<t._ts?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),E(t),i._dirty||g(i,t)),t}function N(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=x(t.rawTime(),e),(!e._dur||ve(0,e.totalDuration(),i)-e._tTime>Vt)&&e.render(i,!0)),g(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)0<=i.rawTime()&&i.totalTime(i._tTime),i=i._dp;t._zTime=-Vt}}function w(t,e,i,r){return e.parent&&V(e),e._start=G(i+e._delay),e._end=G(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,i,r,n){void 0===i&&(i="_first"),void 0===r&&(r="_last");var o,s=t[r];if(n)for(o=e[n];s&&s[n]>o;)s=s._prev;s?(e._next=s._next,s._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=s,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,r||N(t,e),t}function D(t,e){return(oe.ScrollTrigger||j("scrollTrigger",e))&&oe.ScrollTrigger.create(e,t)}function Y(t,e,i,r){return Xe(t,e),t._initted?!i&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&Tt!==Ae.frame?(he.push(t),t._lazy=[e,r],1):void 0:1}function z(t,e,i,r){var n=t._repeat,o=G(e)||0,s=t._tTime/t._tDur;return s&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=n?n<0?1e10:G(o*(n+1)+t._rDelay*n):o,s&&!r?T(t,t._tTime=t._tDur*s):t.parent&&E(t),i||g(t.parent,t),t}function O(t){return t instanceof Be?g(t):z(t,t._dur)}function W(t,e){var i,r,n=t.labels,o=t._recent||me,s=t.duration()>=Ht?o.endTime(!1):t._dur;return k(e)&&(isNaN(e)||e in n)?"<"===(i=e.charAt(0))||">"===i?("<"===i?o._start:o.endTime(0<=o._repeat))+(parseFloat(e.substr(1))||0):(i=e.indexOf("="))<0?(e in n||(n[e]=s),n[e]):(r=+(e.charAt(i-1)+e.substr(i+1)),1<i?W(t,e.substr(0,i-1))+r:s+r):null==e?s:+e}function q(t,e){return t||0===t?e(t):e}function K(t){return(t+"").substr((parseFloat(t)+"").length)}function Z(t,e){return t&&P(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&P(t[0]))&&!t.nodeType&&t!==vt}function Q(t){return t.sort(function(){return.5-Math.random()})}function J(t){if(f(t))return t;var d=P(t)?t:{each:t},_=Ne(d.ease),y=d.from||0,m=parseFloat(d.base)||0,v={},e=0<y&&y<1,g=isNaN(y)||e,b=d.axis,x=y,T=y;return k(y)?x=T={center:.5,edges:.5,end:1}[y]||0:!e&&g&&(x=y[0],T=y[1]),function(t,e,i){var r,n,o,s,a,h,u,l,c,p=(i||d).length,f=v[p];if(!f){if(!(c="auto"===d.grid?0:(d.grid||[1,Ht])[1])){for(u=-Ht;u<(u=i[c++].getBoundingClientRect().left)&&c<p;);c--}for(f=v[p]=[],r=g?Math.min(c,p)*x-.5:y%c,n=g?p*T/c-.5:y/c|0,l=Ht,h=u=0;h<p;h++)o=h%c-r,s=n-(h/c|0),f[h]=a=b?Math.abs("y"===b?s:o):qt(o*o+s*s),u<a&&(u=a),a<l&&(l=a);"random"===y&&Q(f),f.max=u-l,f.min=l,f.v=p=(parseFloat(d.amount)||parseFloat(d.each)*(p<c?p-1:b?"y"===b?p/c:c:Math.max(c,p/c))||0)*("edges"===y?-1:1),f.b=p<0?m-p:m,f.u=K(d.amount||d.each)||0,_=_&&p<0?Re(_):_}return p=(f[t]-f.min)/f.max||0,G(f.b+(_?_(p):p)*f.v)+f.u}}function $(e){var i=e<1?Math.pow(10,(e+"").length-2):1;return function(t){return Math.floor(Math.round(parseFloat(t)/e)*e*i)/i+(A(t)?0:K(t))}}function tt(h,t){var u,l,e=Jt(h);return!e&&P(h)&&(u=e=h.radius||Ht,h.values?(h=be(h.values),(l=!A(h[0]))&&(u*=u)):h=$(h.increment)),q(t,e?f(h)?function(t){return l=h(t),Math.abs(l-t)<=u?l:t}:function(t){for(var e,i,r=parseFloat(l?t.x:t),n=parseFloat(l?t.y:0),o=Ht,s=0,a=h.length;a--;)(e=l?(e=h[a].x-r)*e+(i=h[a].y-n)*i:Math.abs(h[a]-r))<o&&(o=e,s=a);return s=!u||o<=u?h[s]:t,l||s===t||A(t)?s:s+K(t)}:$(h))}function et(t,e,i,r){return q(Jt(t)?!e:!0===i?!!(i=0):!r,function(){return Jt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t+Math.random()*(e-t))/i)*i*r)/r})}function it(e,i,t){return q(t,function(t){return e[~~i(t)]})}function rt(t){for(var e,i,r,n,o=0,s="";~(e=t.indexOf("random(",o));)r=t.indexOf(")",e),n="["===t.charAt(e+7),i=t.substr(e+7,r-e-7).match(n?ne:$t),s+=t.substr(o,e-o)+et(n?i:+i[0],n?0:+i[1],+i[2]||1e-5),o=r+1;return s+t.substr(o,t.length-o)}function nt(t,e,i){var r,n,o,s=t.labels,a=Ht;for(r in s)(n=s[r]-e)<0==!!i&&n&&a>(n=Math.abs(n))&&(o=r,a=n);return o}function ot(t){return V(t),t.progress()<1&&Te(t,"onInterrupt"),t}function st(t,e,i){return(6*(t=t<0?t+1:1<t?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*Ee+.5|0}function at(t,e,i){var r,n,o,s,a,h,u,l,c,p,f=t?A(t)?[t>>16,t>>8&Ee,t&Ee]:0:we.black;if(!f){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),we[t])f=we[t];else if("#"===t.charAt(0))4===t.length&&(t="#"+(r=t.charAt(1))+r+(n=t.charAt(2))+n+(o=t.charAt(3))+o),f=[(t=parseInt(t.substr(1),16))>>16,t>>8&Ee,t&Ee];else if("hsl"===t.substr(0,3))if(f=p=t.match($t),e){if(~t.indexOf("="))return f=t.match(te),i&&f.length<4&&(f[3]=1),f}else s=+f[0]%360/360,a=+f[1]/100,r=2*(h=+f[2]/100)-(n=h<=.5?h*(a+1):h+a-h*a),3<f.length&&(f[3]*=1),f[0]=st(s+1/3,r,n),f[1]=st(s,r,n),f[2]=st(s-1/3,r,n);else f=t.match($t)||we.transparent;f=f.map(Number)}return e&&!p&&(r=f[0]/Ee,n=f[1]/Ee,o=f[2]/Ee,h=((u=Math.max(r,n,o))+(l=Math.min(r,n,o)))/2,u===l?s=a=0:(c=u-l,a=.5<h?c/(2-u-l):c/(u+l),s=u===r?(n-o)/c+(n<o?6:0):u===n?(o-r)/c+2:(r-n)/c+4,s*=60),f[0]=~~(s+.5),f[1]=~~(100*a+.5),f[2]=~~(100*h+.5)),i&&f.length<4&&(f[3]=1),f}function ht(t){var i=[],r=[],n=-1;return t.split(Oe).forEach(function(t){var e=t.match(ee)||[];i.push.apply(i,e),r.push(n+=e.length+1)}),i.c=r,i}function ut(t,e,i){var r,n,o,s,a="",h=(t+a).match(Oe),u=e?"hsla(":"rgba(",l=0;if(!h)return t;if(h=h.map(function(t){return(t=at(t,e,1))&&u+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),i&&(o=ht(t),(r=i.c).join(a)!==o.c.join(a)))for(s=(n=t.replace(Oe,"1").split(ee)).length-1;l<s;l++)a+=n[l]+(~r.indexOf(l)?h.shift()||u+"0,0,0,0)":(o.length?o:h.length?h:i).shift());if(!n)for(s=(n=t.split(Oe)).length-1;l<s;l++)a+=n[l]+h[l];return a+n[s]}function lt(t){var e,i=t.join(" ");if(Oe.lastIndex=0,Oe.test(i))return e=Se.test(i),t[1]=ut(t[1],e),t[0]=ut(t[0],e,ht(t[1])),!0}function ct(t){var e=(t+"").split("("),i=Ce[e[0]];return i&&1<e.length&&i.config?i.config.apply(null,~t.indexOf("{")?[function(t){for(var e,i,r,n={},o=t.substr(1,t.length-3).split(":"),s=o[0],a=1,h=o.length;a<h;a++)i=o[a],e=a!==h-1?i.lastIndexOf(","):i.length,r=i.substr(0,e),n[s]=isNaN(r)?r.replace(Ie,"").trim():+r,s=i.substr(e+1).trim();return n}(e[1])]:function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<i?t.indexOf(")",i+1):i)}(t).split(",").map(p)):Ce._CE&&Me.test(t)?Ce._CE("",t):i}function pt(t,e){for(var i,r=t._first;r;)r instanceof Be?pt(r,e):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===e||(r.timeline?pt(r.timeline,e):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=e)),r=r._next}function ft(t,e,i,r){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var n,o={easeIn:e,easeOut:i,easeInOut:r};return d(t,function(t){for(var e in Ce[t]=oe[t]=o,Ce[n=t.toLowerCase()]=i,o)Ce[n+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Ce[t+"."+e]=o[e]}),o}function dt(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}}function _t(i,t,e){function r(t){return 1===t?1:n*Math.pow(2,-10*t)*Zt((t-s)*o)+1}var n=1<=t?t:1,o=(e||(i?.3:.45))/(t<1?t:1),s=o/Yt*(Math.asin(1/n)||0),a="out"===i?r:"in"===i?function(t){return 1-r(1-t)}:dt(r);return o=Yt/o,a.config=function(t,e){return _t(i,t,e)},a}function yt(e,i){function r(t){return t?--t*t*((i+1)*t+i)+1:0}void 0===i&&(i=1.70158);var t="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:dt(r);return t.config=function(t){return yt(e,t)},t}var mt,vt,gt,bt,xt,Tt,Et,wt,Ot,St,At,Pt,Ct,Mt,It,Rt,Nt,Dt,Lt,Ut,Ft,Bt,kt,jt,Gt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Xt={duration:.5,overwrite:!1,delay:0},Ht=1e8,Vt=1e-8,Yt=2*Math.PI,zt=Yt/4,Wt=0,qt=Math.sqrt,Kt=Math.cos,Zt=Math.sin,Qt="function"==typeof ArrayBuffer?ArrayBuffer.isView:function(){},Jt=Array.isArray,$t=/(?:-?\.?\d|\.)+/gi,te=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,ee=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ie=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,re=/[+-]=-?[\.\d]+/,ne=/[#\-+.]*\b[a-z\d-=+%.]+/gi,oe={},se={},ae={},he=[],ue={},le={},ce={},pe=30,fe=[],de="",_e=function(t,e){for(var i in e)t[i]=e[i];return t},ye=function(t,e){return(t/=e)&&~~t===t?~~t-1:~~t},me={_start:0,endTime:I},ve=function(t,e,i){return i<t?t:e<i?e:i},ge=[].slice,be=function(t,e){return!k(t)||e||!gt&&Pe()?Jt(t)?function(t,i,r){return void 0===r&&(r=[]),t.forEach(function(t){var e;return k(t)&&!i||Z(t,1)?(e=r).push.apply(e,be(t)):r.push(t)})||r}(t,e):Z(t)?ge.call(t,0):t?[t]:[]:ge.call(bt.querySelectorAll(t),0)},xe=function(e,t,i,r,n){var o=t-e,s=r-i;return q(n,function(t){return i+((t-e)/o*s||0)})},Te=function(t,e,i){var r,n,o=t.vars,s=o[e];if(s)return r=o[e+"Params"],n=o.callbackScope||t,i&&he.length&&B(),r?s.apply(n,r):s.call(n)},Ee=255,we={aqua:[0,Ee,Ee],lime:[0,Ee,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ee],navy:[0,0,128],white:[Ee,Ee,Ee],olive:[128,128,0],yellow:[Ee,Ee,0],orange:[Ee,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ee,0,0],pink:[Ee,192,203],cyan:[0,Ee,Ee],transparent:[Ee,Ee,Ee,0]},Oe=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in we)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Se=/hsl[a]?\(/,Ae=(It=Date.now,Rt=500,Nt=33,Dt=It(),Lt=Dt,Ft=Ut=1e3/240,Pt={time:0,frame:0,tick:function(){De(!0)},deltaRatio:function(t){return Ct/(1e3/(t||60))},wake:function(){xt&&(!gt&&r()&&(vt=gt=window,bt=vt.document||{},oe.gsap=li,(vt.gsapVersions||(vt.gsapVersions=[])).push(li.version),s(se||vt.GreenSockGlobals||!vt.gsap&&vt||{}),At=vt.requestAnimationFrame),Ot&&Pt.sleep(),St=At||function(t){return setTimeout(t,Ft-1e3*Pt.time+1|0)},wt=1,De(2))},sleep:function(){(At?vt.cancelAnimationFrame:clearTimeout)(Ot),wt=0,St=I},lagSmoothing:function(t,e){Rt=t||1e8,Nt=Math.min(e,Rt,0)},fps:function(t){Ut=1e3/(t||240),Ft=1e3*Pt.time+Ut},add:function(t){Bt.indexOf(t)<0&&Bt.push(t),Pe()},remove:function(t){var e;~(e=Bt.indexOf(t))&&Bt.splice(e,1)&&e<=Mt&&Mt--},_listeners:Bt=[]}),Pe=function(){return!wt&&Ae.wake()},Ce={},Me=/^[\d.\-M][\d.\-,\s]/,Ie=/["']/g,Re=function(e){return function(t){return 1-e(1-t)}},Ne=function(t,e){return t&&(f(t)?t:Ce[t]||ct(t))||e};function De(t){var e,i,r,n,o=It()-Lt,s=!0===t;if(Rt<o&&(Dt+=o-Nt),(0<(e=(r=(Lt+=o)-Dt)-Ft)||s)&&(n=++Pt.frame,Ct=r-1e3*Pt.time,Pt.time=r/=1e3,Ft+=e+(Ut<=e?4:Ut-e),i=1),s||(Ot=St(De)),i)for(Mt=0;Mt<Bt.length;Mt++)Bt[Mt](r,Ct,n,t)}function Le(t){return t<jt?kt*t*t:t<.7272727272727273?kt*Math.pow(t-1.5/2.75,2)+.75:t<.9090909090909092?kt*(t-=2.25/2.75)*t+.9375:kt*Math.pow(t-2.625/2.75,2)+.984375}d("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var i=e<5?e+1:e;ft(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},function(t){return 1-Math.pow(1-t,i)},function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2})}),Ce.Linear.easeNone=Ce.none=Ce.Linear.easeIn,ft("Elastic",_t("in"),_t("out"),_t()),kt=7.5625,jt=1/2.75,ft("Bounce",function(t){return 1-Le(1-t)},Le),ft("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),ft("Circ",function(t){return-(qt(1-t*t)-1)}),ft("Sine",function(t){return 1===t?1:1-Kt(t*zt)}),ft("Back",yt("in"),yt("out"),yt()),Ce.SteppedEase=Ce.steps=oe.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,r=t+(e?0:1),n=e?1:0;return function(t){return((r*ve(0,.99999999,t)|0)+n)*i}}},Xt.ease=Ce["quad.out"],d("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return de+=t+","+t+"Params,"});var Ue=function(t,e){this.id=Wt++,(t._gsap=this).target=t,this.harness=e,this.get=e?e.get:h,this.set=e?e.getSetter:Je},Fe=function(){function t(t,e){var i=t.parent||mt;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,z(this,+t.duration,1,1),this.data=t.data,wt||Ae.wake(),i&&w(i,this,e||0===e?e:i._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(0<this._repeat?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,z(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Pe(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(T(this,t);i.parent;)i.parent._time!==i._start+(0<=i._ts?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(0<this._ts&&t<this._tDur||this._ts<0&&0<t||!this._tDur&&!t)&&w(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===Vt||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),c(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+b(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+b(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?ye(this._tTime,i)+1:1},e.timeScale=function(t){if(!arguments.length)return this._rts===-Vt?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?x(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-Vt?0:this._rts,function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this.totalTime(ve(-this._delay,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&((this._ps=t)?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Pe(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=Vt)&&Math.abs(this._zTime)!==Vt))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return!e||!e._sort&&this.parent||w(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(L(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?x(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return i},e.repeat=function(t){return arguments.length?(this._repeat=t,O(this)):this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,O(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(W(this,t),L(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,L(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-Vt:0)),this):this._rts<0},e.invalidate=function(){return this._initted=0,this._zTime=-Vt,this},e.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-Vt))},e.eventCallback=function(t,e,i){var r=this.vars;return 1<arguments.length?(e?(r[t]=e,i&&(r[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(r){var n=this;return new Promise(function(e){function t(){var t=n.then;n.then=null,f(i)&&(i=i(n))&&(i.then||i===n)&&(n.then=t),e(i),n.then=t}var i=f(r)?r:_;n._initted&&1===n.totalProgress()&&0<=n._ts||!n._tTime&&n._ts<0?t():n._prom=t})},e.kill=function(){ot(this)},t}();X(Fe.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Vt,_prom:0,_ps:!1,_rts:1});var Be=function(r){function t(t,e){var i;return void 0===t&&(t={}),(i=r.call(this,t,e)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=L(t.sortChildren),i.parent&&N(i.parent,S(i)),t.scrollTrigger&&D(S(i),t.scrollTrigger),i}o(t,r);var e=t.prototype;return e.to=function(t,e,i,r){return new ze(t,l(arguments,0,this),W(this,A(e)?r:i)),this},e.from=function(t,e,i,r){return new ze(t,l(arguments,1,this),W(this,A(e)?r:i)),this},e.fromTo=function(t,e,i,r,n){return new ze(t,l(arguments,2,this),W(this,A(e)?n:r)),this},e.set=function(t,e,i){return e.duration=0,e.parent=this,R(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new ze(t,e,W(this,i),1),this},e.call=function(t,e,i){return w(this,ze.delayedCall(0,t,e),W(this,i))},e.staggerTo=function(t,e,i,r,n,o,s){return i.duration=e,i.stagger=i.stagger||r,i.onComplete=o,i.onCompleteParams=s,i.parent=this,new ze(t,i,W(this,n)),this},e.staggerFrom=function(t,e,i,r,n,o,s){return i.runBackwards=1,R(i).immediateRender=L(i.immediateRender),this.staggerTo(t,e,i,r,n,o,s)},e.staggerFromTo=function(t,e,i,r,n,o,s,a){return r.startAt=i,R(r).immediateRender=L(r.immediateRender),this.staggerTo(t,e,r,n,o,s,a)},e.render=function(t,e,i){var r,n,o,s,a,h,u,l,c,p,f,d,_=this._time,y=this._dirty?this.totalDuration():this._tDur,m=this._dur,v=this!==mt&&y-Vt<t&&0<=t?y:t<Vt?0:t,g=this._zTime<0!=t<0&&(this._initted||!m);if(v!==this._tTime||i||g){if(_!==this._time&&m&&(v+=this._time-_,t+=this._time-_),r=v,c=this._start,h=!(l=this._ts),g&&(m||(_=this._zTime),!t&&e||(this._zTime=t)),this._repeat&&(f=this._yoyo,a=m+this._rDelay,r=G(v%a),v===y?(s=this._repeat,r=m):((s=~~(v/a))&&s===v/a&&(r=m,s--),m<r&&(r=m)),p=ye(this._tTime,a),!_&&this._tTime&&p!==s&&(p=s),f&&1&s&&(r=m-r,d=1),s!==p&&!this._lock)){var b=f&&1&p,x=b===(f&&1&s);if(s<p&&(b=!b),_=b?0:m,this._lock=1,this.render(_||(d?0:G(s*a)),e,!m)._lock=0,!e&&this.parent&&Te(this,"onRepeat"),this.vars.repeatRefresh&&!d&&(this.invalidate()._lock=1),_!==this._time||h!=!this._ts)return this;if(m=this._dur,y=this._tDur,x&&(this._lock=2,_=b?m+1e-4:-1e-4,this.render(_,!0),this.vars.repeatRefresh&&!d&&this.invalidate()),this._lock=0,!this._ts&&!h)return this;pt(this,d)}if(this._hasPause&&!this._forcing&&this._lock<2&&(u=function(t,e,i){var r;if(e<i)for(r=t._first;r&&r._start<=i;){if(!r._dur&&"isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(!r._dur&&"isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,G(_),G(r)))&&(v-=r-(r=u._start)),this._tTime=v,this._time=r,this._act=!l,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),_||!r||e||Te(this,"onStart"),_<=r&&0<=t)for(n=this._first;n;){if(o=n._next,(n._act||r>=n._start)&&n._ts&&u!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(0<n._ts?(r-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(r-n._start)*n._ts,e,i),r!==this._time||!this._ts&&!h){u=0,o&&(v+=this._zTime=-Vt);break}}n=o}else{n=this._last;for(var T=t<0?t:r;n;){if(o=n._prev,(n._act||T<=n._end)&&n._ts&&u!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(0<n._ts?(T-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(T-n._start)*n._ts,e,i),r!==this._time||!this._ts&&!h){u=0,o&&(v+=this._zTime=T?-Vt:Vt);break}}n=o}}if(u&&!e&&(this.pause(),u.render(_<=r?0:-Vt)._zTime=_<=r?1:-1,this._ts))return this._start=c,E(this),this.render(t,e,i);this._onUpdate&&!e&&Te(this,"onUpdate",!0),(v===y&&y>=this.totalDuration()||!v&&_)&&(c!==this._start&&Math.abs(l)===Math.abs(this._ts)||this._lock||(!t&&m||!(v===y&&0<this._ts||!v&&this._ts<0)||V(this,1),e||t<0&&!_||!v&&!_||(Te(this,v===y?"onComplete":"onReverseComplete",!0),!this._prom||v<y&&0<this.timeScale()||this._prom())))}return this},e.add=function(t,e){var i=this;if(A(e)||(e=W(this,e)),!(t instanceof Fe)){if(Jt(t))return t.forEach(function(t){return i.add(t,e)}),this;if(k(t))return this.addLabel(t,e);if(!f(t))return this;t=ze.delayedCall(0,t)}return this!==t?w(this,t,e):this},e.getChildren=function(t,e,i,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=-Ht);for(var n=[],o=this._first;o;)o._start>=r&&(o instanceof ze?e&&n.push(o):(i&&n.push(o),t&&n.push.apply(n,o.getChildren(!0,e,i)))),o=o._next;return n},e.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},e.remove=function(t){return k(t)?this.removeLabel(t):f(t)?this.killTweensOf(t):(v(this,t),t===this._recent&&(this._recent=this._last),g(this))},e.totalTime=function(t,e){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=G(Ae.time-(0<this._ts?t/this._ts:(this.totalDuration()-t)/-this._ts))),r.prototype.totalTime.call(this,t,e),this._forcing=0,this):this._tTime},e.addLabel=function(t,e){return this.labels[t]=W(this,e),this},e.removeLabel=function(t){return delete this.labels[t],this},e.addPause=function(t,e,i){var r=ze.delayedCall(0,e||I,i);return r.data="isPause",this._hasPause=1,w(this,r,W(this,t))},e.removePause=function(t){var e=this._first;for(t=W(this,t);e;)e._start===t&&"isPause"===e.data&&V(e),e=e._next},e.killTweensOf=function(t,e,i){for(var r=this.getTweensOf(t,i),n=r.length;n--;)je!==r[n]&&r[n].kill(t,e);return this},e.getTweensOf=function(t,e){for(var i,r=[],n=be(t),o=this._first,s=A(e);o;)o instanceof ze?u(o._targets,n)&&(s?(!je||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&r.push(o):(i=o.getTweensOf(n,e)).length&&r.push.apply(r,i),o=o._next;return r},e.tweenTo=function(t,e){e=e||{};var i=this,r=W(i,t),n=e,o=n.startAt,s=n.onStart,a=n.onStartParams,h=ze.to(i,X(e,{ease:"none",lazy:!1,time:r,duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:i._time))/i.timeScale())||Vt,onStart:function(){i.pause();var t=e.duration||Math.abs((r-i._time)/i.timeScale());h._dur!==t&&z(h,t,0,1).render(h._time,!0,!0),s&&s.apply(h,a||[])}}));return h},e.tweenFromTo=function(t,e,i){return this.tweenTo(e,X({startAt:{time:W(this,t)}},i))},e.recent=function(){return this._recent},e.nextLabel=function(t){return void 0===t&&(t=this._time),nt(this,W(this,t))},e.previousLabel=function(t){return void 0===t&&(t=this._time),nt(this,W(this,t),1)},e.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+Vt)},e.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var r,n=this._first,o=this.labels;n;)n._start>=i&&(n._start+=t,n._end+=t),n=n._next;if(e)for(r in o)o[r]>=i&&(o[r]+=t);return g(this)},e.invalidate=function(){var t=this._first;for(this._lock=0;t;)t.invalidate(),t=t._next;return r.prototype.invalidate.call(this)},e.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._time=this._tTime=this._pTime=0,t&&(this.labels={}),g(this)},e.totalDuration=function(t){var e,i,r,n=0,o=this,s=o._last,a=Ht;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-t:t));if(o._dirty){for(r=o.parent;s;)e=s._prev,s._dirty&&s.totalDuration(),a<(i=s._start)&&o._sort&&s._ts&&!o._lock?(o._lock=1,w(o,s,i-s._delay,1)._lock=0):a=i,i<0&&s._ts&&(n-=i,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=i/o._ts,o._time-=i,o._tTime-=i),o.shiftChildren(-i,!1,-Infinity),a=0),s._end>n&&s._ts&&(n=s._end),s=e;z(o,o===mt&&o._time>n?o._time:n,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(t){if(mt._ts&&(c(mt,x(t,mt)),Tt=Ae.frame),Ae.frame>=pe){pe+=Gt.autoSleep||120;var e=mt._first;if((!e||!e._ts)&&Gt.autoSleep&&Ae._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ae.sleep()}}},t}(Fe);X(Be.prototype,{_lock:0,_hasPause:0,_forcing:0});function ke(t,e,i,r,n,o){var s,a,h,u;if(le[t]&&!1!==(s=new le[t]).init(n,s.rawVars?e[t]:function(t,e,i,r,n){if(f(t)&&(t=He(t,n,e,i,r)),!P(t)||t.style&&t.nodeType||Jt(t)||Qt(t))return k(t)?He(t,n,e,i,r):t;var o,s={};for(o in t)s[o]=He(t[o],n,e,i,r);return s}(e[t],r,n,o,i),i,r,o)&&(i._pt=a=new si(i._pt,n,t,0,1,s.render,s,0,s.priority),i!==Et))for(h=i._ptLookup[i._targets.indexOf(n)],u=s._props.length;u--;)h[s._props[u]]=a;return s}var je,Ge=function(t,e,i,r,n,o,s,a,h){f(r)&&(r=r(n||0,t,o));var u,l=t[e],c="get"!==i?i:f(l)?h?t[e.indexOf("set")||!f(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():l,p=f(l)?h?Qe:Ze:Ke;if(k(r)&&(~r.indexOf("random(")&&(r=rt(r)),"="===r.charAt(1)&&(r=parseFloat(c)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(K(c)||0))),c!==r)return isNaN(c*r)?(l||e in t||j(e,r),function(t,e,i,r,n,o,s){var a,h,u,l,c,p,f,d,_=new si(this._pt,t,e,0,1,ei,null,n),y=0,m=0;for(_.b=i,_.e=r,i+="",(f=~(r+="").indexOf("random("))&&(r=rt(r)),o&&(o(d=[i,r],t,e),i=d[0],r=d[1]),h=i.match(ie)||[];a=ie.exec(r);)l=a[0],c=r.substring(y,a.index),u?u=(u+1)%5:"rgba("===c.substr(-5)&&(u=1),l!==h[m++]&&(p=parseFloat(h[m-1])||0,_._pt={_next:_._pt,p:c||1===m?c:",",s:p,c:"="===l.charAt(1)?parseFloat(l.substr(2))*("-"===l.charAt(0)?-1:1):parseFloat(l)-p,m:u&&u<4?Math.round:0},y=ie.lastIndex);return _.c=y<r.length?r.substring(y,r.length):"",_.fp=s,(re.test(r)||f)&&(_.e=0),this._pt=_}.call(this,t,e,c,r,p,a||Gt.stringFilter,h)):(u=new si(this._pt,t,e,+c||0,r-(c||0),"boolean"==typeof l?ti:$e,0,p),h&&(u.fp=h),s&&u.modifier(s,this,t),this._pt=u)},Xe=function t(e,i){var r,n,o,s,a,h,u,l,c,p,f,d,_,y=e.vars,m=y.ease,v=y.startAt,g=y.immediateRender,b=y.lazy,x=y.onUpdate,T=y.onUpdateParams,E=y.callbackScope,w=y.runBackwards,O=y.yoyoEase,S=y.keyframes,A=y.autoRevert,P=e._dur,C=e._startAt,M=e._targets,I=e.parent,R=I&&"nested"===I.data?I.parent._targets:M,N="auto"===e._overwrite,D=e.timeline;if(!D||S&&m||(m="none"),e._ease=Ne(m,Xt.ease),e._yEase=O?Re(Ne(!0===O?m:O,Xt.ease)):0,O&&e._yoyo&&!e._repeat&&(O=e._yEase,e._yEase=e._ease,e._ease=O),!D){if(d=(l=M[0]?F(M[0]).harness:0)&&y[l.prop],r=H(y,ae),C&&C.render(-1,!0).kill(),v){if(V(e._startAt=ze.set(M,X({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:L(b),startAt:null,delay:0,onUpdate:x,onUpdateParams:T,callbackScope:E,stagger:0},v))),g)if(0<i)A||(e._startAt=0);else if(P&&!(i<0&&C))return void(i&&(e._zTime=i))}else if(w&&P)if(C)A||(e._startAt=0);else if(i&&(g=!1),o=X({overwrite:!1,data:"isFromStart",lazy:g&&L(b),immediateRender:g,stagger:0,parent:I},r),d&&(o[l.prop]=d),V(e._startAt=ze.set(M,o)),g){if(!i)return}else t(e._startAt,Vt);for(e._pt=0,b=P&&L(b)||b&&!P,n=0;n<M.length;n++){if(u=(a=M[n])._gsap||U(M)[n]._gsap,e._ptLookup[n]=p={},ue[u.id]&&B(),f=R===M?n:R.indexOf(a),l&&!1!==(c=new l).init(a,d||r,e,f,R)&&(e._pt=s=new si(e._pt,a,c.name,0,1,c.render,c,0,c.priority),c._props.forEach(function(t){p[t]=s}),c.priority&&(h=1)),!l||d)for(o in r)le[o]&&(c=ke(o,r,e,f,a,R))?c.priority&&(h=1):p[o]=s=Ge.call(e,a,o,"get",r[o],f,R,0,y.stringFilter);e._op&&e._op[n]&&e.kill(a,e._op[n]),N&&e._pt&&(je=e,mt.killTweensOf(a,p,e.globalTime(0)),_=!e.parent,je=0),e._pt&&b&&(ue[u.id]=1)}h&&oi(e),e._onInit&&e._onInit(e)}e._from=!D&&!!y.runBackwards,e._onUpdate=x,e._initted=(!e._op||e._pt)&&!_},He=function(t,e,i,r,n){return f(t)?t.call(e,i,r,n):k(t)&&~t.indexOf("random(")?rt(t):t},Ve=de+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Ye=(Ve+",id,stagger,delay,duration,paused,scrollTrigger").split(","),ze=function(O){function n(t,e,i,r){var n;"number"==typeof e&&(i.duration=e,e=i,i=null);var o,s,a,h,u,l,c,p,f=(n=O.call(this,r?e:R(e),i)||this).vars,d=f.duration,_=f.delay,y=f.immediateRender,m=f.stagger,v=f.overwrite,g=f.keyframes,b=f.defaults,x=f.scrollTrigger,T=f.yoyoEase,E=n.parent,w=(Jt(t)||Qt(t)?A(t[0]):"length"in e)?[t]:be(t);if(n._targets=w.length?U(w):M("GSAP target "+t+" not found. https://greensock.com",!Gt.nullTargetWarn)||[],n._ptLookup=[],n._overwrite=v,g||m||C(d)||C(_)){if(e=n.vars,(o=n.timeline=new Be({data:"nested",defaults:b||{}})).kill(),o.parent=S(n),g)X(o.vars.defaults,{ease:"none"}),g.forEach(function(t){return o.to(w,t,">")});else{if(h=w.length,c=m?J(m):I,P(m))for(u in m)~Ve.indexOf(u)&&((p=p||{})[u]=m[u]);for(s=0;s<h;s++){for(u in a={},e)Ye.indexOf(u)<0&&(a[u]=e[u]);a.stagger=0,T&&(a.yoyoEase=T),p&&_e(a,p),l=w[s],a.duration=+He(d,S(n),s,l,w),a.delay=(+He(_,S(n),s,l,w)||0)-n._delay,!m&&1===h&&a.delay&&(n._delay=_=a.delay,n._start+=_,a.delay=0),o.to(l,a,c(s,l,w))}o.duration()?d=_=0:n.timeline=0}d||n.duration(d=o.duration())}else n.timeline=0;return!0===v&&(je=S(n),mt.killTweensOf(w),je=0),E&&N(E,S(n)),(y||!d&&!g&&n._start===G(E._time)&&L(y)&&function t(e){return!e||e._ts&&t(e.parent)}(S(n))&&"nested"!==E.data)&&(n._tTime=-Vt,n.render(Math.max(0,-_))),x&&D(S(n),x),n}o(n,O);var t=n.prototype;return t.render=function(t,e,i){var r,n,o,s,a,h,u,l,c,p=this._time,f=this._tDur,d=this._dur,_=f-Vt<t&&0<=t?f:t<Vt?0:t;if(d){if(_!==this._tTime||!t||i||this._startAt&&this._zTime<0!=t<0){if(r=_,l=this.timeline,this._repeat){if(s=d+this._rDelay,r=G(_%s),_===f?(o=this._repeat,r=d):((o=~~(_/s))&&o===_/s&&(r=d,o--),d<r&&(r=d)),(h=this._yoyo&&1&o)&&(c=this._yEase,r=d-r),a=ye(this._tTime,s),r===p&&!i&&this._initted)return this;o!==a&&(l&&this._yEase&&pt(l,h),!this.vars.repeatRefresh||h||this._lock||(this._lock=i=1,this.render(G(s*o),!0).invalidate()._lock=0))}if(!this._initted){if(Y(this,t<0?t:r,i,e))return this._tTime=0,this;if(d!==this._dur)return this.render(t,e,i)}for(this._tTime=_,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(c||this._ease)(r/d),this._from&&(this.ratio=u=1-u),!r||p||e||Te(this,"onStart"),n=this._pt;n;)n.r(u,n.d),n=n._next;l&&l.render(t<0?t:!r&&h?-Vt:l._dur*u,e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,i),Te(this,"onUpdate")),this._repeat&&o!==a&&this.vars.onRepeat&&!e&&this.parent&&Te(this,"onRepeat"),_!==this._tDur&&_||this._tTime!==_||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),!t&&d||!(_===this._tDur&&0<this._ts||!_&&this._ts<0)||V(this,1),e||t<0&&!p||!_&&!p||(Te(this,_===f?"onComplete":"onReverseComplete",!0),!this._prom||_<f&&0<this.timeScale()||this._prom()))}}else!function(t,e,i,r){var n,o,s=t.ratio,a=e<0||!e&&s&&!t._start&&t._zTime>Vt&&!t._dp._lock||(t._ts<0||t._dp._ts<0)&&"isFromStart"!==t.data&&"isStart"!==t.data?0:1,h=t._rDelay,u=0;if(h&&t._repeat&&(u=ve(0,t._tDur,e),ye(u,h)!==(o=ye(t._tTime,h))&&(s=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),t._initted||!Y(t,e,r,i))if(a!==s||r||t._zTime===Vt||!e&&t._zTime){for(o=t._zTime,t._zTime=e||(i?Vt:0),i=i||e&&!o,t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=u,i||Te(t,"onStart"),n=t._pt;n;)n.r(a,n.d),n=n._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!i&&Te(t,"onUpdate"),u&&t._repeat&&!i&&t.parent&&Te(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===a&&(a&&V(t,1),i||(Te(t,a?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,i);return this},t.targets=function(){return this._targets},t.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),O.prototype.invalidate.call(this)},t.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e)&&(this._lazy=0,this.parent))return ot(this);if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,je&&!0!==je.vars.overwrite)._first||ot(this),this.parent&&i!==this.timeline.totalDuration()&&z(this,this._dur*this.timeline._tDur/i,0,1),this}var r,n,o,s,a,h,u,l=this._targets,c=t?be(t):l,p=this._ptLookup,f=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0}(l,c))return"all"===e&&(this._pt=0),ot(this);for(r=this._op=this._op||[],"all"!==e&&(k(e)&&(a={},d(e,function(t){return a[t]=1}),e=a),e=function(t,e){var i,r,n,o,s=t[0]?F(t[0]).harness:0,a=s&&s.aliases;if(!a)return e;for(r in i=_e({},e),a)if(r in i)for(n=(o=a[r].split(",")).length;n--;)i[o[n]]=i[r];return i}(l,e)),u=l.length;u--;)if(~c.indexOf(l[u]))for(a in n=p[u],"all"===e?(r[u]=e,s=n,o={}):(o=r[u]=r[u]||{},s=e),s)(h=n&&n[a])&&("kill"in h.d&&!0!==h.d.kill(a)||v(this,h,"_pt"),delete n[a]),"all"!==o&&(o[a]=1);return this._initted&&!this._pt&&f&&ot(this),this},n.to=function(t,e,i){return new n(t,e,i)},n.from=function(t,e){return new n(t,l(arguments,1))},n.delayedCall=function(t,e,i,r){return new n(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},n.fromTo=function(t,e,i){return new n(t,l(arguments,2))},n.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new n(t,e)},n.killTweensOf=function(t,e,i){return mt.killTweensOf(t,e,i)},n}(Fe);X(ze.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),d("staggerTo,staggerFrom,staggerFromTo",function(i){ze[i]=function(){var t=new Be,e=ge.call(arguments,0);return e.splice("staggerFromTo"===i?5:4,0,0),t[i].apply(t,e)}});function We(t,e,i){return t.setAttribute(e,i)}function qe(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)}var Ke=function(t,e,i){return t[e]=i},Ze=function(t,e,i){return t[e](i)},Qe=function(t,e,i,r){return t[e](r.fp,i)},Je=function(t,e){return f(t[e])?Ze:n(t[e])&&t.setAttribute?We:Ke},$e=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},ti=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},ei=function(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)},ii=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},ri=function(t,e,i,r){for(var n,o=this._pt;o;)n=o._next,o.p===r&&o.modifier(t,e,i),o=n},ni=function(t){for(var e,i,r=this._pt;r;)i=r._next,r.p===t&&!r.op||r.op===t?v(this,r,"_pt"):r.dep||(e=1),r=i;return!e},oi=function(t){for(var e,i,r,n,o=t._pt;o;){for(e=o._next,i=r;i&&i.pr>o.pr;)i=i._next;(o._prev=i?i._prev:n)?o._prev._next=o:r=o,(o._next=i)?i._prev=o:n=o,o=e}t._pt=r},si=function(){function t(t,e,i,r,n,o,s,a,h){this.t=e,this.s=r,this.c=n,this.p=i,this.r=o||$e,this.d=s||this,this.set=a||Ke,this.pr=h||0,(this._next=t)&&(t._prev=this)}return t.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=qe,this.m=t,this.mt=i,this.tween=e},t}();d(de+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return ae[t]=1}),oe.TweenMax=oe.TweenLite=ze,oe.TimelineLite=oe.TimelineMax=Be,mt=new Be({sortChildren:!1,defaults:Xt,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Gt.stringFilter=lt;var ai={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(t){return function(t){var e=(t=!t.name&&t.default||t).name,i=f(t),r=e&&!i&&t.init?function(){this._props=[]}:t,n={init:I,render:ii,add:Ge,kill:ni,modifier:ri,rawVars:0},o={targetTest:0,get:0,getSetter:Je,aliases:{},register:0};if(Pe(),t!==r){if(le[e])return;X(r,X(H(t,n),o)),_e(r.prototype,_e(n,H(t,o))),le[r.prop=e]=r,t.targetTest&&(fe.push(r),ae[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}a(e,r),t.register&&t.register(li,r,si)}(t)})},timeline:function(t){return new Be(t)},getTweensOf:function(t,e){return mt.getTweensOf(t,e)},getProperty:function(r,t,e,i){k(r)&&(r=be(r)[0]);var n=F(r||{}).get,o=e?_:p;return"native"===e&&(e=""),r?t?o((le[t]&&le[t].get||n)(r,t,e,i)):function(t,e,i){return o((le[t]&&le[t].get||n)(r,t,e,i))}:r},quickSetter:function(i,e,r){if(1<(i=be(i)).length){var n=i.map(function(t){return li.quickSetter(t,e,r)}),o=n.length;return function(t){for(var e=o;e--;)n[e](t)}}i=i[0]||{};var s=le[e],a=F(i),h=a.harness&&(a.harness.aliases||{})[e]||e,u=s?function(t){var e=new s;Et._pt=0,e.init(i,r?t+r:t,Et,0,[i]),e.render(1,e),Et._pt&&ii(1,Et)}:a.set(i,h);return s?u:function(t){return u(i,h,r?t+r:t,a,1)}},isTweening:function(t){return 0<mt.getTweensOf(t,!0).length},defaults:function(t){return t&&t.ease&&(t.ease=Ne(t.ease,Xt.ease)),m(Xt,t||{})},config:function(t){return m(Gt,t||{})},registerEffect:function(t){var r=t.name,n=t.effect,e=t.plugins,o=t.defaults,i=t.extendTimeline;(e||"").split(",").forEach(function(t){return t&&!le[t]&&!oe[t]&&M(r+" effect requires "+t+" plugin.")}),ce[r]=function(t,e,i){return n(be(t),X(e||{},o),i)},i&&(Be.prototype[r]=function(t,e,i){return this.add(ce[r](t,P(e)?e:(i=e)&&{},this),i)})},registerEase:function(t,e){Ce[t]=Ne(e)},parseEase:function(t,e){return arguments.length?Ne(t,e):Ce},getById:function(t){return mt.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,r,n=new Be(t);for(n.smoothChildTiming=L(t.smoothChildTiming),mt.remove(n),n._dp=0,n._time=n._tTime=mt._time,i=mt._first;i;)r=i._next,!e&&!i._dur&&i instanceof ze&&i.vars.onComplete===i._targets[0]||w(n,i,i._start-i._delay),i=r;return w(mt,n,0),n},utils:{wrap:function t(e,i,r){var n=i-e;return Jt(e)?it(e,t(0,e.length),i):q(r,function(t){return(n+(t-e)%n)%n+e})},wrapYoyo:function t(e,i,r){var n=i-e,o=2*n;return Jt(e)?it(e,t(0,e.length-1),i):q(r,function(t){return e+(n<(t=(o+(t-e)%o)%o||0)?o-t:t)})},distribute:J,random:et,snap:tt,normalize:function(t,e,i){return xe(t,e,0,1,i)},getUnit:K,clamp:function(e,i,t){return q(t,function(t){return ve(e,i,t)})},splitColor:at,toArray:be,mapRange:xe,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(e,i){return function(t){return e(parseFloat(t))+(i||K(t))}},interpolate:function t(e,i,r,n){var o=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!o){var s,a,h,u,l,c=k(e),p={};if(!0===r&&(n=1)&&(r=null),c)e={p:e},i={p:i};else if(Jt(e)&&!Jt(i)){for(h=[],u=e.length,l=u-2,a=1;a<u;a++)h.push(t(e[a-1],e[a]));u--,o=function(t){t*=u;var e=Math.min(l,~~t);return h[e](t-e)},r=i}else n||(e=_e(Jt(e)?[]:{},e));if(!h){for(s in i)Ge.call(p,e,s,"get",i[s]);o=function(t){return ii(t,p)||(c?e.p:e)}}}return q(r,o)},shuffle:Q},install:s,effects:ce,ticker:Ae,updateRoot:Be.updateRoot,plugins:le,globalTimeline:mt,core:{PropTween:si,globals:a,Tween:ze,Timeline:Be,Animation:Fe,getCache:F,_removeLinkedListItem:v}};d("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return ai[t]=ze[t]}),Ae.add(Be.updateRoot),Et=ai.to({},{duration:0});function hi(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i}function ui(t,n){return{name:t,rawVars:1,init:function(t,r,e){e._onInit=function(t){var e,i;if(k(r)&&(e={},d(r,function(t){return e[t]=1}),r=e),n){for(i in e={},r)e[i]=n(r[i]);r=e}!function(t,e){var i,r,n,o=t._targets;for(i in e)for(r=o.length;r--;)(n=(n=t._ptLookup[r][i])&&n.d)&&(n._pt&&(n=hi(n,i)),n&&n.modifier&&n.modifier(e[i],t,o[r],i))}(t,r)}}}}var li=ai.registerPlugin({name:"attr",init:function(t,e,i,r,n){var o,s;for(o in e)(s=this.add(t,"setAttribute",(t.getAttribute(o)||0)+"",e[o],r,n,0,0,o))&&(s.op=o),this._props.push(o)}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i])}},ui("roundProps",$),ui("modifiers"),ui("snap",tt))||ai;ze.version=Be.version=li.version="3.5.0",xt=1,r()&&Pe();function ci(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function pi(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)}function fi(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)}function di(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)}function _i(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)}function yi(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)}function mi(t,e,i){return t.style[e]=i}function vi(t,e,i){return t.style.setProperty(e,i)}function gi(t,e,i){return t._gsap[e]=i}function bi(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i}function xi(t,e,i,r,n){var o=t._gsap;o.scaleX=o.scaleY=i,o.renderTransform(n,o)}function Ti(t,e,i,r,n){var o=t._gsap;o[e]=i,o.renderTransform(n,o)}function Ei(t,e){var i=Hi.createElementNS?Hi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Hi.createElement(t);return i.style?i:Hi.createElement(t)}function wi(t,e,i){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(vr,"-$1").toLowerCase())||r.getPropertyValue(e)||!i&&wi(t,Or(e)||e,1)||""}function Oi(){"undefined"!=typeof window&&window.document&&(Xi=window,Hi=Xi.document,Vi=Hi.documentElement,zi=Ei("div")||{style:{}},Wi=Ei("div"),Tr=Or(Tr),Er=Tr+"Origin",zi.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ki=!!Or("perspective"),Yi=1)}function Si(t){var e,i=Ei("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,n=this.nextSibling,o=this.style.cssText;if(Vi.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=Si}catch(t){}else this._gsapBBox&&(e=this._gsapBBox());return r&&(n?r.insertBefore(this,n):r.appendChild(this)),Vi.removeChild(i),this.style.cssText=o,e}function Ai(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])}function Pi(e){var i;try{i=e.getBBox()}catch(t){i=Si.call(e,!0)}return i&&(i.width||i.height)||e.getBBox===Si||(i=Si.call(e,!0)),!i||i.width||i.x||i.y?i:{x:+Ai(e,["x","cx","x1"])||0,y:+Ai(e,["y","cy","y1"])||0,width:0,height:0}}function Ci(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Pi(t))}function Mi(t,e){if(e){var i=t.style;e in dr&&e!==Er&&(e=Tr),i.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty(e.replace(vr,"-$1").toLowerCase())):i.removeAttribute(e)}}function Ii(t,e,i,r,n,o){var s=new si(t._pt,e,i,0,1,o?yi:_i);return(t._pt=s).b=r,s.e=n,t._props.push(i),s}function Ri(t,e,i,r){var n,o,s,a,h=parseFloat(i)||0,u=(i+"").trim().substr((h+"").length)||"px",l=zi.style,c=gr.test(e),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(c?"Width":"Height"),d="px"===r,_="%"===r;return r===u||!h||Sr[r]||Sr[u]?h:("px"===u||d||(h=Ri(t,e,i,"px")),a=t.getCTM&&Ci(t),_&&(dr[e]||~e.indexOf("adius"))?G(h/(a?t.getBBox()[c?"width":"height"]:t[f])*100):(l[c?"width":"height"]=100+(d?u:r),o=~e.indexOf("adius")||"em"===r&&t.appendChild&&!p?t:t.parentNode,a&&(o=(t.ownerSVGElement||{}).parentNode),o&&o!==Hi&&o.appendChild||(o=Hi.body),(s=o._gsap)&&_&&s.width&&c&&s.time===Ae.time?G(h/s.width*100):(!_&&"%"!==u||(l.position=wi(t,"position")),o===t&&(l.position="static"),o.appendChild(zi),n=zi[f],o.removeChild(zi),l.position="absolute",c&&_&&((s=F(o)).time=Ae.time,s.width=o[f]),G(d?n*h/100:n&&h?100/n*h:0))))}function Ni(t,e,i,r){var n;return Yi||Oi(),e in xr&&"transform"!==e&&~(e=xr[e]).indexOf(",")&&(e=e.split(",")[0]),dr[e]&&"transform"!==e?(n=Ir(t,r),n="transformOrigin"!==e?n[e]:Rr(wi(t,Er))+" "+n.zOrigin+"px"):(n=t.style[e])&&"auto"!==n&&!r&&!~(n+"").indexOf("calc(")||(n=Pr[e]&&Pr[e](t,e,i)||wi(t,e)||h(t,e)||("opacity"===e?1:0)),i&&!~(n+"").indexOf(" ")?Ri(t,e,n,i)+i:n}function Di(t,e,i,r){if(!i||"none"===i){var n=Or(e,t,1),o=n&&wi(t,n,1);o&&o!==i?(e=n,i=o):"borderColor"===e&&(i=wi(t,"borderTopColor"))}var s,a,h,u,l,c,p,f,d,_,y,m,v=new si(this._pt,t.style,e,0,1,ei),g=0,b=0;if(v.b=i,v.e=r,i+="","auto"===(r+="")&&(t.style[e]=r,r=wi(t,e)||r,t.style[e]=i),lt(s=[i,r]),r=s[1],h=(i=s[0]).match(ee)||[],(r.match(ee)||[]).length){for(;a=ee.exec(r);)p=a[0],d=r.substring(g,a.index),l?l=(l+1)%5:"rgba("!==d.substr(-5)&&"hsla("!==d.substr(-5)||(l=1),p!==(c=h[b++]||"")&&(u=parseFloat(c)||0,y=c.substr((u+"").length),(m="="===p.charAt(1)?+(p.charAt(0)+"1"):0)&&(p=p.substr(2)),f=parseFloat(p),_=p.substr((f+"").length),g=ee.lastIndex-_.length,_||(_=_||Gt.units[e]||y,g===r.length&&(r+=_,v.e+=_)),y!==_&&(u=Ri(t,e,c,_)||0),v._pt={_next:v._pt,p:d||1===b?d:",",s:u,c:m?m*f:f-u,m:l&&l<4?Math.round:0});v.c=g<r.length?r.substring(g,r.length):""}else v.r="display"===e&&"none"===r?yi:_i;return re.test(r)&&(v.e=0),this._pt=v}function Li(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,r,n,o=e.t,s=o.style,a=e.u,h=o._gsap;if("all"===a||!0===a)s.cssText="",r=1;else for(n=(a=a.split(",")).length;-1<--n;)i=a[n],dr[i]&&(r=1,i="transformOrigin"===i?Er:Tr),Mi(o,i);r&&(Mi(o,Tr),h&&(h.svg&&o.removeAttribute("transform"),Ir(o,1),h.uncache=1))}}function Ui(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t}function Fi(t){var e=wi(t,Tr);return Ui(e)?Cr:e.substr(7).match(te).map(G)}function Bi(t,e){var i,r,n,o,s=t._gsap||F(t),a=t.style,h=Fi(t);return s.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(h=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?Cr:h:(h!==Cr||t.offsetParent||t===Vi||s.svg||(n=a.display,a.display="block",(i=t.parentNode)&&t.offsetParent||(o=1,r=t.nextSibling,Vi.appendChild(t)),h=Fi(t),n?a.display=n:Mi(t,"display"),o&&(r?i.insertBefore(t,r):i?i.appendChild(t):Vi.removeChild(t))),e&&6<h.length?[h[0],h[1],h[4],h[5],h[12],h[13]]:h)}function ki(t,e,i,r,n,o){var s,a,h,u=t._gsap,l=n||Bi(t,!0),c=u.xOrigin||0,p=u.yOrigin||0,f=u.xOffset||0,d=u.yOffset||0,_=l[0],y=l[1],m=l[2],v=l[3],g=l[4],b=l[5],x=e.split(" "),T=parseFloat(x[0])||0,E=parseFloat(x[1])||0;i?l!==Cr&&(a=_*v-y*m)&&(h=T*(-y/a)+E*(_/a)-(_*b-y*g)/a,T=T*(v/a)+E*(-m/a)+(m*b-v*g)/a,E=h):(T=(s=Pi(t)).x+(~x[0].indexOf("%")?T/100*s.width:T),E=s.y+(~(x[1]||x[0]).indexOf("%")?E/100*s.height:E)),r||!1!==r&&u.smooth?(g=T-c,b=E-p,u.xOffset=f+(g*_+b*m)-g,u.yOffset=d+(g*y+b*v)-b):u.xOffset=u.yOffset=0,u.xOrigin=T,u.yOrigin=E,u.smooth=!!r,u.origin=e,u.originIsAbsolute=!!i,t.style[Er]="0px 0px",o&&(Ii(o,u,"xOrigin",c,T),Ii(o,u,"yOrigin",p,E),Ii(o,u,"xOffset",f,u.xOffset),Ii(o,u,"yOffset",d,u.yOffset)),t.setAttribute("data-svg-origin",T+" "+E)}function ji(t,e,i){var r=K(e);return G(parseFloat(e)+parseFloat(Ri(t,"x",i+"px",r)))+r}function Gi(t,e,i){var r,n,o,s,a,h,u,l=Wi.style,c=i._gsap;for(n in l.cssText=getComputedStyle(i).cssText+";position:absolute;display:block;",l[Tr]=e,Hi.body.appendChild(Wi),r=Ir(Wi,1),dr)(o=c[n])!==(s=r[n])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)<0&&(a=K(o)!==(u=K(s))?Ri(i,n,o,u):parseFloat(o),h=parseFloat(s),t._pt=new si(t._pt,c,n,a,h-a,ci),t._pt.u=u||0,t._props.push(n));Hi.body.removeChild(Wi)}var Xi,Hi,Vi,Yi,zi,Wi,qi,Ki,Zi=Ce.Power0,Qi=Ce.Power1,Ji=Ce.Power2,$i=Ce.Power3,tr=Ce.Power4,er=Ce.Linear,ir=Ce.Quad,rr=Ce.Cubic,nr=Ce.Quart,or=Ce.Quint,sr=Ce.Strong,ar=Ce.Elastic,hr=Ce.Back,ur=Ce.SteppedEase,lr=Ce.Bounce,cr=Ce.Sine,pr=Ce.Expo,fr=Ce.Circ,dr={},_r=180/Math.PI,yr=Math.PI/180,mr=Math.atan2,vr=/([A-Z])/g,gr=/(?:left|right|width|margin|padding|x)/i,br=/[\s,\(]\S/,xr={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Tr="transform",Er=Tr+"Origin",wr="O,Moz,ms,Ms,Webkit".split(","),Or=function(t,e,i){var r=(e||zi).style,n=5;if(t in r&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(wr[n]+t in r););return n<0?null:(3===n?"ms":0<=n?wr[n]:"")+t},Sr={deg:1,rad:1,turn:1},Ar={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Pr={clearProps:function(t,e,i,r,n){if("isFromStart"!==n.data){var o=t._pt=new si(t._pt,e,i,0,0,Li);return o.u=r,o.pr=-10,o.tween=n,t._props.push(i),1}}},Cr=[1,0,0,1,0,0],Mr={},Ir=function(t,e){var i=t._gsap||new Ue(t);if("x"in i&&!e&&!i.uncache)return i;var r,n,o,s,a,h,u,l,c,p,f,d,_,y,m,v,g,b,x,T,E,w,O,S,A,P,C,M,I,R,N,D,L=t.style,U=i.scaleX<0,F="deg",B=wi(t,Er)||"0";return r=n=o=h=u=l=c=p=f=0,s=a=1,i.svg=!(!t.getCTM||!Ci(t)),y=Bi(t,i.svg),i.svg&&(S=!i.uncache&&t.getAttribute("data-svg-origin"),ki(t,S||B,!!S||i.originIsAbsolute,!1!==i.smooth,y)),d=i.xOrigin||0,_=i.yOrigin||0,y!==Cr&&(b=y[0],x=y[1],T=y[2],E=y[3],r=w=y[4],n=O=y[5],6===y.length?(s=Math.sqrt(b*b+x*x),a=Math.sqrt(E*E+T*T),h=b||x?mr(x,b)*_r:0,(c=T||E?mr(T,E)*_r+h:0)&&(a*=Math.cos(c*yr)),i.svg&&(r-=d-(d*b+_*T),n-=_-(d*x+_*E))):(D=y[6],R=y[7],C=y[8],M=y[9],I=y[10],N=y[11],r=y[12],n=y[13],o=y[14],u=(m=mr(D,I))*_r,m&&(S=w*(v=Math.cos(-m))+C*(g=Math.sin(-m)),A=O*v+M*g,P=D*v+I*g,C=w*-g+C*v,M=O*-g+M*v,I=D*-g+I*v,N=R*-g+N*v,w=S,O=A,D=P),l=(m=mr(-T,I))*_r,m&&(v=Math.cos(-m),N=E*(g=Math.sin(-m))+N*v,b=S=b*v-C*g,x=A=x*v-M*g,T=P=T*v-I*g),h=(m=mr(x,b))*_r,m&&(S=b*(v=Math.cos(m))+x*(g=Math.sin(m)),A=w*v+O*g,x=x*v-b*g,O=O*v-w*g,b=S,w=A),u&&359.9<Math.abs(u)+Math.abs(h)&&(u=h=0,l=180-l),s=G(Math.sqrt(b*b+x*x+T*T)),a=G(Math.sqrt(O*O+D*D)),m=mr(w,O),c=2e-4<Math.abs(m)?m*_r:0,f=N?1/(N<0?-N:N):0),i.svg&&(S=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!Ui(wi(t,Tr)),S&&t.setAttribute("transform",S))),90<Math.abs(c)&&Math.abs(c)<270&&(U?(s*=-1,c+=h<=0?180:-180,h+=h<=0?180:-180):(a*=-1,c+=c<=0?180:-180)),i.x=((i.xPercent=r&&Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)?0:r)+"px",i.y=((i.yPercent=n&&Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)?0:n)+"px",i.z=o+"px",i.scaleX=G(s),i.scaleY=G(a),i.rotation=G(h)+F,i.rotationX=G(u)+F,i.rotationY=G(l)+F,i.skewX=c+F,i.skewY=p+F,i.transformPerspective=f+"px",(i.zOrigin=parseFloat(B.split(" ")[2])||0)&&(L[Er]=Rr(B)),i.xOffset=i.yOffset=0,i.force3D=Gt.force3D,i.renderTransform=i.svg?Br:Ki?Fr:Nr,i.uncache=0,i},Rr=function(t){return(t=t.split(" "))[0]+" "+t[1]},Nr=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Fr(t,e)},Dr="0deg",Lr="0px",Ur=") ",Fr=function(t,e){var i=e||this,r=i.xPercent,n=i.yPercent,o=i.x,s=i.y,a=i.z,h=i.rotation,u=i.rotationY,l=i.rotationX,c=i.skewX,p=i.skewY,f=i.scaleX,d=i.scaleY,_=i.transformPerspective,y=i.force3D,m=i.target,v=i.zOrigin,g="",b="auto"===y&&t&&1!==t||!0===y;if(v&&(l!==Dr||u!==Dr)){var x,T=parseFloat(u)*yr,E=Math.sin(T),w=Math.cos(T);T=parseFloat(l)*yr,x=Math.cos(T),o=ji(m,o,E*x*-v),s=ji(m,s,-Math.sin(T)*-v),a=ji(m,a,w*x*-v+v)}_!==Lr&&(g+="perspective("+_+Ur),(r||n)&&(g+="translate("+r+"%, "+n+"%) "),!b&&o===Lr&&s===Lr&&a===Lr||(g+=a!==Lr||b?"translate3d("+o+", "+s+", "+a+") ":"translate("+o+", "+s+Ur),h!==Dr&&(g+="rotate("+h+Ur),u!==Dr&&(g+="rotateY("+u+Ur),l!==Dr&&(g+="rotateX("+l+Ur),c===Dr&&p===Dr||(g+="skew("+c+", "+p+Ur),1===f&&1===d||(g+="scale("+f+", "+d+Ur),m.style[Tr]=g||"translate(0, 0)"},Br=function(t,e){var i,r,n,o,s,a=e||this,h=a.xPercent,u=a.yPercent,l=a.x,c=a.y,p=a.rotation,f=a.skewX,d=a.skewY,_=a.scaleX,y=a.scaleY,m=a.target,v=a.xOrigin,g=a.yOrigin,b=a.xOffset,x=a.yOffset,T=a.forceCSS,E=parseFloat(l),w=parseFloat(c);p=parseFloat(p),f=parseFloat(f),(d=parseFloat(d))&&(f+=d=parseFloat(d),p+=d),p||f?(p*=yr,f*=yr,i=Math.cos(p)*_,r=Math.sin(p)*_,n=Math.sin(p-f)*-y,o=Math.cos(p-f)*y,f&&(d*=yr,s=Math.tan(f-d),n*=s=Math.sqrt(1+s*s),o*=s,d&&(s=Math.tan(d),i*=s=Math.sqrt(1+s*s),r*=s)),i=G(i),r=G(r),n=G(n),o=G(o)):(i=_,o=y,r=n=0),(E&&!~(l+"").indexOf("px")||w&&!~(c+"").indexOf("px"))&&(E=Ri(m,"x",l,"px"),w=Ri(m,"y",c,"px")),(v||g||b||x)&&(E=G(E+v-(v*i+g*n)+b),w=G(w+g-(v*r+g*o)+x)),(h||u)&&(s=m.getBBox(),E=G(E+h/100*s.width),w=G(w+u/100*s.height)),s="matrix("+i+","+r+","+n+","+o+","+E+","+w+")",m.setAttribute("transform",s),T&&(m.style[Tr]=s)};
/*!
 * CSSPlugin 3.5.0
 * https://greensock.com
 *
 * Copyright 2008-2020, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/d("padding,margin,Width,Radius",function(e,i){var t="Right",r="Bottom",n="Left",a=(i<3?["Top",t,r,n]:["Top"+n,"Top"+t,r+t,r+n]).map(function(t){return i<2?e+t:"border"+t+e});Pr[1<i?"border"+e:e]=function(e,t,i,r,n){var o,s;if(arguments.length<4)return o=a.map(function(t){return Ni(e,t,i)}),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach(function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]}),e.init(t,s,n)}});var kr,jr,Gr,Xr={name:"css",register:Oi,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,n){var o,s,a,h,u,l,c,p,f,d,_,y,m,v,g,b,x,T,E,w,O,S,A,P,C,M,I,R,N,D,L,U,F=this._props,B=t.style;for(c in Yi||Oi(),e)if("autoRound"!==c&&(s=e[c],!le[c]||!ke(c,e,i,r,t,n)))if(u=typeof s,l=Pr[c],"function"===u&&(u=typeof(s=s.call(i,r,t,n))),"string"===u&&~s.indexOf("random(")&&(s=rt(s)),l)l(this,t,c,s,i)&&(g=1);else if("--"===c.substr(0,2))this.add(B,"setProperty",getComputedStyle(t).getPropertyValue(c)+"",s+"",r,n,0,0,c);else if("undefined"!==u){if(o=Ni(t,c),h=parseFloat(o),(d="string"===u&&"="===s.charAt(1)?+(s.charAt(0)+"1"):0)&&(s=s.substr(2)),a=parseFloat(s),c in xr&&("autoAlpha"===c&&(1===h&&"hidden"===Ni(t,"visibility")&&a&&(h=0),Ii(this,B,"visibility",h?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==c&&"transform"!==c&&~(c=xr[c]).indexOf(",")&&(c=c.split(",")[0])),_=c in dr)if(y||((m=t._gsap).renderTransform||Ir(t),v=!1!==e.smoothOrigin&&m.smooth,(y=this._pt=new si(this._pt,B,Tr,0,1,m.renderTransform,m,0,-1)).dep=1),"scale"===c)this._pt=new si(this._pt,m,"scaleY",m.scaleY,d?d*a:a-m.scaleY),F.push("scaleY",c),c+="X";else{if("transformOrigin"===c){U=L=D=void 0,D=(N=s).split(" "),L=D[0],U=D[1]||"50%","top"!==L&&"bottom"!==L&&"left"!==U&&"right"!==U||(N=L,L=U,U=N),D[0]=Ar[L]||L,D[1]=Ar[U]||U,s=D.join(" "),m.svg?ki(t,s,0,v,0,this):((f=parseFloat(s.split(" ")[2])||0)!==m.zOrigin&&Ii(this,m,"zOrigin",m.zOrigin,f),Ii(this,B,c,Rr(o),Rr(s)));continue}if("svgOrigin"===c){ki(t,s,1,v,0,this);continue}if(c in Mr){b=this,x=m,T=c,E=h,O=d,I=A=S=void 0,P=360,C=k(w=s),M=parseFloat(w)*(C&&~w.indexOf("rad")?_r:1),R=E+(I=O?M*O:M-E)+"deg",C&&("short"===(S=w.split("_")[1])&&(I%=P)!=I%180&&(I+=I<0?P:-P),"cw"===S&&I<0?I=(I+36e9)%P-~~(I/P)*P:"ccw"===S&&0<I&&(I=(I-36e9)%P-~~(I/P)*P)),b._pt=A=new si(b._pt,x,T,E,I,pi),A.e=R,A.u="deg",b._props.push(T);continue}if("smoothOrigin"===c){Ii(this,m,"smooth",m.smooth,s);continue}if("force3D"===c){m[c]=s;continue}if("transform"===c){Gi(this,s,t);continue}}else c in B||(c=Or(c)||c);if(_||(a||0===a)&&(h||0===h)&&!br.test(s)&&c in B)(p=(o+"").substr((h+"").length))!==(f=(s+"").substr(((a=a||0)+"").length)||(c in Gt.units?Gt.units[c]:p))&&(h=Ri(t,c,o,f)),this._pt=new si(this._pt,_?m:B,c,h,d?d*a:a-h,"px"!==f||!1===e.autoRound||_?ci:di),this._pt.u=f||0,p!==f&&(this._pt.b=o,this._pt.r=fi);else if(c in B)Di.call(this,t,c,o,s);else{if(!(c in t)){j(c,s);continue}this.add(t,c,t[c],s,r,n)}F.push(c)}g&&oi(this)},get:Ni,aliases:xr,getSetter:function(t,e,i){var r=xr[e];return r&&r.indexOf(",")<0&&(e=r),e in dr&&e!==Er&&(t._gsap.x||Ni(t,"x"))?i&&qi===i?"scale"===e?bi:gi:(qi=i||{})&&("scale"===e?xi:Ti):t.style&&!n(t.style[e])?mi:~e.indexOf("-")?vi:Je(t,e)},core:{_removeProperty:Mi,_getMatrix:Bi}};li.utils.checkPrefix=Or,Gr=d((kr="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(jr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){dr[t]=1}),d(jr,function(t){Gt.units[t]="deg",Mr[t]=1}),xr[Gr[13]]=kr+","+jr,d("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){var e=t.split(":");xr[e[1]]=Gr[e[0]]}),d("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Gt.units[t]="px"}),li.registerPlugin(Xr),i.d(e,"gsap",function(){return Hr}),i.d(e,"default",function(){return Hr}),i.d(e,"TweenMax",function(){return Vr}),i.d(e,"CSSPlugin",function(){return Xr}),i.d(e,"TweenLite",function(){return ze}),i.d(e,"TimelineMax",function(){return Be}),i.d(e,"TimelineLite",function(){return Be}),i.d(e,"Power0",function(){return Zi}),i.d(e,"Power1",function(){return Qi}),i.d(e,"Power2",function(){return Ji}),i.d(e,"Power3",function(){return $i}),i.d(e,"Power4",function(){return tr}),i.d(e,"Linear",function(){return er}),i.d(e,"Quad",function(){return ir}),i.d(e,"Cubic",function(){return rr}),i.d(e,"Quart",function(){return nr}),i.d(e,"Quint",function(){return or}),i.d(e,"Strong",function(){return sr}),i.d(e,"Elastic",function(){return ar}),i.d(e,"Back",function(){return hr}),i.d(e,"SteppedEase",function(){return ur}),i.d(e,"Bounce",function(){return lr}),i.d(e,"Sine",function(){return cr}),i.d(e,"Expo",function(){return pr}),i.d(e,"Circ",function(){return fr});var Hr=li.registerPlugin(Xr)||li,Vr=Hr.core.Tween},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(21),n=(Object.defineProperty(o.prototype,"mvc",{get:function(){return r.Mvc.getInstance()},enumerable:!0,configurable:!0}),o.prototype.registerModels=function(){},o.prototype.registerControllers=function(){},o.prototype.registerScenes=function(){},o.prototype.addModel=function(t,e){this.mvc.registerModel(t,e)},o.prototype.addController=function(t,e,i){this.mvc.registerController(t,e,i)},o.prototype.addScene=function(t,e){this.mvc.registerScene(t,e)},o);function o(){this.registerModels(),this.registerControllers(),this.registerScenes()}e.Module=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.TRANSITION_TO_SCENE="TRANSITION_TO_SCENE",n);function n(){}e.GlobalNotifications=r},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(i(8)),h=i(1),u=i(0),l=i(13),c=(s=l.MVCEntity,n(p,s),p.prototype.onRegister=function(){s.prototype.onRegister.call(this),this.display.visible=!1},p.prototype.postRegister=function(){},p.prototype.layerTransitionInStart=function(){var t=this;this.display.visible=!0,a.default.fromTo(this.display,{alpha:0},{duration:.5,alpha:1,onComplete:function(){return t.layerTransitionInComplete()}})},p.prototype.layerTransitionInComplete=function(){},p.prototype.layerTransitionOutStart=function(){var t=this;this.display.visible&&a.default.to(this.display,{duration:.5,alpha:0,onComplete:function(){t.display.visible=!1,t.layerTransitionOutComplete()}})},p.prototype.layerTransitionOutComplete=function(){},p.prototype.getSceneWidth=function(){return u.AppManager.getInstance().getSceneWidth()},p.prototype.getSceneHeight=function(){return u.AppManager.getInstance().getSceneHeight()},p);function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.display=new h.Container,t}e.View=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.SCENE="GAME_SCENE",n.MAIN="GAME_MAIN",n.CREATE_BULLET="GAME_MAIN_CREATE_BULLET",n.UI_UPDATE="GAME_UI_UPDATE",n.UI="GAME_UI",n);function n(){}e.GameNotifications=r;var o=(s.GAME="GAME_MODEL",s);function s(){}e.GameModels=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(21),n=i(0),o=(Object.defineProperty(s.prototype,"mvc",{get:function(){return r.Mvc.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"app",{get:function(){return n.AppManager.getInstance()},enumerable:!0,configurable:!0}),s.prototype.onRegister=function(){},s.prototype.playSound=function(t){this.app.playSound(t)},s.prototype.getTexture=function(t){return this.app.getTexture(t)},s.prototype.getSpriteTextures=function(t,e,i,r){return this.app.getSpriteTextures(t,e,i,r)},s.prototype.getInput=function(){return this.app.keys},s);function s(){}e.MVCEntity=o},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(55),a=i(5),h=i(18),u=(o=s.State,n(l,o),Object.defineProperty(l.prototype,"view",{get:function(){return this.unit.view},enumerable:!0,configurable:!0}),l.prototype.enter=function(){this.unit.canCollide=!0},l.prototype.stop=function(){this.unit.fsm.transition(h.UnitStates.Idle)},l.prototype.move=function(t){this.unit.fsm.transition(h.UnitStates.Move)},l.prototype.shoot=function(){this.unit.onShoot(this.view.getBulletParams()),this.unit.playSound(a.Config.assets.soundShoot)},l.prototype.handleCollisionWithMapItem=function(t){},l.prototype.handleCollisionWithOtherUnit=function(t){},l.prototype.handleCollisionWithBullet=function(t){t.owner.type!==this.unit.type&&(t.destroy(),this.handleDeath(t))},l.prototype.handleDeath=function(t){this.unit.isImmortal||(this.unit.playSound(a.Config.assets.soundHit),this.unit.life--,this.unit.onHitOrHeal(),0===this.unit.life&&this.unit.fsm.transition(h.UnitStates.Die))},l);function l(t){var e=o.call(this,t)||this;return e.unit=t,e}e.UnitState=u},function(t,e,i){"use strict";var N=i(35),D=i(38);function A(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=o,e.resolve=function(t,e){return o(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?o(t,!1,!0).resolveObject(e):e},e.format=function(t){D.isString(t)&&(t=o(t));return t instanceof A?t.format():A.prototype.format.call(t)},e.Url=A;var L=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,U=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),F=["'"].concat(n),B=["%","/","?",";","#"].concat(F),k=["/","?","#"],j=/^[+a-z0-9A-Z_-]{0,63}$/,G=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,X={javascript:!0,"javascript:":!0},H={javascript:!0,"javascript:":!0},V={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Y=i(39);function o(t,e,i){if(t&&D.isObject(t)&&t instanceof A)return t;var r=new A;return r.parse(t,e,i),r}A.prototype.parse=function(t,e,i){if(!D.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),n=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(n);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(n);if(s=s.trim(),!i&&1===t.split("#").length){var a=U.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?Y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=L.exec(s);if(h){var u=(h=h[0]).toLowerCase();this.protocol=u,s=s.substr(h.length)}if(i||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===s.substr(0,2);!l||h&&H[h]||(s=s.substr(2),this.slashes=!0)}if(!H[h]&&(l||h&&!V[h])){for(var c,p,f=-1,d=0;d<k.length;d++){-1!==(_=s.indexOf(k[d]))&&(-1===f||_<f)&&(f=_)}-1!==(p=-1===f?s.lastIndexOf("@"):s.lastIndexOf("@",f))&&(c=s.slice(0,p),s=s.slice(p+1),this.auth=decodeURIComponent(c)),f=-1;for(d=0;d<B.length;d++){var _;-1!==(_=s.indexOf(B[d]))&&(-1===f||_<f)&&(f=_)}-1===f&&(f=s.length),this.host=s.slice(0,f),s=s.slice(f),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var m=this.hostname.split(/\./),v=(d=0,m.length);d<v;d++){var g=m[d];if(g&&!g.match(j)){for(var b="",x=0,T=g.length;x<T;x++)127<g.charCodeAt(x)?b+="x":b+=g[x];if(!b.match(j)){var E=m.slice(0,d),w=m.slice(d+1),O=g.match(G);O&&(E.push(O[1]),w.unshift(O[2])),w.length&&(s="/"+w.join(".")+s),this.hostname=E.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=N.toASCII(this.hostname));var S=this.port?":"+this.port:"",A=this.hostname||"";this.host=A+S,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!X[u])for(d=0,v=F.length;d<v;d++){var P=F[d];if(-1!==s.indexOf(P)){var C=encodeURIComponent(P);C===P&&(C=escape(P)),s=s.split(P).join(C)}}var M=s.indexOf("#");-1!==M&&(this.hash=s.substr(M),s=s.slice(0,M));var I=s.indexOf("?");if(-1!==I?(this.search=s.substr(I),this.query=s.substr(I+1),e&&(this.query=Y.parse(this.query)),s=s.slice(0,I)):e&&(this.search="",this.query={}),s&&(this.pathname=s),V[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){S=this.pathname||"";var R=this.search||"";this.path=S+R}return this.href=this.format(),this},A.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=!1,o="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&D.isObject(this.query)&&Object.keys(this.query).length&&(o=Y.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||V[e])&&!1!==n?(n="//"+(n||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):n=n||"",r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+n+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+r},A.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},A.prototype.resolveObject=function(t){if(D.isString(t)){var e=new A;e.parse(t,!1,!0),t=e}for(var i=new A,r=Object.keys(this),n=0;n<r.length;n++){var o=r[n];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var h=s[a];"protocol"!==h&&(i[h]=t[h])}return V[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!V[t.protocol]){for(var u=Object.keys(t),l=0;l<u.length;l++){var c=u[l];i[c]=t[c]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||H[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var f=i.pathname||"",d=i.search||"";i.path=f+d}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var _=i.pathname&&"/"===i.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=y||_||i.host&&t.pathname,v=m,g=i.pathname&&i.pathname.split("/")||[],b=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!V[i.protocol]);if(b&&(i.hostname="",i.port=null,i.host&&(""===g[0]?g[0]=i.host:g.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),m=m&&(""===p[0]||""===g[0])),y)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,g=p;else if(p.length)(g=g||[]).pop(),g=g.concat(p),i.search=t.search,i.query=t.query;else if(!D.isNullOrUndefined(t.search)){if(b)i.hostname=i.host=g.shift(),(O=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=O.shift(),i.host=i.hostname=O.shift());return i.search=t.search,i.query=t.query,D.isNull(i.pathname)&&D.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!g.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var x=g.slice(-1)[0],T=(i.host||t.host||1<g.length)&&("."===x||".."===x)||""===x,E=0,w=g.length;0<=w;w--)"."===(x=g[w])?g.splice(w,1):".."===x?(g.splice(w,1),E++):E&&(g.splice(w,1),E--);if(!m&&!v)for(;E--;)g.unshift("..");!m||""===g[0]||g[0]&&"/"===g[0].charAt(0)||g.unshift(""),T&&"/"!==g.join("/").substr(-1)&&g.push("");var O,S=""===g[0]||g[0]&&"/"===g[0].charAt(0);b&&(i.hostname=i.host=S?"":g.length?g.shift():"",(O=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=O.shift(),i.host=i.hostname=O.shift()));return(m=m||i.host&&g.length)&&!S&&g.unshift(""),g.length?i.pathname=g.join("/"):(i.pathname=null,i.path=null),D.isNull(i.pathname)&&D.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},A.prototype.parseHost=function(){var t=this.host,e=r.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.START_ASSETS_LOADING="START_ASSETS_LOADING",n.ASSETS_LOADING_ON_PROGRESS="ASSETS_LOADING_ON_PROGRESS",n.ASSETS_LOADING_COMPLETE="ASSETS_LOADING_COMPLETE",n);function n(){}e.GraphicsEngineNotifications=r;var o=(s.MODEL="GRAPHIC_ENGINE_MODEL",s);function s(){}e.GraphicsEngineNames=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(1),r=(n.createButton=function(t,e){var i=new s.Container,r=new s.Graphics;r.lineStyle(2,11513518),r.beginFill(4878248),r.drawRect(0,0,200,60),r.endFill(),i.addChild(r);var n=new PIXI.TextStyle({fill:["#000000"]}),o=new s.Text(t,n);return o.anchor.set(.5),o.x=i.width/2,o.y=i.height/2,i.addChild(o),i.pivot.x=i.width/2,i.pivot.y=i.height/2,i.interactive=!0,i.buttonMode=!0,i.on("pointerover",function(){i.scale.set(1.05)}),i.on("pointerout",function(){i.scale.set(1)}),i.on("pointerdown",function(){i.scale.set(.95),e()}),i.on("pointerup",function(){i.scale.set(1)}),i},n.createText=function(t,e,i){void 0===i&&(i=new s.Point(0,0));var r=new PIXI.TextStyle({fill:[e]}),n=new s.Text(t,r);return n.position=i,n},n);function n(){}e.UiComponents=r},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s,a,h=o(i(8)),u=i(56),l=i(6),c=i(2),p=(s=l.GameObject,n(f,s),f.prototype.init=function(){this.fsm=new u.FSM},Object.defineProperty(f.prototype,"state",{get:function(){return this.fsm.state},enumerable:!0,configurable:!0}),f.prototype.shoot=function(){var t=this;this.canShoot&&(this.canShoot=!1,this.state.shoot(),this.shootingDelayTween&&this.shootingDelayTween.kill(),this.shootingDelayTween=h.default.delayedCall(this.shootingDelay,function(){t.canShoot=!0}))},f.prototype.move=function(){this.state.move()},f.prototype.handleCollisionWith=function(t){t.type!==c.GameObjectTypes.Player&&t.type!==c.GameObjectTypes.Enemy||this.state.handleCollisionWithOtherUnit(t),t.type===c.GameObjectTypes.Bullet&&this.state.handleCollisionWithBullet(t),t.type===c.GameObjectTypes.Water&&this.state.handleDeath(t),t.type!==c.GameObjectTypes.BrickWall&&t.type!==c.GameObjectTypes.StoneWall||this.state.handleCollisionWithMapItem(t),t.type===c.GameObjectTypes.BonusLife&&this.handleBonusLife(),t.type===c.GameObjectTypes.BonusSlow&&this.handleBonusSpeed(),t.type===c.GameObjectTypes.BonusSpeed&&this.handleBonusSlow(),t.type===c.GameObjectTypes.BonusImmortal&&this.handleBonusImmortal()},f.prototype.handleBonusLife=function(){this.life++,this.onHitOrHeal()},f.prototype.handleBonusSpeed=function(){this.speed>this.minSpeed&&this.speed--},f.prototype.handleBonusSlow=function(){this.speed<this.maxSpeed&&this.speed++},f.prototype.handleBonusImmortal=function(){var t=this;this.isImmortal||(this.isImmortal=!0,this.view.playImmortalAnimation(this.immortalityDuration,function(){t.isImmortal=!1}))},f.prototype.update=function(){this.fsm.step()},f.prototype.setPosition=function(t,e){this.x=t+6,this.y=e+6},f);function f(){var t=null!==s&&s.apply(this,arguments)||this;return t.canShoot=!0,t.maxSpeed=6,t.minSpeed=2,t.immortalityDuration=10,t.life=1,t.isImmortal=!1,t}e.Unit=p,(a=e.UnitStates||(e.UnitStates={}))[a.Spawn=0]="Spawn",a[a.Idle=1]="Idle",a[a.Move=2]="Move",a[a.Die=3]="Die"},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.randomInt=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},n);function n(){}e.Utils=r},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[r.key[o]]=i[o]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(t,e,i){e&&(n[r.q.name][e]=i)}),n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),o=i(10),r=(s.getInstance=function(){return s.instance||(s.instance=new s),s.instance},s.prototype.addNotification=function(t,e){this.notifications[t]||(this.notifications[t]=[]),this.notifications[t].push(e)},s.prototype.sendNotification=function(t,e){this.handleSceneTransitionNotification(t,e),this.handleNotification(t,e)},s.prototype.handleSceneTransitionNotification=function(t,i){var r=this;if(t===o.GlobalNotifications.TRANSITION_TO_SCENE){var n=i.scene?i.scene:i;this.scenes.forEach(function(e){e.controllersNotifications.forEach(function(t){e.sceneNotification===n?(r.controllers[t].execute({name:t,body:i}),r.controllers[t].layerTransitionInStart()):r.controllers[t].layerTransitionOutStart()})})}},s.prototype.handleNotification=function(e,i){this.notifications[e]&&this.notifications[e].forEach(function(t){t.handleNotification({name:e,body:i})})},s.prototype.createController=function(t,e,i){var r=new t;return r.onRegister(),e&&(r.view=new e,(r.view.controller=r).view.onRegister(),i?i.addChild(r.view.display):n.AppManager.getInstance().addLayerToScene(r.view.display),r.view.postRegister()),r.postRegister(),r},s.prototype.registerController=function(t,e,i){var r=this.createController(e,i);(this.controllers[t]=r).addNotification(t,r.execute.bind(r))},s.prototype.registerModel=function(t,e){var i=new e;this.models[t]=i},s.prototype.retrieveModel=function(t){return this.models[t]},s.prototype.registerScene=function(t,e){this.scenes.push({sceneNotification:t,controllersNotifications:e})},s);function s(){if(this.controllers={},this.notifications={},this.models={},this.scenes=[],s.instance)throw new Error("Error - use Mvc.getInstance()")}e.Mvc=r},function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,f="~";function n(){}function a(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,i,r,n){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new a(i,r||t,n),s=f?f+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(f=!1)),s.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(f?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=f?f+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,n=i.length,o=new Array(n);r<n;r++)o[r]=i[r].fn;return o},s.prototype.listenerCount=function(t){var e=f?f+t:t,i=this._events[e];return i?i.fn?1:i.length:0},s.prototype.emit=function(t,e,i,r,n,o){var s=f?f+t:t;if(!this._events[s])return!1;var a,h,u=this._events[s],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,r),!0;case 5:return u.fn.call(u.context,e,i,r,n),!0;case 6:return u.fn.call(u.context,e,i,r,n,o),!0}for(h=1,a=new Array(l-1);h<l;h++)a[h-1]=arguments[h];u.fn.apply(u.context,a)}else{var c,p=u.length;for(h=0;h<p;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),l){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,e);break;case 3:u[h].fn.call(u[h].context,e,i);break;case 4:u[h].fn.call(u[h].context,e,i,r);break;default:if(!a)for(c=1,a=new Array(l-1);c<l;c++)a[c-1]=arguments[c];u[h].fn.apply(u[h].context,a)}}return!0},s.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},s.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},s.prototype.removeListener=function(t,e,i,r){var n=f?f+t:t;if(!this._events[n])return this;if(!e)return u(this,n),this;var o=this._events[n];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||u(this,n);else{for(var s=0,a=[],h=o.length;s<h;s++)(o[s].fn!==e||r&&!o[s].once||i&&o[s].context!==i)&&a.push(o[s]);a.length?this._events[n]=1===a.length?a[0]:a:u(this,n)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=f?f+t:t,this._events[e]&&u(this,e)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=f,s.EventEmitter=s,t.exports=s},function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,n,o,s,a,h,u,l=e&&e.length,c=l?e[0]*i:t.length,p=_(t,0,c,i,!0),f=[];if(!p||p.next===p.prev)return f;if(l&&(p=function(t,e,i,r){var n,o,s,a,h,u=[];for(n=0,o=e.length;n<o;n++)s=e[n]*r,a=n<o-1?e[n+1]*r:t.length,(h=_(t,s,a,r,!1))===h.next&&(h.steiner=!0),u.push(x(h));for(u.sort(v),n=0;n<u.length;n++)g(u[n],i),i=y(i,i.next);return i}(t,e,p,i)),t.length>80*i){r=o=t[0],n=s=t[1];for(var d=i;d<c;d+=i)(a=t[d])<r&&(r=a),(h=t[d+1])<n&&(n=h),o<a&&(o=a),s<h&&(s=h);u=0!==(u=Math.max(o-r,s-n))?1/u:0}return m(p,f,i,r,n,u),f}function _(t,e,i,r,n){var o,s;if(n===0<P(t,e,i,r))for(o=e;o<i;o+=r)s=a(o,t[o],t[o+1],s);else for(o=i-r;e<=o;o-=r)s=a(o,t[o],t[o+1],s);return s&&d(s,s.next)&&(A(s),s=s.next),s}function y(t,e){if(!t)return t;e=e||t;var i,r=t;do{if(i=!1,r.steiner||!d(r,r.next)&&0!==E(r.prev,r,r.next))r=r.next;else{if(A(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function m(t,e,i,r,n,o,s){if(t){!s&&o&&function(t,e,i,r){var n=t;for(;null===n.z&&(n.z=b(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,s,a,h,u=1;do{for(i=t,o=t=null,s=0;i;){for(s++,r=i,e=a=0;e<u&&(a++,r=r.nextZ);e++);for(h=u;0<a||0<h&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(i=(n=i).nextZ,a--):(r=(n=r).nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,u*=2}while(1<s)}(n)}(t,r,n,o);for(var a,h,u=t;t.prev!==t.next;)if(a=t.prev,h=t.next,o?c(t,r,n,o):l(t))e.push(a.i/i),e.push(t.i/i),e.push(h.i/i),A(t),t=h.next,u=h.next;else if((t=h)===u){s?1===s?m(t=p(y(t),e,i),e,i,r,n,o,2):2===s&&f(t,e,i,r,n,o):m(y(t),e,i,r,n,o,1);break}}}function l(t){var e=t.prev,i=t,r=t.next;if(0<=E(e,i,r))return!1;for(var n=t.next.next;n!==t.prev;){if(T(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&0<=E(n.prev,n,n.next))return!1;n=n.next}return!0}function c(t,e,i,r){var n=t.prev,o=t,s=t.next;if(0<=E(n,o,s))return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,h=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,u=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,l=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,c=b(a,h,e,i,r),p=b(u,l,e,i,r),f=t.prevZ,d=t.nextZ;f&&f.z>=c&&d&&d.z<=p;){if(f!==t.prev&&f!==t.next&&T(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;if(f=f.prevZ,d!==t.prev&&d!==t.next&&T(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&0<=E(d.prev,d,d.next))return!1;d=d.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&T(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&0<=E(f.prev,f,f.next))return!1;f=f.prevZ}for(;d&&d.z<=p;){if(d!==t.prev&&d!==t.next&&T(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&0<=E(d.prev,d,d.next))return!1;d=d.nextZ}return!0}function p(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!d(n,o)&&w(n,r,r.next,o)&&O(n,o)&&O(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),A(r),A(r.next),r=t=o),r=r.next}while(r!==t);return y(r)}function f(t,e,i,r,n,o){var s,a,h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&(a=u,(s=h).next.i!==a.i&&s.prev.i!==a.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&w(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(s,a)&&(O(s,a)&&O(a,s)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;for(;i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next,i!==t;);return r}(s,a)&&(E(s.prev,s,a.prev)||E(s,a.prev,a))||d(s,a)&&0<E(s.prev,s,s.next)&&0<E(a.prev,a,a.next)))){var l=S(h,u);return h=y(h,h.next),l=y(l,l.next),m(h,e,i,r,n,o),void m(l,e,i,r,n,o)}u=u.next}h=h.next}while(h!==t)}function v(t,e){return t.x-e.x}function g(t,e){if(e=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&s<a){if((s=a)===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===s)return i;var h,u=i,l=i.x,c=i.y,p=1/0;r=i;for(;n>=r.x&&r.x>=l&&n!==r.x&&T(o<c?n:s,o,l,c,o<c?s:n,o,r.x,r.y)&&(h=Math.abs(o-r.y)/(n-r.x),O(r,t)&&(h<p||h===p&&(r.x>i.x||r.x===i.x&&(d=r,E((f=i).prev,f,d.prev)<0&&E(d.next,f,f.next)<0)))&&(i=r,p=h)),r=r.next,r!==u;);var f,d;return i}(t,e)){var i=S(e,t);y(i,i.next)}}function b(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function x(t){for(var e=t,i=t;(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),(e=e.next)!==t;);return i}function T(t,e,i,r,n,o,s,a){return 0<=(n-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(r-a)-(i-s)*(e-a)&&0<=(i-s)*(o-a)-(n-s)*(r-a)}function E(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function d(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,i,r){var n=u(E(t,e,i)),o=u(E(t,e,r)),s=u(E(i,r,t)),a=u(E(i,r,e));return n!==o&&s!==a||(!(0!==n||!h(t,i,e))||(!(0!==o||!h(t,r,e))||(!(0!==s||!h(i,t,r))||!(0!==a||!h(i,e,r)))))}function h(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function u(t){return 0<t?1:t<0?-1:0}function O(t,e){return E(t.prev,t,t.next)<0?0<=E(t,e,t.next)&&0<=E(t,t.prev,e):E(t,e,t.prev)<0||E(t,t.next,e)<0}function S(t,e){var i=new s(t.i,t.x,t.y),r=new s(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(i.next=n).prev=i,(r.next=i).prev=r,(o.next=r).prev=o,r}function a(t,e,i,r){var n=new s(t,e,i);return r?(n.next=r.next,(n.prev=r).next.prev=n,r.next=n):(n.prev=n).next=n,n}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function s(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}t.exports=r,(t.exports.default=r).deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,s=Math.abs(P(t,0,o,i));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*i,l=a<h-1?e[a+1]*i:t.length;s-=Math.abs(P(t,u,l,i))}var c=0;for(a=0;a<r.length;a+=3){var p=r[a]*i,f=r[a+1]*i,d=r[a+2]*i;c+=Math.abs((t[p]-t[d])*(t[1+f]-t[1+p])-(t[p]-t[f])*(t[1+d]-t[1+p]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[n][o][s]);0<n&&(r+=t[n-1].length,i.holes.push(r))}return i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.SCENE="MENU_SCENE",n.MAIN="MENU_MAIN",n.BUTTONS="MENU_BUTTONS",n);function n(){}e.MenuNotifications=r},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(14),a=(o=s.UnitState,n(h,o),h.prototype.enter=function(){o.prototype.enter.call(this),this.view.playIdleAnimation()},h.prototype.handleCollisionWithMapItem=function(){},h.prototype.handleCollisionWithOtherUnit=function(){},h.prototype.stop=function(){},h);function h(){return null!==o&&o.apply(this,arguments)||this}e.UnitIdleState=a},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(14),a=(o=s.UnitState,n(h,o),h.prototype.enter=function(){var t=this;o.prototype.enter.call(this),this.unit.canCollide=!1,this.view.playDeathAnimation(function(){t.unit.destroy()})},h.prototype.shoot=function(){},h.prototype.handleCollisionWithOtherUnit=function(){},h.prototype.handleCollisionWithBullet=function(){},h.prototype.stop=function(){},h.prototype.move=function(t){},h);function h(){return null!==o&&o.apply(this,arguments)||this}e.UnitDieState=a},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(14),a=(o=s.UnitState,n(h,o),h.prototype.enter=function(){o.prototype.enter.call(this),this.view.playTurnAnimation()},h.prototype.move=function(t){this.view.playTurnAnimation(t),this.view.move()},h.prototype.handleCollisionWithMapItem=function(){this.handleCollision()},h.prototype.handleCollisionWithOtherUnit=function(){this.collisionsWithOtherUnit++,this.collisionsWithOtherUnit>this.collisionsToStopIgnoreBounce&&(this.collisionsWithOtherUnit=0),this.collisionsWithOtherUnit<this.collisionsToStartIgnoreBounce&&this.handleCollision()},h.prototype.handleCollision=function(){this.view.playBounceBack(),this.stop()},h);function h(){var t=null!==o&&o.apply(this,arguments)||this;return t.collisionsWithOtherUnit=0,t.collisionsToStartIgnoreBounce=3,t.collisionsToStopIgnoreBounce=60,t}e.UnitMoveState=a},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(14),a=(o=s.UnitState,n(h,o),h.prototype.enter=function(){var t=this;o.prototype.enter.call(this),this.unit.canCollide=!1,this.view.playSpawnAnimation(function(){t.stop()})},h.prototype.shoot=function(){},h.prototype.handle=function(){},h.prototype.handleCollisionWithBullet=function(){},h.prototype.move=function(t){},h);function h(){return null!==o&&o.apply(this,arguments)||this}e.UnitSpawnState=a},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(i(8)),h=i(19),u=i(5),l=i(6),c=i(2),p=i(30),f=(s=p.GameObjectView,n(d,s),d.prototype.init=function(t){s.prototype.init.call(this,t),this.unit=t,this.initSkin(),this.initExplosionAnimation(),this.initSpawnAnimation(),this.playTurnAnimation(l.MoveDirections.Up)},d.prototype.initSkin=function(){var t="tank";this.unit.type===c.GameObjectTypes.Enemy&&(t="enemy"+h.Utils.randomInt(1,3)),this.skin=new PIXI.Sprite(this.getTexture(u.Config.assets[t])),this.skin.anchor.set(.5),this.skin.position=this.center,this.skin.visible=!1,this.display.addChild(this.skin)},d.prototype.initExplosionAnimation=function(){this.explosion=new PIXI.AnimatedSprite(this.getSpriteTextures(u.Config.assets.explode,16,68,68)),this.explosion.anchor.set(.5),this.explosion.position=this.center,this.explosion.loop=!1,this.explosion.visible=!1,this.display.addChild(this.explosion)},d.prototype.initSpawnAnimation=function(){this.spawn=new PIXI.AnimatedSprite(this.getSpriteTextures(u.Config.assets.appear,10,68,68)),this.spawn.anchor.set(.5),this.spawn.position=this.center,this.spawn.loop=!1,this.spawn.visible=!1,this.display.addChild(this.spawn)},d.prototype.getBulletParams=function(){var t=this.x+this.center.x,e=this.y+this.center.y;return this.moveDirection===l.MoveDirections.Up&&(e=this.y),this.moveDirection===l.MoveDirections.Down&&(e=this.y+25),this.moveDirection===l.MoveDirections.Left&&(t=this.x),this.moveDirection===l.MoveDirections.Right&&(t=this.x+25),{owner:this.unit,x:t,y:e,moveDirection:this.moveDirection}},d.prototype.playTurnAnimation=function(t){var e;t&&t!==this.moveDirection&&(this.moveDirection=t),this.moveDirection===l.MoveDirections.Up&&(270===this.skin.angle&&(this.skin.angle=-90),e=0),this.moveDirection===l.MoveDirections.Down&&(e=180),this.moveDirection===l.MoveDirections.Left&&(0===this.skin.angle&&(this.skin.angle=360),e=270),this.moveDirection===l.MoveDirections.Right&&(e=90),a.default.to(this.skin,{angle:e,duration:.1})},d.prototype.playIdleAnimation=function(){a.default.to(this.skin.scale,{duration:.1,x:1,y:1})},d.prototype.playMoveAnimation=function(){a.default.to(this.skin.scale,{duration:.1,x:.95,y:.95})},d.prototype.move=function(t){void 0===t&&(t=0),this.playMoveAnimation(),this.moveDirection===l.MoveDirections.Up&&(this.display.y-=this.unit.speed+t),this.moveDirection===l.MoveDirections.Down&&(this.display.y+=this.unit.speed+t),this.moveDirection===l.MoveDirections.Left&&(this.display.x-=this.unit.speed+t),this.moveDirection===l.MoveDirections.Right&&(this.display.x+=this.unit.speed+t)},d.prototype.changeMoveDirectionToOpposite=function(){this.moveDirection=-1*this.moveDirection},d.prototype.playBounceBack=function(){this.changeMoveDirectionToOpposite(),this.move(2),this.changeMoveDirectionToOpposite()},d.prototype.playDeathAnimation=function(t){this.playSound(u.Config.assets.soundExplode),a.default.to(this.skin,{duration:.3,alpha:0}),this.explosion.visible=!0,this.explosion.play(),this.explosion.onComplete=function(){return t()}},d.prototype.playSpawnAnimation=function(t){var e=this;this.spawn.visible=!0,this.spawn.play(),this.spawn.onComplete=function(){e.spawn.visible=!1,e.skin.visible=!0,t()}},d.prototype.playImmortalAnimation=function(t,e){var i=t/.2;a.default.fromTo(this.skin,{alpha:.6},{alpha:1,duration:.2,yoyo:!0,repeat:i,onComplete:function(){return e()}})},d);function d(){var t=null!==s&&s.apply(this,arguments)||this;return t.size={width:20,height:20},t}e.UnitView=f},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(1),a=i(13),h=(o=a.MVCEntity,n(u,o),u.prototype.init=function(t){this.owner=t},u.prototype.destroy=function(){this.display.destroy({children:!0})},Object.defineProperty(u.prototype,"x",{get:function(){return this.display.x},set:function(t){this.display&&(this.display.x=t)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"y",{get:function(){return this.display.y},set:function(t){this.display.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"center",{get:function(){return new s.Point(this.size.width/2,this.size.height/2)},enumerable:!0,configurable:!0}),u);function u(){var t=null!==o&&o.apply(this,arguments)||this;return t.display=new s.Container,t.speed=0,t}e.GameObjectView=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.SCENE="GAMEOVER_SCENE",n.MAIN="GAMEOVER_MAIN",n);function n(){}e.GameOverNotifications=r},function(t,e,i){t.exports=i(33)},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(34),a=i(45),h=i(48),u=i(51),l=i(69),c=(o=a.EntryPoint,n(p,o),p);function p(){var t=o.call(this)||this;return new s.PreloaderModule,new h.MenuModule,new u.GameModule,new l.GameOverModule,t}e.GameEntryPoint=c,window.onload=function(){new c}},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(9),a=i(42),h=i(43),u=i(44),l=(o=s.Module,n(c,o),c.prototype.registerControllers=function(){this.addController(a.PreloaderNotifications.MAIN,h.PreloaderMainController,u.PreloaderMainView)},c.prototype.registerScenes=function(){this.addScene(a.PreloaderNotifications.MAIN,[a.PreloaderNotifications.MAIN])},c);function c(){return null!==o&&o.apply(this,arguments)||this}e.PreloaderModule=l},function(t,y,I){(function(f,d){var _;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(){y&&y.nodeType,f&&f.nodeType;var t="object"==typeof d&&d;t.global!==t&&t.window!==t&&t.self;var e,m=2147483647,v=36,g=1,b=26,n=38,o=700,x=72,T=128,E="-",i=/^xn--/,r=/[^\x20-\x7E]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,a={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=v-g,w=Math.floor,O=String.fromCharCode;function S(t){throw new RangeError(a[t])}function u(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function l(t,e){var i=t.split("@"),r="";return 1<i.length&&(r=i[0]+"@",t=i[1]),r+u((t=t.replace(s,".")).split("."),e).join(".")}function A(t){for(var e,i,r=[],n=0,o=t.length;n<o;)55296<=(e=t.charCodeAt(n++))&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function P(t){return u(t,function(t){var e="";return 65535<t&&(e+=O((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=O(t)}).join("")}function C(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function M(t,e,i){var r=0;for(t=i?w(t/o):t>>1,t+=w(t/e);h*b>>1<t;r+=v)t=w(t/h);return w(r+(h+1)*t/(t+n))}function c(t){var e,i,r,n,o,s,a,h,u,l,c,p=[],f=t.length,d=0,_=T,y=x;for((i=t.lastIndexOf(E))<0&&(i=0),r=0;r<i;++r)128<=t.charCodeAt(r)&&S("not-basic"),p.push(t.charCodeAt(r));for(n=0<i?i+1:0;n<f;){for(o=d,s=1,a=v;f<=n&&S("invalid-input"),c=t.charCodeAt(n++),(v<=(h=c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:v)||h>w((m-d)/s))&&S("overflow"),d+=h*s,!(h<(u=a<=y?g:y+b<=a?b:a-y));a+=v)s>w(m/(l=v-u))&&S("overflow"),s*=l;y=M(d-o,e=p.length+1,0==o),w(d/e)>m-_&&S("overflow"),_+=w(d/e),d%=e,p.splice(d++,0,_)}return P(p)}function p(t){var e,i,r,n,o,s,a,h,u,l,c,p,f,d,_,y=[];for(p=(t=A(t)).length,e=T,o=x,s=i=0;s<p;++s)(c=t[s])<128&&y.push(O(c));for(r=n=y.length,n&&y.push(E);r<p;){for(a=m,s=0;s<p;++s)e<=(c=t[s])&&c<a&&(a=c);for(a-e>w((m-i)/(f=r+1))&&S("overflow"),i+=(a-e)*f,e=a,s=0;s<p;++s)if((c=t[s])<e&&++i>m&&S("overflow"),c==e){for(h=i,u=v;!(h<(l=u<=o?g:o+b<=u?b:u-o));u+=v)_=h-l,d=v-l,y.push(O(C(l+_%d,0))),h=w(_/d);y.push(O(C(h,0))),o=M(i,f,r==n),i=0,++r}++i,++e}return y.join("")}e={version:"1.4.1",ucs2:{decode:A,encode:P},decode:c,encode:p,toASCII:function(t){return l(t,function(t){return r.test(t)?"xn--"+p(t):t})},toUnicode:function(t){return l(t,function(t){return i.test(t)?c(t.slice(4).toLowerCase()):t})}},void 0===(_=function(){return e}.call(y,I,y,f))||(f.exports=_)}()}).call(this,I(36)(t),I(37))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(40),e.encode=e.stringify=i(41)},function(t,e,i){"use strict";t.exports=function(t,e,i,r){e=e||"&",i=i||"=";var n={};if("string"!=typeof t||0===t.length)return n;var o=/\+/g;t=t.split(e);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var a,h,u=t.length;0<s&&s<u&&(u=s);for(var l=0;l<u;++l){var c,p,f,d,_=t[l].replace(o,"%20"),y=_.indexOf(i);p=0<=y?(c=_.substr(0,y),_.substr(y+1)):(c=_,""),f=decodeURIComponent(c),d=decodeURIComponent(p),a=n,h=f,Object.prototype.hasOwnProperty.call(a,h)?m(n[f])?n[f].push(d):n[f]=[n[f],d]:n[f]=d}return n};var m=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";function o(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}t.exports=function(i,r,n,t){return r=r||"&",n=n||"=",null===i&&(i=void 0),"object"==typeof i?a(h(i),function(t){var e=encodeURIComponent(o(t))+n;return s(i[t])?a(i[t],function(t){return e+encodeURIComponent(o(t))}).join(r):e+encodeURIComponent(o(i[t]))}).join(r):t?encodeURIComponent(o(t))+n+encodeURIComponent(o(i)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function a(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r++)i.push(e(t[r],r));return i}var h=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.MAIN="PRELOADER_MAIN",n);function n(){}e.PreloaderNotifications=r},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(8),a=i(10),h=i(7),u=i(16),l=i(24),c=i(5),p=(o=h.Controller,n(f,o),f.prototype.addNotifications=function(){this.addNotification(u.GraphicsEngineNotifications.ASSETS_LOADING_COMPLETE,this.onAssetsLoadingComplete.bind(this)),this.addNotification(u.GraphicsEngineNotifications.ASSETS_LOADING_ON_PROGRESS,this.onAssetsLoadingProgress.bind(this))},f.prototype.postRegister=function(){this.startAssetsLoading()},f.prototype.startAssetsLoading=function(){var t=c.Config.assets;this.loadingInitialAssets&&(t=c.Config.preloaderAassets),this.sendNotification(u.GraphicsEngineNotifications.START_ASSETS_LOADING,t)},f.prototype.onAssetsLoadingComplete=function(t){var e=this;if(this.loadingInitialAssets)return this.loadingInitialAssets=!1,this.view.drawScene(),void this.startAssetsLoading();s.gsap.delayedCall(1,function(){e.sendNotification(a.GlobalNotifications.TRANSITION_TO_SCENE,l.MenuNotifications.SCENE)})},f.prototype.onAssetsLoadingProgress=function(t){this.loadingInitialAssets||this.view.updateProgressBar(t.body)},f);function f(){var t=null!==o&&o.apply(this,arguments)||this;return t.loadingInitialAssets=!0,t}e.PreloaderMainController=p},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(11),a=i(1),h=i(5),u=i(8),l=(o=s.View,n(c,o),c.prototype.drawScene=function(){this.display.visible=!0,this.drawBg(),this.drawTitle(),this.drawProgressBar()},c.prototype.drawTitle=function(){var t=new PIXI.TextStyle({fill:["#ffffff","#afaeae"]}),e=new a.Text("LOADING...",t);e.anchor.set(.5),e.x=this.getSceneWidth()/2,e.y=this.getSceneHeight()/2,this.display.addChild(e)},c.prototype.drawBg=function(){var t=new a.Graphics;t.beginFill(793651),t.drawRect(0,0,this.getSceneWidth(),this.getSceneHeight()),t.endFill(),this.display.addChild(t)},c.prototype.drawProgressBar=function(){var t=new a.Container,e=new a.Sprite(this.getTexture(h.Config.preloaderAassets.loaderBg));this.bar=new a.Sprite(this.getTexture(h.Config.preloaderAassets.loaderBar)),this.bar.x=this.bar.y=5,this.bar.width,t.addChild(e,this.bar),t.pivot.x=t.width/2,t.x=this.getSceneWidth()/2,t.y=this.getSceneHeight()/2+50,this.display.addChild(t)},c.prototype.updateProgressBar=function(t){u.gsap.to(this.bar.scale,{duration:1,x:t/100}),console.log(t)},c);function c(){return null!==o&&o.apply(this,arguments)||this}e.PreloaderMainView=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(){new n.GraphicsEngineModule}var n=i(46);e.EntryPoint=r},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(9),a=i(47),h=i(16),u=(o=s.Module,n(l,o),l.prototype.registerControllers=function(){this.addController(h.GraphicsEngineNotifications.START_ASSETS_LOADING,a.GraphicsEngineLoaderController)},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.GraphicsEngineModule=u},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(0),a=i(7),h=i(16),u=(o=a.Controller,n(l,o),l.prototype.execute=function(t){s.AppManager.getInstance().startAssetsLoading(t.body,this.onAssetsLoadingComplete.bind(this),this.onAssetsLoadingProgress.bind(this))},l.prototype.onAssetsLoadingComplete=function(){this.sendNotification(h.GraphicsEngineNotifications.ASSETS_LOADING_COMPLETE)},l.prototype.onAssetsLoadingProgress=function(t){this.sendNotification(h.GraphicsEngineNotifications.ASSETS_LOADING_ON_PROGRESS,t)},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.GraphicsEngineLoaderController=u},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(9),a=i(49),h=i(24),u=i(50),l=(o=s.Module,n(c,o),c.prototype.registerControllers=function(){this.addController(h.MenuNotifications.MAIN,a.MenuMainController,u.MenuMainView)},c.prototype.registerScenes=function(){this.addScene(h.MenuNotifications.SCENE,[h.MenuNotifications.MAIN])},c);function c(){return null!==o&&o.apply(this,arguments)||this}e.MenuModule=l},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(10),a=i(7),h=i(12),u=(o=a.Controller,n(l,o),l.prototype.execute=function(t){this.drawScene(),this.drawMenu()},l.prototype.drawScene=function(){this.view.drawScene()},l.prototype.drawMenu=function(){var t=this;this.view.drawMenuButtons(function(){t.sendNotification(s.GlobalNotifications.TRANSITION_TO_SCENE,h.GameNotifications.SCENE)})},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.MenuMainController=u},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(11),a=i(1),h=i(17),u=(o=s.View,n(l,o),l.prototype.drawMenuButtons=function(t){var e=h.UiComponents.createButton("PLAY",function(){t()});e.x=this.getSceneWidth()/2,e.y=400,this.display.addChild(e)},l.prototype.drawScene=function(){this.drawBg(),this.drawTitle()},l.prototype.drawBg=function(){var t=new a.Graphics;t.beginFill(793651),t.drawRect(0,0,this.getSceneWidth(),this.getSceneHeight()),t.endFill(),this.display.addChild(t)},l.prototype.drawTitle=function(){var t=new PIXI.TextStyle({fontSize:100,fontWeight:"bold",fill:["#ffffff","#afaeae"]}),e=new a.Text("TANKS",t);e.anchor.set(.5),e.x=this.getSceneWidth()/2,e.y=250,this.display.addChild(e)},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.MenuMainView=u},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(9),a=i(52),h=i(12),u=i(64),l=i(65),c=i(66),p=i(67),f=(o=s.Module,n(d,o),d.prototype.registerControllers=function(){this.addController(h.GameNotifications.MAIN,a.GameMainController,u.GameMainView),this.addController(h.GameNotifications.UI,l.GameUiController,c.GameUiView)},d.prototype.registerModels=function(){this.addModel(h.GameModels.GAME,p.GameModel)},d.prototype.registerScenes=function(){this.addScene(h.GameNotifications.SCENE,[h.GameNotifications.MAIN,h.GameNotifications.UI])},d);function d(){return null!==o&&o.apply(this,arguments)||this}e.GameModule=f},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s,a=i(7),h=i(12),u=i(2),l=i(53),c=i(59),p=i(10),f=i(31),d=o(i(8)),_=i(62),y=(s=a.Controller,n(m,s),m.prototype.postRegister=function(){this.gameModel=this.retrieveModel(h.GameModels.GAME)},m.prototype.execute=function(t){var e=this;this.gameModel.init(),this.view.initScene(),this.initMap(),this.initUnits(),this.initBullets(),d.default.delayedCall(1,function(){e.getTicker().add(e.update,e)})},m.prototype.initUnits=function(){var e=this;this.unitsFactory=new l.UnitsFactory,this.unitsFactory.onCreateBullet=function(t){e.bulletsFactory.createBullet(t)},this.unitsFactory.onUnitCreate=function(t){e.addToView(t),e.gameModel.addUnit(t)},this.unitsFactory.onUnitDestroy=function(t){e.gameModel.removeUnit(t),t.type===u.GameObjectTypes.Player&&e.gameOver()},this.unitsFactory.onUnitHitOrHeal=function(t){t.type===u.GameObjectTypes.Player&&e.sendNotification(h.GameNotifications.UI_UPDATE)},this.unitsFactory.getSpawnPoint=function(t){return e.gameModel.getSpawnPoint(t)},this.unitsFactory.createPlayer()},m.prototype.spawnNewEnemy=function(){var t=this;0!==this.gameModel.enemiesToSpawn&&this.shouldSpawnEnemy&&(this.shouldSpawnEnemy=!1,d.default.delayedCall(this.enemySpawnDelay,function(){t.shouldSpawnEnemy=!0}),this.unitsFactory.createEnemy(),this.sendNotification(h.GameNotifications.UI_UPDATE))},m.prototype.addNewBonus=function(){var t=this;this.shouldAddBonus&&(this.shouldAddBonus=!1,d.default.delayedCall(this.addBonusDelay,function(){t.shouldAddBonus=!0}),this.mapFactory.addRandomBonus())},m.prototype.initMap=function(){var e=this;this.mapFactory=new _.MapFactory,this.mapFactory.onMapItemCreate=function(t){t.type===u.GameObjectTypes.Tree?e.addToView(t,!0):e.addToView(t),e.gameModel.addMapItem(t)},this.mapFactory.onMapItemDestroy=function(t){t.type===u.GameObjectTypes.Eagle&&e.gameOver(),e.gameModel.removeMapItem(t)},this.mapFactory.createMapItems()},m.prototype.initBullets=function(){var e=this;this.bulletsFactory=new c.BulletsFactory,this.bulletsFactory.onBulletCreate=function(t){e.addToView(t),e.gameModel.addBullet(t)},this.bulletsFactory.onBulletDestroy=function(t){e.gameModel.removeBullet(t)}},m.prototype.gameOver=function(t){var e=this;void 0===t&&(t=!1),this.getTicker().remove(this.update,this),d.default.delayedCall(1,function(){e.sendNotification(p.GlobalNotifications.TRANSITION_TO_SCENE,{scene:f.GameOverNotifications.SCENE,isWin:t})})},m.prototype.update=function(){this.gameModel.update(),this.spawnNewEnemy(),this.addNewBonus(),this.gameModel.allEnemiesKilled()&&this.gameOver(!0)},m.prototype.addToView=function(t,e){void 0===e&&(e=!1),t.addToStage(this.view.getDisplay(e))},m);function m(){var t=null!==s&&s.apply(this,arguments)||this;return t.enemySpawnDelay=4,t.shouldSpawnEnemy=!0,t.addBonusDelay=3,t.shouldAddBonus=!0,t}e.GameMainController=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(54),n=i(57),o=i(2),s=(a.prototype.createPlayer=function(){var t=new r.Player;t.init();var e=this.getSpawnPoint(o.GameObjectTypes.PlayerSpawnPoint);t.setPosition(e.x,e.y),this.onUnitCreate(this.finishUnitCreation(t))},a.prototype.createEnemy=function(){var t=new n.Enemy;t.init();var e=this.getSpawnPoint(o.GameObjectTypes.EnemySpawnPoint);t.setPosition(e.x,e.y),this.onUnitCreate(this.finishUnitCreation(t))},a.prototype.finishUnitCreation=function(t){var e=this;return t.onShoot=function(t){return e.onCreateBullet(t)},t.onDestroy=function(){return e.onUnitDestroy(t)},t.onHitOrHeal=function(){return e.onUnitHitOrHeal(t)},t},a);function a(){}e.UnitsFactory=s},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(25),a=i(26),h=i(27),u=i(28),l=i(29),c=i(2),p=i(18),f=i(6),d=(o=p.Unit,n(_,o),_.prototype.init=function(){var t;o.prototype.init.call(this),this.type=c.GameObjectTypes.Player,this.shootingDelay=.5,this.speed=2,this.initView(l.UnitView,this),this.fsm.registerStates(((t={})[p.UnitStates.Spawn]=new u.UnitSpawnState(this),t[p.UnitStates.Idle]=new s.UnitIdleState(this),t[p.UnitStates.Move]=new h.UnitMoveState(this),t[p.UnitStates.Die]=new a.UnitDieState(this),t))},_.prototype.handleInput=function(){var t=this.getInput();t.Space?this.shoot():this.canShoot=!0,t.ArrowUp||t.ArrowDown||t.ArrowLeft||t.ArrowRight||this.state.stop(),t.ArrowUp?this.state.move(f.MoveDirections.Up):t.ArrowDown?this.state.move(f.MoveDirections.Down):t.ArrowLeft?this.state.move(f.MoveDirections.Left):t.ArrowRight&&this.state.move(f.MoveDirections.Right)},_.prototype.update=function(){o.prototype.update.call(this),this.handleInput()},_);function _(){return null!==o&&o.apply(this,arguments)||this}e.Player=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.prototype.enter=function(){},n.prototype.execute=function(){},n);function n(t){}e.State=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.prototype.registerStates=function(t){this.states=t;var e=Number(Object.keys(this.states)[0]);this.transition(e)},n.prototype.step=function(){this.states[this.currentStateId].execute()},n.prototype.transition=function(t){this.currentStateId=t,this.states[this.currentStateId].enter()},Object.defineProperty(n.prototype,"state",{get:function(){return this.states[this.currentStateId]},enumerable:!0,configurable:!0}),n);function n(){this.currentStateId=null}e.FSM=r},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(18),a=i(58),h=i(26),u=i(25),l=i(28),c=i(29),p=i(2),f=(o=s.Unit,n(d,o),d.prototype.init=function(){var t;o.prototype.init.call(this),this.type=p.GameObjectTypes.Enemy,this.shootingDelay=2,this.speed=2,this.initView(c.UnitView,this),this.fsm.registerStates(((t={})[s.UnitStates.Spawn]=new l.UnitSpawnState(this),t[s.UnitStates.Idle]=new u.UnitIdleState(this),t[s.UnitStates.Move]=new a.EnemyMoveState(this),t[s.UnitStates.Die]=new h.UnitDieState(this),t))},d.prototype.update=function(){o.prototype.update.call(this),this.shoot(),this.move()},d);function d(){return null!==o&&o.apply(this,arguments)||this}e.Enemy=f},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var s,a=i(6),h=i(27),u=(s=h.UnitMoveState,n(l,s),l.prototype.handleCollision=function(){this.updateHitsByDirection(),s.prototype.handleCollision.call(this),this.changeDirectionToOpposite()},l.prototype.updateHitsByDirection=function(){var e=this;this.hitsByDirection.map(function(t){return t.direction===e.view.moveDirection&&t.hits++,t})},l.prototype.changeDirectionToOpposite=function(){this.hitsByDirection.sort(function(t,e){return t.hits-e.hits}),this.hitsByDirection[this.hitsByDirection.length-1].hits>this.maxHitsBeforeChangeDirection?(this.view.moveDirection=this.hitsByDirection[0].direction,this.hitsByDirection=this.hitsByDirection.map(function(t){return o(o({},t),{hits:0})})):this.view.changeMoveDirectionToOpposite(),this.view.playTurnAnimation()},l);function l(){var t=null!==s&&s.apply(this,arguments)||this;return t.hitsByDirection=[{direction:a.MoveDirections.Up,hits:0},{direction:a.MoveDirections.Down,hits:0},{direction:a.MoveDirections.Left,hits:0},{direction:a.MoveDirections.Right,hits:0}],t.maxHitsBeforeChangeDirection=2,t}e.EnemyMoveState=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(60),n=(o.prototype.createBullet=function(t){var e=this,i=new r.Bullet;i.init(t),i.onDestroy=function(){return e.onBulletDestroy(i)},this.onBulletCreate(i)},o);function o(){}e.BulletsFactory=n},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(2),a=i(6),h=i(61),u=(o=a.GameObject,n(l,o),l.prototype.init=function(t){o.prototype.init.call(this),this.type=s.GameObjectTypes.Bullet,this.owner=t.owner,this.initView(h.BulletView,this),this.view.createBullet(t)},l.prototype.destroy=function(){var t=this;this.canCollide=!1,this.view.playExplosionAnimation(function(){o.prototype.destroy.call(t)})},l.prototype.handleCollisionWith=function(t){t.type!==s.GameObjectTypes.BrickWall&&t.type!==s.GameObjectTypes.StoneWall&&t.type!==s.GameObjectTypes.Eagle||this.destroy(),t.type===s.GameObjectTypes.Bullet&&this.destroy()},l.prototype.update=function(){this.isDestroyed||this.view.update()},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.Bullet=u},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(1),a=i(5),h=i(6),u=i(30),l=(o=u.GameObjectView,n(c,o),c.prototype.init=function(t){o.prototype.init.call(this,t)},c.prototype.createBullet=function(t){var e=a.Config.assets.bullet;this.skin=new s.Sprite(this.getTexture(e)),this.skin.anchor.set(.5),this.skin.scale.set(.5),this.display.addChild(this.skin),this.display.x=t.x,this.display.y=t.y,this.moveDirection=t.moveDirection,this.initExplosionAnimation()},c.prototype.playExplosionAnimation=function(t){this.playSound(a.Config.assets.soundHit),this.skin.visible=!1,this.speed=0,this.explosion.x=this.skin.x,this.explosion.y=this.skin.y,this.explosion.visible=!0,this.explosion.play(),this.explosion.onComplete=function(){t()}},c.prototype.initExplosionAnimation=function(){this.explosion=new PIXI.AnimatedSprite(this.getSpriteTextures(a.Config.assets.explode,16,68,68)),this.explosion.anchor.set(.5),this.explosion.scale.set(.5),this.explosion.loop=!1,this.explosion.visible=!1,this.display.addChild(this.explosion)},c.prototype.move=function(){this.moveDirection===h.MoveDirections.Up&&(this.y-=this.speed),this.moveDirection===h.MoveDirections.Down&&(this.y+=this.speed),this.moveDirection===h.MoveDirections.Left&&(this.x-=this.speed),this.moveDirection===h.MoveDirections.Right&&(this.x+=this.speed)},c.prototype.update=function(){this.move()},c);function c(){var t=null!==o&&o.apply(this,arguments)||this;return t.speed=8,t.size={width:5,height:5},t}e.BulletView=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(19),s=i(2),a=i(63),n=i(5),h=i(73),u=i(74),o=(l.prototype.createMapItems=function(){for(var t=0;t<this.mapWidth*this.mapHeight;t++)if(void 0!==n.Config.level[t]){var e=void 0;1===n.Config.level[t]&&(e=s.GameObjectTypes.StoneWall),2===n.Config.level[t]&&(e=s.GameObjectTypes.BrickWall),3===n.Config.level[t]&&(e=s.GameObjectTypes.Tree),4===n.Config.level[t]&&(e=s.GameObjectTypes.Water),7===n.Config.level[t]&&(e=s.GameObjectTypes.Eagle),8===n.Config.level[t]&&(e=s.GameObjectTypes.PlayerSpawnPoint),9===n.Config.level[t]&&(e=s.GameObjectTypes.EnemySpawnPoint),this.createMapItem(e,t)}},l.prototype.createMapItem=function(t,e){var i,r=this,n=Math.floor(e/this.mapWidth),o=e-this.mapWidth*n;t!==s.GameObjectTypes.StoneWall&&t!==s.GameObjectTypes.BrickWall&&t!==s.GameObjectTypes.Tree&&t!==s.GameObjectTypes.Water&&t!==s.GameObjectTypes.PlayerSpawnPoint&&t!==s.GameObjectTypes.EnemySpawnPoint||(i=new a.MapItem(t,o,n)),t!==s.GameObjectTypes.BonusImmortal&&t!==s.GameObjectTypes.BonusLife&&t!==s.GameObjectTypes.BonusSlow&&t!==s.GameObjectTypes.BonusSpeed||(i=new u.BonusMapItem(t,o,n)),t===s.GameObjectTypes.Eagle&&(i=new h.EagleMapItem(t,o,n)),i.onDestroy=function(){return r.onMapItemDestroy(i)},this.onMapItemCreate(i)},l.prototype.getRandomBonusType=function(){var t=r.Utils.randomInt(0,3);return 0===t?s.GameObjectTypes.BonusSlow:1===t?s.GameObjectTypes.BonusSpeed:2===t?s.GameObjectTypes.BonusLife:3===t?s.GameObjectTypes.BonusImmortal:void 0},l.prototype.addRandomBonus=function(){for(var t=[],e=0;e<this.mapWidth*this.mapHeight;e++)void 0===n.Config.level[e]&&t.push(e);var i=t[r.Utils.randomInt(0,t.length-1)];this.createMapItem(this.getRandomBonusType(),i)},l);function l(){this.mapWidth=24,this.mapHeight=22}e.MapFactory=o},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(1),a=i(5),h=i(6),u=i(2),l=(o=h.GameObject,n(c,o),c.prototype.initSkin=function(t){this.skin=new s.Sprite(this.getTexture(a.Config.assets[t])),this.skin.width=this.size.width,this.skin.height=this.size.height,this.display.addChildAt(this.skin,0)},c.prototype.checkCollisionWith=function(t){t.type!==u.GameObjectTypes.Bullet&&t.type!==u.GameObjectTypes.Player&&t.type!==u.GameObjectTypes.Enemy||o.prototype.checkCollisionWith.call(this,t)},c.prototype.handleCollisionWith=function(t){this.type===u.GameObjectTypes.BrickWall&&t.type===u.GameObjectTypes.Bullet&&this.destroy()},c.prototype.destroy=function(){o.prototype.destroy.call(this),this.display.destroy({children:!0})},c.prototype.addToStage=function(t){t.addChild(this.display)},Object.defineProperty(c.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"x",{get:function(){return this.display.x},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"y",{get:function(){return this.display.y},enumerable:!0,configurable:!0}),c);function c(t,e,i){var r=o.call(this)||this;return r.display=new s.Container,r._size={width:32,height:32},r.type=t,r.display.x=e*r.size.width,r.display.y=i*r.size.height,t===u.GameObjectTypes.EnemySpawnPoint||t===u.GameObjectTypes.PlayerSpawnPoint||(t===u.GameObjectTypes.BrickWall&&r.initSkin("brickWall"),t===u.GameObjectTypes.StoneWall&&r.initSkin("stoneWall"),t===u.GameObjectTypes.Tree&&r.initSkin("tree"),t===u.GameObjectTypes.Water&&r.initSkin("water")),r}e.MapItem=l},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(11),a=i(1),h=(o=s.View,n(u,o),u.prototype.initScene=function(){this.frontDisplay=new a.Container,this.backDisplay=new a.Container,this.display.addChild(this.backDisplay),this.display.addChild(this.frontDisplay),this.drawBg()},u.prototype.drawBg=function(){var t=new a.Graphics;t.name="background",t.beginFill(793651),t.drawRect(0,0,this.getSceneWidth(),this.getSceneHeight()),t.endFill(),this.backDisplay.addChild(t)},u.prototype.getDisplay=function(t){return void 0===t&&(t=!1),t?this.frontDisplay:this.backDisplay},u.prototype.layerTransitionOutComplete=function(){this.frontDisplay.destroy({children:!0}),this.backDisplay.destroy({children:!0})},u);function u(){return null!==o&&o.apply(this,arguments)||this}e.GameMainView=h},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(7),a=i(12),h=(o=s.Controller,n(u,o),u.prototype.addNotifications=function(){this.addNotification(a.GameNotifications.UI_UPDATE,this.updateUi.bind(this))},u.prototype.postRegister=function(){this.gameModel=this.retrieveModel(a.GameModels.GAME),this.view.initUi()},u.prototype.execute=function(t){this.updateUi()},u.prototype.updateUi=function(t){this.view.updateLives(this.gameModel.playerLife),this.view.updateEnemies(this.gameModel.enemiesToSpawn)},u);function u(){return null!==o&&o.apply(this,arguments)||this}e.GameUiController=h},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(11),a=i(17),h=(o=s.View,n(u,o),u.prototype.initUi=function(){this.initLives(),this.initEnemies()},u.prototype.initLives=function(){this.livesText=a.UiComponents.createText("",16777215),this.livesText.x=20,this.livesText.y=this.getSceneHeight()-45,this.display.addChild(this.livesText)},u.prototype.updateLives=function(t){this.livesText.text="LIFES: "+t},u.prototype.initEnemies=function(){this.enemiesText=a.UiComponents.createText("",16777215),this.enemiesText.x=this.getSceneWidth()-180,this.enemiesText.y=this.getSceneHeight()-45,this.display.addChild(this.enemiesText)},u.prototype.updateEnemies=function(t){this.enemiesText.text="ENEMIES: "+t},u);function u(){return null!==o&&o.apply(this,arguments)||this}e.GameUiView=h},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var r=Array(t),n=0;for(e=0;e<i;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,n++)r[n]=o[s];return r};Object.defineProperty(e,"__esModule",{value:!0});var s,a=i(1),h=i(68),u=i(19),l=i(2),c=i(5),p=(s=h.Model,n(f,s),Object.defineProperty(f.prototype,"playerLife",{get:function(){return this.player.life},enumerable:!0,configurable:!0}),f.prototype.init=function(){this.units=[],this.mapItems=[],this.bullets=[],this.enemiesKilled=0,this.enemiesToSpawn=c.Config.enemiesOnLevel},f.prototype.addUnit=function(t){t.type===l.GameObjectTypes.Player&&(this.player=t),t.type===l.GameObjectTypes.Enemy&&this.enemiesToSpawn--,this.units.push(t)},f.prototype.removeUnit=function(e){e.type===l.GameObjectTypes.Enemy&&this.enemiesKilled++,this.units=this.units.filter(function(t){return t!==e})},f.prototype.allEnemiesKilled=function(){return this.enemiesKilled===c.Config.enemiesOnLevel},f.prototype.getSpawnPoint=function(e){var i=[];return this.mapItems.forEach(function(t){t.type===e&&i.push(new a.Point(t.x,t.y))}),i[u.Utils.randomInt(0,i.length-1)]},f.prototype.addMapItem=function(t){this.mapItems.push(t)},f.prototype.removeMapItem=function(e){this.mapItems=this.mapItems.filter(function(t){return t!==e})},f.prototype.addBullet=function(t){this.bullets.push(t)},f.prototype.removeBullet=function(e){this.bullets=this.bullets.filter(function(t){return t!==e})},f.prototype.update=function(){var t=o(this.mapItems,this.units,this.bullets);t.forEach(function(e){e.update(),t.forEach(function(t){e.checkCollisionWith(t)})})},f);function f(){return null!==s&&s.apply(this,arguments)||this}e.GameModel=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(){}e.Model=r},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(9),a=i(70),h=i(31),u=i(71),l=(o=s.Module,n(c,o),c.prototype.registerControllers=function(){this.addController(h.GameOverNotifications.MAIN,a.GameOverMainController,u.GameOverMainView)},c.prototype.registerScenes=function(){this.addScene(h.GameOverNotifications.SCENE,[h.GameOverNotifications.MAIN])},c);function c(){return null!==o&&o.apply(this,arguments)||this}e.GameOverModule=l},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(10),a=i(7),h=i(12),u=(o=a.Controller,n(l,o),l.prototype.postRegister=function(){var t=this;this.view.drawScene(),this.view.drawMenuButtons(function(){t.sendNotification(s.GlobalNotifications.TRANSITION_TO_SCENE,h.GameNotifications.SCENE)})},l.prototype.execute=function(t){this.view.setTitle(t.body.isWin)},l);function l(){return null!==o&&o.apply(this,arguments)||this}e.GameOverMainController=u},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(11),a=i(1),h=i(17),u=i(5),l=(o=s.View,n(c,o),c.prototype.drawMenuButtons=function(t){var e=h.UiComponents.createButton("PLAY AGAIN",function(){t()});e.x=this.getSceneWidth()/2,e.y=400,this.display.addChild(e)},c.prototype.drawScene=function(t){void 0===t&&(t=!1),this.drawBg(),this.drawTitle(t)},c.prototype.drawBg=function(){var t=new a.Graphics;t.beginFill(793651),t.drawRect(0,0,this.getSceneWidth(),this.getSceneHeight()),t.endFill(),this.display.addChild(t)},c.prototype.drawTitle=function(t){void 0===t&&(t=!1);var e=new PIXI.TextStyle({fontSize:80,fontWeight:"bold",fill:["#ffffff","#afaeae"]});this.titleTextField=new a.Text("",e),this.titleTextField.anchor.set(.5),this.titleTextField.x=this.getSceneWidth()/2,this.titleTextField.y=250,this.display.addChild(this.titleTextField)},c.prototype.setTitle=function(t){var e;void 0===t&&(t=!1),t?(e="CONGRATS!",this.playSound(u.Config.assets.soundWin)):(e="GAME OVER :(",this.playSound(u.Config.assets.soundLose)),this.titleTextField.text=e},c);function c(){return null!==o&&o.apply(this,arguments)||this}e.GameOverMainView=l},function(t,e,i){"use strict";i.r(e);var r=i(20),n=i.n(r),o=i(3),s=i.n(o);
/*!
 * resource-loader - v3.0.1
 * https://github.com/pixijs/pixi-sound
 * Compiled Tue, 02 Jul 2019 14:06:18 UTC
 *
 * resource-loader is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
function a(){}function h(i,r,n,o){var s=0,a=i.length;!function t(e){e||s===a?n&&n(e):o?setTimeout(function(){r(i[s++],t)},1):r(i[s++],t)}()}function u(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function l(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=0,n={_tasks:[],concurrency:t,saturated:a,unsaturated:a,buffer:t/4,empty:a,drain:a,error:a,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){i=0,n.drain=a,n.started=!1,n._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!n.paused&&i<n.concurrency&&n._tasks.length;){var t=n._tasks.shift();0===n._tasks.length&&n.empty(),(i+=1)===n.concurrency&&n.saturated(),e(t.data,u(o(t)))}},length:function(){return n._tasks.length},running:function(){return i},idle:function(){return n._tasks.length+i===0},pause:function(){!0!==n.paused&&(n.paused=!0)},resume:function(){if(!1!==n.paused){n.paused=!1;for(var t=1;t<=n.concurrency;t++)n.process()}}};function r(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(n.started=!0,null==t&&n.idle())setTimeout(function(){return n.drain()},1);else{var r={data:t,callback:"function"==typeof i?i:a};e?n._tasks.unshift(r):n._tasks.push(r),setTimeout(function(){return n.process()},1)}}function o(e){return function(t){i-=1,e.callback.apply(e,arguments),null!=t&&n.error(t,e.data),i<=n.concurrency-n.buffer&&n.unsaturated(),n.idle()&&n.drain(),n.process()}}return n}var c={};function p(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,i){return e&&p(t.prototype,e),i&&p(t,i),t}var d=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),_=null;function y(){}var m=function(){function o(t,e,i){if("string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(o.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=o.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=y,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new s.a,this.onProgress=new s.a,this.onComplete=new s.a,this.onAfterMiddleware=new s.a}o.setExtensionLoadType=function(t,e){v(o._loadTypeMap,t,e)},o.setExtensionXhrType=function(t,e){v(o._xhrTypeMap,t,e)};var t=o.prototype;return t.complete=function(){this._clearEvents(),this._finish()},t.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=o.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(o.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case o.LOAD_TYPE.IMAGE:this.type=o.TYPE.IMAGE,this._loadElement("image");break;case o.LOAD_TYPE.AUDIO:this.type=o.TYPE.AUDIO,this._loadSourceElement("audio");break;case o.LOAD_TYPE.VIDEO:this.type=o.TYPE.VIDEO,this._loadSourceElement("video");break;case o.LOAD_TYPE.XHR:default:d&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t._hasFlag=function(t){return 0!=(this._flags&t)},t._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(o.STATUS_FLAGS.COMPLETE,!0),this._setFlag(o.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===o.XHR_RESPONSE_TYPE.JSON||this.xhrType===o.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=o.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},t._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t._createSource=function(t,e,i){i=i||t+"/"+this._getExtension(e);var r=document.createElement("source");return r.src=e,r.type=i,r},t._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t._onTimeout=function(){this.abort("Load timed out.")},t._xhrOnError=function(){var t=this.xhr;this.abort(g(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t._xhrOnTimeout=function(){var t=this.xhr;this.abort(g(t)+" Request timed out.")},t._xhrOnAbort=function(){var t=this.xhr;this.abort(g(t)+" Request was aborted by the user.")},t._xhrOnLoad=function(){var t=this.xhr,e="",i=void 0===t.status?200:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(e=t.responseText),0===i&&(0<e.length||t.responseType===o.XHR_RESPONSE_TYPE.BUFFER)?i=200:1223===i&&(i=204),2==(i/100|0)){if(this.xhrType===o.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=o.TYPE.TEXT;else if(this.xhrType===o.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=o.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===o.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(e,"text/xml")}else{var n=document.createElement("div");n.innerHTML=e,this.data=n}this.type=o.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=t.response||e;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},t._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,(_=_||document.createElement("a")).href=t;var i=!(t=n()(_.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&r===e.protocol?"":"anonymous"},t._determineXhrType=function(){return o._xhrTypeMap[this.extension]||o.XHR_RESPONSE_TYPE.TEXT},t._determineLoadType=function(){return o._loadTypeMap[this.extension]||o.LOAD_TYPE.XHR},t._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var r=t.indexOf("?"),n=t.indexOf("#"),o=Math.min(-1<r?r:t.length,-1<n?n:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t._getMimeFromXhrType=function(t){switch(t){case o.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case o.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case o.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case o.XHR_RESPONSE_TYPE.JSON:return"application/json";case o.XHR_RESPONSE_TYPE.DEFAULT:case o.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},f(o,[{key:"isDataUrl",get:function(){return this._hasFlag(o.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(o.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(o.STATUS_FLAGS.LOADING)}}]),o}();function v(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function g(t){return t.toString().replace("object ","")}m.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},m.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},m.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},m.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},m._loadTypeMap={gif:m.LOAD_TYPE.IMAGE,png:m.LOAD_TYPE.IMAGE,bmp:m.LOAD_TYPE.IMAGE,jpg:m.LOAD_TYPE.IMAGE,jpeg:m.LOAD_TYPE.IMAGE,tif:m.LOAD_TYPE.IMAGE,tiff:m.LOAD_TYPE.IMAGE,webp:m.LOAD_TYPE.IMAGE,tga:m.LOAD_TYPE.IMAGE,svg:m.LOAD_TYPE.IMAGE,"svg+xml":m.LOAD_TYPE.IMAGE,mp3:m.LOAD_TYPE.AUDIO,ogg:m.LOAD_TYPE.AUDIO,wav:m.LOAD_TYPE.AUDIO,mp4:m.LOAD_TYPE.VIDEO,webm:m.LOAD_TYPE.VIDEO},m._xhrTypeMap={xhtml:m.XHR_RESPONSE_TYPE.DOCUMENT,html:m.XHR_RESPONSE_TYPE.DOCUMENT,htm:m.XHR_RESPONSE_TYPE.DOCUMENT,xml:m.XHR_RESPONSE_TYPE.DOCUMENT,tmx:m.XHR_RESPONSE_TYPE.DOCUMENT,svg:m.XHR_RESPONSE_TYPE.DOCUMENT,tsx:m.XHR_RESPONSE_TYPE.DOCUMENT,gif:m.XHR_RESPONSE_TYPE.BLOB,png:m.XHR_RESPONSE_TYPE.BLOB,bmp:m.XHR_RESPONSE_TYPE.BLOB,jpg:m.XHR_RESPONSE_TYPE.BLOB,jpeg:m.XHR_RESPONSE_TYPE.BLOB,tif:m.XHR_RESPONSE_TYPE.BLOB,tiff:m.XHR_RESPONSE_TYPE.BLOB,webp:m.XHR_RESPONSE_TYPE.BLOB,tga:m.XHR_RESPONSE_TYPE.BLOB,json:m.XHR_RESPONSE_TYPE.JSON,text:m.XHR_RESPONSE_TYPE.TEXT,txt:m.XHR_RESPONSE_TYPE.TEXT,ttf:m.XHR_RESPONSE_TYPE.BUFFER,otf:m.XHR_RESPONSE_TYPE.BUFFER},m.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var x=window.URL||window.webkitURL;var T={caching:function(t,e){var i=this;c[t.url]?(t.data=c[t.url],t.complete()):t.onComplete.once(function(){return c[i.url]=i.data}),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===m.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=x.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=m.TYPE.IMAGE,void(t.data.onload=function(){x.revokeObjectURL(i),t.data.onload=null,e()})}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],n=[0,0,0,0],o=0;o<r.length;++o)i<t.length?r[o]=255&t.charCodeAt(i++):r[o]=0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var s=0;s<n.length;++s)e+=b.charAt(n[s])}return e}(t.xhr.responseText),t.type=m.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},E=/(#[\w-]+)?$/,w=function(){function o(t,e){var i=this;void 0===t&&(t=""),void 0===e&&(e=10),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return i._loadResource(t,e)},this._queue=l(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new s.a,this.onError=new s.a,this.onLoad=new s.a,this.onStart=new s.a,this.onComplete=new s.a;for(var r=0;r<o._defaultBeforeMiddleware.length;++r)this.pre(o._defaultBeforeMiddleware[r]);for(var n=0;n<o._defaultAfterMiddleware.length;++n)this.use(o._defaultAfterMiddleware[n])}var t=o.prototype;return t.add=function(t,e,i,r){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(r=e||t.callback||t.onComplete,e=(i=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(r=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new m(t,e,i),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var o=i.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var h=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=h;for(var u=0;u<s.length;++u)s[u].progressChunk=h;this.resources[t].progressChunk=h}return this._queue.push(this.resources[t]),this},t.pre=function(t){return this._beforeMiddleware.push(t),this},t.use=function(t){return this._afterMiddleware.push(t),this},t.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t._prepareUrl=function(t){var e,i=n()(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=E.exec(e)[0];-1!==(e=e.substr(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},t._loadResource=function(i,t){var r=this;i._dequeue=t,h(this._beforeMiddleware,function(t,e){t.call(r,i,function(){e(i.isComplete?{}:null)})},function(){i.isComplete?r._onLoad(i):(i._onLoadBinding=i.onComplete.once(r._onLoad,r),i.load())},!0)},t._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t._onLoad=function(i){var r=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),h(this._afterMiddleware,function(t,e){t.call(r,i,e)},function(){i.onAfterMiddleware.dispatch(i),r.progress=Math.min(100,r.progress+i.progressChunk),r.onProgress.dispatch(r,i),i.error?r.onError.dispatch(i.error,r,i):r.onLoad.dispatch(r,i),r._resourcesParsing.splice(r._resourcesParsing.indexOf(i),1),r._queue.idle()&&0===r._resourcesParsing.length&&r._onComplete()},!0)},f(o,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),o}();w._defaultBeforeMiddleware=[],w._defaultAfterMiddleware=[],w.pre=function(t){return w._defaultBeforeMiddleware.push(t),w},w.use=function(t){return w._defaultAfterMiddleware.push(t),w};var O=i(4),S=i.n(O);var A,P,C,M,I,R,N,D,L,U,F,B,k,j,G,X,H,V,Y,z,W,q,K,Z,Q,J,$,tt,et={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:
/*!
 * @pixi/settings - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
function(t){var e=!0;if(S.a.tablet||S.a.phone){if(e=!1,S.a.apple.device){var i=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(i)11<=parseInt(i[1],10)&&(e=!0)}if(S.a.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r)7<=parseInt(r[1],10)&&(e=!0)}}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:S.a.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!S.a.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},it=i(22),rt=i.n(it),nt=(i(23),i(15)),ot=i.n(nt);(P=A=A||{})[P.WEBGL_LEGACY=0]="WEBGL_LEGACY",P[P.WEBGL=1]="WEBGL",P[P.WEBGL2=2]="WEBGL2",(M=C=C||{})[M.UNKNOWN=0]="UNKNOWN",M[M.WEBGL=1]="WEBGL",M[M.CANVAS=2]="CANVAS",(R=I=I||{})[R.NORMAL=0]="NORMAL",R[R.ADD=1]="ADD",R[R.MULTIPLY=2]="MULTIPLY",R[R.SCREEN=3]="SCREEN",R[R.OVERLAY=4]="OVERLAY",R[R.DARKEN=5]="DARKEN",R[R.LIGHTEN=6]="LIGHTEN",R[R.COLOR_DODGE=7]="COLOR_DODGE",R[R.COLOR_BURN=8]="COLOR_BURN",R[R.HARD_LIGHT=9]="HARD_LIGHT",R[R.SOFT_LIGHT=10]="SOFT_LIGHT",R[R.DIFFERENCE=11]="DIFFERENCE",R[R.EXCLUSION=12]="EXCLUSION",R[R.HUE=13]="HUE",R[R.SATURATION=14]="SATURATION",R[R.COLOR=15]="COLOR",R[R.LUMINOSITY=16]="LUMINOSITY",R[R.NORMAL_NPM=17]="NORMAL_NPM",R[R.ADD_NPM=18]="ADD_NPM",R[R.SCREEN_NPM=19]="SCREEN_NPM",R[R.NONE=20]="NONE",R[R.SRC_OVER=0]="SRC_OVER",R[R.SRC_IN=21]="SRC_IN",R[R.SRC_OUT=22]="SRC_OUT",R[R.SRC_ATOP=23]="SRC_ATOP",R[R.DST_OVER=24]="DST_OVER",R[R.DST_IN=25]="DST_IN",R[R.DST_OUT=26]="DST_OUT",R[R.DST_ATOP=27]="DST_ATOP",R[R.ERASE=26]="ERASE",R[R.SUBTRACT=28]="SUBTRACT",R[R.XOR=29]="XOR",(D=N=N||{})[D.POINTS=0]="POINTS",D[D.LINES=1]="LINES",D[D.LINE_LOOP=2]="LINE_LOOP",D[D.LINE_STRIP=3]="LINE_STRIP",D[D.TRIANGLES=4]="TRIANGLES",D[D.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",D[D.TRIANGLE_FAN=6]="TRIANGLE_FAN",(U=L=L||{})[U.RGBA=6408]="RGBA",U[U.RGB=6407]="RGB",U[U.ALPHA=6406]="ALPHA",U[U.LUMINANCE=6409]="LUMINANCE",U[U.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",U[U.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",U[U.DEPTH_STENCIL=34041]="DEPTH_STENCIL",(B=F=F||{})[B.TEXTURE_2D=3553]="TEXTURE_2D",B[B.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",B[B.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",B[B.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",B[B.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",B[B.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",B[B.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",B[B.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",B[B.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",(j=k=k||{})[j.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",j[j.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",j[j.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",j[j.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",j[j.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",j[j.FLOAT=5126]="FLOAT",j[j.HALF_FLOAT=36193]="HALF_FLOAT",(X=G=G||{})[X.NEAREST=0]="NEAREST",X[X.LINEAR=1]="LINEAR",(V=H=H||{})[V.CLAMP=33071]="CLAMP",V[V.REPEAT=10497]="REPEAT",V[V.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(z=Y=Y||{})[z.OFF=0]="OFF",z[z.POW2=1]="POW2",z[z.ON=2]="ON",(q=W=W||{})[q.NPM=0]="NPM",q[q.UNPACK=1]="UNPACK",q[q.PMA=2]="PMA",q[q.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",q[q.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",q[q.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",(Z=K=K||{})[Z.AUTO=0]="AUTO",Z[Z.MANUAL=1]="MANUAL",(J=Q=Q||{}).LOW="lowp",J.MEDIUM="mediump",J.HIGH="highp",(tt=$=$||{})[tt.NONE=0]="NONE",tt[tt.SCISSOR=1]="SCISSOR",tt[tt.STENCIL=2]="STENCIL",tt[tt.SPRITE=3]="SPRITE",
/*!
 * @pixi/utils - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
et.RETINA_PREFIX=/@([0-9\.]+)x/;var st,at=!(et.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0),ht="5.2.0";var ut=function(){for(var t=[],e=[],i=0;i<32;i++)e[t[i]=i]=i;t[I.NORMAL_NPM]=I.NORMAL,t[I.ADD_NPM]=I.ADD,t[I.SCREEN_NPM]=I.SCREEN,e[I.NORMAL]=I.NORMAL_NPM,e[I.ADD]=I.ADD_NPM,e[I.SCREEN]=I.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function lt(t,e,i){var r,n=t.length;if(!(n<=e||0===i)){var o=n-(i=n<e+i?n-e:i);for(r=e;r<o;++r)t[r]=t[r+i];t.length=o}}var ct=0;function pt(){return++ct}function ft(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function dt(t){return!(t&t-1||!t)}function _t(t){var e=(65535<t)<<4,i=(255<(t>>>=e))<<3;return e|=i,e|=i=(15<(t>>>=i))<<2,(e|=i=(3<(t>>>=i))<<1)|(t>>>=i)>>1}var yt={},mt=Object.create(null),vt=Object.create(null);function gt(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||et.RESOLUTION,this.resize(t,e)}var bt={width:{configurable:!0},height:{configurable:!0}};gt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},gt.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},gt.prototype.destroy=function(){this.context=null,this.canvas=null},bt.width.get=function(){return this.canvas.width},bt.width.set=function(t){this.canvas.width=t},bt.height.get=function(){return this.canvas.height},bt.height.set=function(t){this.canvas.height=t},Object.defineProperties(gt.prototype,bt);var xt;function Tt(t,e){var i=et.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}var Et={};
/*!
 * @pixi/runner - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var wt,Ot,St=(At.prototype.emit=function(t,e,i,r,n,o,s,a){if(8<arguments.length)throw new Error("max arguments reached");var h=this.name,u=this.items;this._aliasCount++;for(var l=0,c=u.length;l<c;l++)u[l][h](t,e,i,r,n,o,s,a);return u===this.items&&this._aliasCount--,this},At.prototype.ensureNonAliasedItems=function(){0<this._aliasCount&&1<this.items.length&&(this._aliasCount=0,this.items=this.items.slice(0))},At.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},At.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},At.prototype.contains=function(t){return-1!==this.items.indexOf(t)},At.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},At.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(At.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!0,configurable:!0}),Object.defineProperty(At.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),At);function At(t){this.items=[],this._name=t,this._aliasCount=0}Object.defineProperties(St.prototype,{dispatch:{value:St.prototype.emit},run:{value:St.prototype.emit}}),
/*!
 * @pixi/ticker - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
et.TARGET_FPMS=.06,(Ot=wt=wt||{})[Ot.INTERACTION=50]="INTERACTION",Ot[Ot.HIGH=25]="HIGH",Ot[Ot.NORMAL=0]="NORMAL",Ot[Ot.LOW=-25]="LOW",Ot[Ot.UTILITY=-50]="UTILITY";var Pt=(Ct.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},Ct.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},Ct.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},Ct.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},Ct);function Ct(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=!1),this.fn=t,this.context=e,this.priority=i,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}var Mt=(It.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},It.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},It.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},It.prototype.add=function(t,e,i){return void 0===i&&(i=wt.NORMAL),this._addListener(new Pt(t,e,i))},It.prototype.addOnce=function(t,e,i){return void 0===i&&(i=wt.NORMAL),this._addListener(new Pt(t,e,i,!0))},It.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}e=(i=e).next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},It.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},It.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},It.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},It.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},It.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*et.TARGET_FPMS;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(It.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!0,configurable:!0}),Object.defineProperty(It.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,et.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!0,configurable:!0}),Object.defineProperty(It.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!0,configurable:!0}),Object.defineProperty(It,"shared",{get:function(){if(!It._shared){var t=It._shared=new It;t.autoStart=!0,t._protected=!0}return It._shared},enumerable:!0,configurable:!0}),Object.defineProperty(It,"system",{get:function(){if(!It._system){var t=It._system=new It;t.autoStart=!0,t._protected=!0}return It._system},enumerable:!0,configurable:!0}),It);function It(){var e=this;this._head=new Pt(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/et.TARGET_FPMS,this.elapsedMS=1/et.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}Rt.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,wt.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Mt.shared:new Mt,t.autoStart&&this.start()},Rt.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}};
/*!
 * @pixi/math - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */function Rt(){}var Nt=(Dt.prototype.clone=function(){return new Dt(this.x,this.y)},Dt.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},Dt.prototype.copyTo=function(t){return t.set(this.x,this.y),t},Dt.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},Dt.prototype.set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e},Dt);function Dt(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}var Lt=(Ut.prototype.clone=function(t,e){return void 0===t&&(t=this.cb),void 0===e&&(e=this.scope),new Ut(t,e,this._x,this._y)},Ut.prototype.set=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope))},Ut.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},Ut.prototype.copyTo=function(t){return t.set(this._x,this._y),t},Ut.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(Ut.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(Ut.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Ut);function Ut(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this._x=i,this._y=r,this.cb=t,this.scope=e}var Ft,Bt,kt=2*Math.PI,jt=180/Math.PI,Gt=Math.PI/180;(Bt=Ft=Ft||{})[Bt.POLY=0]="POLY",Bt[Bt.RECT=1]="RECT",Bt[Bt.CIRC=2]="CIRC",Bt[Bt.ELIP=3]="ELIP",Bt[Bt.RREC=4]="RREC";var Xt=(Ht.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Ht.prototype.set=function(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this},Ht.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0),i[8]=1,i},Ht.prototype.apply=function(t,e){e=e||new Nt;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},Ht.prototype.applyInverse=function(t,e){e=e||new Nt;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},Ht.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},Ht.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},Ht.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},Ht.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},Ht.prototype.setTransform=function(t,e,i,r,n,o,s,a,h){return this.a=Math.cos(s+h)*n,this.b=Math.sin(s+h)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},Ht.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},Ht.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,o=-Math.atan2(-r,n),s=Math.atan2(i,e),a=Math.abs(o+s);return a<1e-5||Math.abs(kt-a)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx,t.position.y=this.ty,t},Ht.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this},Ht.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Ht.prototype.clone=function(){var t=new Ht;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Ht.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},Ht.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(Ht,"IDENTITY",{get:function(){return new Ht},enumerable:!0,configurable:!0}),Object.defineProperty(Ht,"TEMP_MATRIX",{get:function(){return new Ht},enumerable:!0,configurable:!0}),Ht);function Ht(t,e,i,r,n,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o}var Vt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Yt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Wt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],qt=[],Kt=[],Zt=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];qt.push(e);for(var i=0;i<16;i++)for(var r=Zt(Vt[t]*Vt[i]+zt[t]*Yt[i]),n=Zt(Yt[t]*Vt[i]+Wt[t]*Yt[i]),o=Zt(Vt[t]*zt[i]+zt[t]*Wt[i]),s=Zt(Yt[t]*zt[i]+Wt[t]*Wt[i]),a=0;a<16;a++)if(Vt[a]===r&&Yt[a]===n&&zt[a]===o&&Wt[a]===s){e.push(a);break}}for(t=0;t<16;t++){var h=new Xt;h.set(Vt[t],Yt[t],zt[t],Wt[t],0,0),Kt.push(h)}}();var Qt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Vt[t]},uY:function(t){return Yt[t]},vX:function(t){return zt[t]},vY:function(t){return Wt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return qt[t][e]},sub:function(t,e){return qt[t][Qt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?Qt.S:Qt.N:2*Math.abs(e)<=Math.abs(t)?0<t?Qt.E:Qt.W:0<e?0<t?Qt.SE:Qt.SW:0<t?Qt.NE:Qt.NW},matrixAppendRotationInv:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=Kt[Qt.inv(e)];n.tx=i,n.ty=r,t.append(n)}},Jt=($t.prototype.onChange=function(){this._localID++},$t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},$t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},$t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},$t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty($t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!0,configurable:!0}),$t.IDENTITY=new $t,$t);function $t(){this.worldTransform=new Xt,this.localTransform=new Xt,this.position=new Lt(this.onChange,this,0,0),this.scale=new Lt(this.onChange,this,1,1),this.pivot=new Lt(this.onChange,this,0,0),this.skew=new Lt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}var te=(Object.defineProperty(ee.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(ee.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(ee.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(ee.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(ee,"EMPTY",{get:function(){return new ee(0,0,0,0)},enumerable:!0,configurable:!0}),ee.prototype.clone=function(){return new ee(this.x,this.y,this.width,this.height)},ee.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},ee.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},ee.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},ee.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},ee.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this},ee.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},ee.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this},ee);function ee(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r),this.type=Ft.RECT}ie.prototype.clone=function(){return new ie(this.x,this.y,this.radius)},ie.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return(r*=r)+(n*=n)<=i},ie.prototype.getBounds=function(){return new te(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)};function ie(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=Ft.CIRC}re.prototype.clone=function(){return new re(this.x,this.y,this.width,this.height)},re.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return(i*=i)+(r*=r)<=1},re.prototype.getBounds=function(){return new te(this.x-this.width,this.y-this.height,this.width,this.height)};function re(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=i,this.height=r,this.type=Ft.ELIP}ne.prototype.clone=function(){var t=new ne(this.points.slice());return t.closeStroke=this.closeStroke,t},ne.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,o=r-1;n<r;o=n++){var s=this.points[2*n],a=this.points[2*n+1],h=this.points[2*o],u=this.points[2*o+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-s)+s&&(i=!i)}return i};function ne(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(Array.isArray(e[0])&&(e=e[0]),e[0]instanceof Nt){for(var r=[],n=0,o=(e=e).length;n<o;n++)r.push(e[n].x,e[n].y);e=r}this.points=e,this.type=Ft.POLY,this.closeStroke=!0}oe.prototype.clone=function(){return new oe(this.x,this.y,this.width,this.height,this.radius)},oe.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),r=e-(this.y+this.radius),n=this.radius*this.radius;if(i*i+r*r<=n)return!0;if((i=t-(this.x+this.width-this.radius))*i+r*r<=n)return!0;if(i*i+(r=e-(this.y+this.height-this.radius))*r<=n)return!0;if((i=t-(this.x+this.radius))*i+r*r<=n)return!0}return!1};
/*!
 * @pixi/display - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */function oe(t,e,i,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=20),this.x=t,this.y=e,this.width=i,this.height=r,this.radius=n,this.type=Ft.RREC}et.SORTABLE_CHILDREN=!1;function se(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}se.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},se.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},se.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?te.EMPTY:((t=t||new te(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},se.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},se.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,o=t[0],s=t[1];e=o<e?o:e,i=s<i?s:i,r=r<o?o:r,n=n<s?s:n,e=(o=t[2])<e?o:e,i=(s=t[3])<i?s:i,r=r<o?o:r,n=n<s?s:n,e=(o=t[4])<e?o:e,i=(s=t[5])<i?s:i,r=r<o?o:r,n=n<s?s:n,e=(o=t[6])<e?o:e,i=(s=t[7])<i?s:i,r=r<o?o:r,n=n<s?s:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},se.prototype.addFrame=function(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)},se.prototype.addFrameMatrix=function(t,e,i,r,n){var o=t.a,s=t.b,a=t.c,h=t.d,u=t.tx,l=t.ty,c=this.minX,p=this.minY,f=this.maxX,d=this.maxY,_=o*e+a*i+u,y=s*e+h*i+l;c=_<c?_:c,p=y<p?y:p,f=f<_?_:f,d=d<y?y:d,c=(_=o*r+a*i+u)<c?_:c,p=(y=s*r+h*i+l)<p?y:p,f=f<_?_:f,d=d<y?y:d,c=(_=o*e+a*n+u)<c?_:c,p=(y=s*e+h*n+l)<p?y:p,f=f<_?_:f,d=d<y?y:d,c=(_=o*r+a*n+u)<c?_:c,p=(y=s*r+h*n+l)<p?y:p,f=f<_?_:f,d=d<y?y:d,this.minX=c,this.minY=p,this.maxX=f,this.maxY=d},se.prototype.addVertexData=function(t,e,i){for(var r=this.minX,n=this.minY,o=this.maxX,s=this.maxY,a=e;a<i;a+=2){var h=t[a],u=t[a+1];r=h<r?h:r,n=u<n?u:n,o=o<h?h:o,s=s<u?u:s}this.minX=r,this.minY=n,this.maxX=o,this.maxY=s},se.prototype.addVertices=function(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)},se.prototype.addVerticesMatrix=function(t,e,i,r,n,o){var s=t.a,a=t.b,h=t.c,u=t.d,l=t.tx,c=t.ty;n=n||0,o=o||0;for(var p=this.minX,f=this.minY,d=this.maxX,_=this.maxY,y=i;y<r;y+=2){var m=e[y],v=e[y+1],g=s*m+h*v+l,b=u*v+a*m+c;p=Math.min(p,g-n),d=Math.max(d,g+n),f=Math.min(f,b-o),_=Math.max(_,b+o)}this.minX=p,this.minY=f,this.maxX=d,this.maxY=_},se.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},se.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=o){var s=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=h<n?n:h,this.maxY=u<o?o:u}},se.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},se.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=o){var s=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=h<n?n:h,this.maxY=u<o?o:u}},se.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},se.prototype.addFramePad=function(t,e,i,r,n,o){t-=n,e-=o,i+=n,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r};var ae=function(t){function n(){t.call(this),this.tempDisplayObjectParent=null,this.transform=new Jt,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new se,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}t&&(n.__proto__=t);var e={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};return((n.prototype=Object.create(t&&t.prototype)).constructor=n).mixin=function(t){for(var e=Object.keys(t),i=0;i<e.length;++i){var r=e[i];Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(t,r))}},e._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new n),this.tempDisplayObjectParent},n.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},n.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},n.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&(this.calculateBounds(),this._lastBoundsID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new te),e=this._boundsRect),this._bounds.getRectangle(e)},n.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new te),t=this._localBoundsRect);var r=this.getBounds(!1,t);return this.parent=i,this.transform=e,r},n.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},n.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},n.prototype.render=function(){},n.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},n.prototype.setTransform=function(t,e,i,r,n,o,s,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=h,this},n.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},e.x.get=function(){return this.position.x},e.x.set=function(t){this.transform.position.x=t},e.y.get=function(){return this.position.y},e.y.set=function(t){this.transform.position.y=t},e.worldTransform.get=function(){return this.transform.worldTransform},e.localTransform.get=function(){return this.transform.localTransform},e.position.get=function(){return this.transform.position},e.position.set=function(t){this.transform.position.copyFrom(t)},e.scale.get=function(){return this.transform.scale},e.scale.set=function(t){this.transform.scale.copyFrom(t)},e.pivot.get=function(){return this.transform.pivot},e.pivot.set=function(t){this.transform.pivot.copyFrom(t)},e.skew.get=function(){return this.transform.skew},e.skew.set=function(t){this.transform.skew.copyFrom(t)},e.rotation.get=function(){return this.transform.rotation},e.rotation.set=function(t){this.transform.rotation=t},e.angle.get=function(){return this.transform.rotation*jt},e.angle.set=function(t){this.transform.rotation=t*Gt},e.zIndex.get=function(){return this._zIndex},e.zIndex.set=function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},e.worldVisible.get=function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},e.mask.get=function(){return this._mask},e.mask.set=function(t){if(this._mask){var e=this._mask.maskObject||this._mask;e.renderable=!0,e.isMask=!1}if(this._mask=t,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}},Object.defineProperties(n.prototype,e),n}(rt.a);function he(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}ae.prototype.displayObjectUpdateTransform=ae.prototype.updateTransform;var ue=function(n){function t(){n.call(this),this.children=[],this.sortableChildren=et.SORTABLE_CHILDREN,this.sortDirty=!1}n&&(t.__proto__=n);var e={width:{configurable:!0},height:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.onChildrenChange=function(){},t.prototype.addChild=function(t){var e=arguments,i=arguments.length;if(1<i)for(var r=0;r<i;r++)this.addChild(e[r]);else t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this);return t},t.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),(t.parent=this).sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},t.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},t.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},t.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);lt(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},t.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},t.prototype.removeChild=function(t){var e=arguments,i=arguments.length;if(1<i)for(var r=0;r<i;r++)this.removeChild(e[r]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,lt(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return t},t.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,lt(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},t.prototype.removeChildren=function(t,e){void 0===t&&(t=0);var i,r=t,n="number"==typeof e?e:this.children.length,o=n-r;if(0<o&&o<=n){i=this.children.splice(r,o);for(var s=0;s<i.length;++s)i[s].parent=null,i[s].transform&&(i[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<i.length;++a)i[a].emit("removed",this),this.emit("childRemoved",i[a],this,a);return i}if(0==o&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&1<this.children.length&&this.children.sort(he),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},t.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var r=this._enabledFilters.length=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}i&&t.mask.push(this,this._mask),this._render(t);for(var n=0,o=this.children.length;n<o;n++)this.children[n].render(t);t.batch.flush(),i&&t.mask.pop(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},t.prototype._render=function(){},t.prototype.destroy=function(t){n.prototype.destroy.call(this),this.sortDirty=!1;var e="boolean"==typeof t?t:t&&t.children,i=this.removeChildren(0,this.children.length);if(e)for(var r=0;r<i.length;++r)i[r].destroy(t)},e.width.get=function(){return this.scale.x*this.getLocalBounds().width},e.width.set=function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},e.height.get=function(){return this.scale.y*this.getLocalBounds().height},e.height.set=function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},Object.defineProperties(t.prototype,e),t}(ae);ue.prototype.containerUpdateTransform=ue.prototype.updateTransform;function le(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new St("setRealSize",2),this.onUpdate=new St("update"),this.onError=new St("onError",1)}
/*!
 * @pixi/core - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var ce={valid:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};le.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.run(this._width,this._height)},le.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},le.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.run(t,e))},ce.valid.get=function(){return!!this._width&&!!this._height},le.prototype.update=function(){this.destroyed||this.onUpdate.run()},le.prototype.load=function(){return Promise.resolve()},ce.width.get=function(){return this._width},ce.height.get=function(){return this._height},le.prototype.upload=function(){return!1},le.prototype.style=function(){return!1},le.prototype.dispose=function(){},le.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},Object.defineProperties(le.prototype,ce);var pe=function(r){function t(t){var e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;r.call(this,e,i),this.source=t,this.noSubImage=!1}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,(xt=xt||document.createElement("a")).href=t;var i=!(t=ot.a.parse(xt.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"}(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},t.prototype.upload=function(t,e,i,r){var n=t.gl,o=e.realWidth,s=e.realHeight;return r=r||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===W.UNPACK),this.noSubImage||e.target!==n.TEXTURE_2D||i.width!==o||i.height!==s?(i.width=o,i.height=s,n.texImage2D(e.target,0,e.format,e.format,e.type,r)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,e.type,r),!0},t.prototype.update=function(){if(!this.destroyed){var t=this.source.naturalWidth||this.source.videoWidth||this.source.width,e=this.source.naturalHeight||this.source.videoHeight||this.source.height;this.resize(t,e),r.prototype.update.call(this)}},t.prototype.dispose=function(){this.source=null},t}(le),fe=function(s){function t(t,e){if(e=e||{},!(t instanceof HTMLImageElement)){var i=new Image;s.crossOrigin(i,t,e.crossorigin),i.src=t,t=i}s.call(this,t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(void 0!==e.createBitmap?e.createBitmap:et.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,this.alphaMode="number"==typeof e.alphaMode?e.alphaMode:null,void 0!==e.premultiplyAlpha&&(this.premultiplyAlpha=e.premultiplyAlpha),this.bitmap=null,this._load=null,!1!==e.autoLoad&&this.load()}return s&&(t.__proto__=s),((t.prototype=Object.create(s&&s.prototype)).constructor=t).prototype.load=function(t){var r=this;return void 0!==t&&(this.createBitmap=t),this._load||(this._load=new Promise(function(t){r.url=r.source.src;function e(){r.destroyed||(i.onload=null,i.onerror=null,r.resize(i.width,i.height),r._load=null,r.createBitmap?t(r.process()):t(r))}var i=r.source;i.complete&&i.src?e():(i.onload=e,i.onerror=function(t){return r.onError.run(t)})})),this._load},t.prototype.process=function(){var e=this;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(this.source,0,0,this.source.width,this.source.height,{premultiplyAlpha:this.premultiplyAlpha===W.UNPACK?"premultiply":"none"}).then(function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))}),this._process):Promise.resolve(this)},t.prototype.upload=function(t,e,i){if("number"==typeof this.alphaMode&&(e.alphaMode=this.alphaMode),!this.createBitmap)return s.prototype.upload.call(this,t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(s.prototype.upload.call(this,t,e,i,this.bitmap),!this.preserveBitmap){var r=!0;for(var n in e._glTextures){var o=e._glTextures[n];if(o!==i&&o.dirtyId!==e.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},t.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,s.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},t}(pe),de=[];function _e(t,e){if(!t)return null;var i="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(i=r[1].toLowerCase())}for(var n=de.length-1;0<=n;--n){var o=de[n];if(o.test&&o.test(t,i))return new o(t,e)}return new fe(t,e)}var ye=function(o){function t(t,e){var i=e||{},r=i.width,n=i.height;if(!r||!n)throw new Error("BufferResource width or height invalid");o.call(this,r,n),this.data=t}return o&&(t.__proto__=o),((t.prototype=Object.create(o&&o.prototype)).constructor=t).prototype.upload=function(t,e,i){var r=t.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===W.UNPACK),i.width===e.width&&i.height===e.height?r.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,r.texImage2D(e.target,0,i.internalFormat,e.width,e.height,0,e.format,i.type,this.data)),!0},t.prototype.dispose=function(){this.data=null},t.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},t}(le),me={scaleMode:G.NEAREST,format:L.RGBA,alphaMode:W.NPM},ve=function(d){function s(t,e){void 0===t&&(t=null),void 0===e&&(e=null),d.call(this);var i=(e=e||{}).alphaMode,r=e.mipmap,n=e.anisotropicLevel,o=e.scaleMode,s=e.width,a=e.height,h=e.wrapMode,u=e.format,l=e.type,c=e.target,p=e.resolution,f=e.resourceOptions;!t||t instanceof le||((t=_e(t,f)).internal=!0),this.width=s||0,this.height=a||0,this.resolution=p||et.RESOLUTION,this.mipmap=void 0!==r?r:et.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==n?n:et.ANISOTROPIC_LEVEL,this.wrapMode=h||et.WRAP_MODE,this.scaleMode=void 0!==o?o:et.SCALE_MODE,this.format=u||L.RGBA,this.type=l||k.UNSIGNED_BYTE,this.target=c||F.TEXTURE_2D,this.alphaMode=void 0!==i?i:W.UNPACK,void 0!==e.premultiplyAlpha&&(this.premultiplyAlpha=e.premultiplyAlpha),this.uid=pt(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=0<s&&0<a,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.setResource(t)}d&&(s.__proto__=d),(s.prototype=Object.create(d&&d.prototype)).constructor=s;var t={realWidth:{configurable:!0},realHeight:{configurable:!0}};return t.realWidth.get=function(){return Math.ceil(this.width*this.resolution-1e-4)},t.realHeight.get=function(){return Math.ceil(this.height*this.resolution-1e-4)},s.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},s.prototype.setSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},s.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},s.prototype._refreshPOT=function(){this.isPowerOfTwo=dt(this.realWidth)&&dt(this.realHeight)},s.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},s.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},s.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):0<this.width&&0<this.height&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},s.prototype.onError=function(t){this.emit("error",this,t)},s.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete vt[this.cacheId],delete mt[this.cacheId],this.cacheId=null),this.dispose(),s.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},s.prototype.dispose=function(){this.emit("dispose",this)},s.from=function(t,e,i){void 0===i&&(i=et.STRICT_TEXTURE_CACHE);var r="string"==typeof t,n=null;n=r?t:(t._pixiId||(t._pixiId="pixiid_"+pt()),t._pixiId);var o=vt[n];if(r&&i&&!o)throw new Error('The cacheId "'+n+'" does not exist in BaseTextureCache.');return o||((o=new s(t,e)).cacheId=n,s.addToCache(o,n)),o},s.fromBuffer=function(t,e,i,r){t=t||new Float32Array(e*i*4);var n=new ye(t,{width:e,height:i}),o=t instanceof Float32Array?k.FLOAT:k.UNSIGNED_BYTE;return new s(n,Object.assign(me,r||{width:e,height:i,type:o}))},s.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),vt[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),vt[e]=t)},s.removeFromCache=function(t){if("string"==typeof t){var e=vt[t];if(e){var i=e.textureCacheIds.indexOf(t);return-1<i&&e.textureCacheIds.splice(i,1),delete vt[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete vt[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperties(s.prototype,t),s}(rt.a);ve._globalBatch=0;var ge=function(a){function t(t,e){var i;e=e||{};var r=t;Array.isArray(t)&&(r=(i=t).length),a.call(this,e.width,e.height),this.items=[],this.itemDirtyIds=[];for(var n=0;n<r;n++){var o=new ve;this.items.push(o),this.itemDirtyIds.push(-1)}if(this.length=r,this._load=null,i)for(var s=0;s<r;s++)this.addResourceAt(_e(i[s],e),s)}return a&&(t.__proto__=a),((t.prototype=Object.create(a&&a.prototype)).constructor=t).prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},t.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},t.prototype.bind=function(t){a.prototype.bind.call(this,t),t.target=F.TEXTURE_2D_ARRAY;for(var e=0;e<this.length;e++)this.items[e].on("update",t.update,t)},t.prototype.unbind=function(t){a.prototype.unbind.call(this,t);for(var e=0;e<this.length;e++)this.items[e].off("update",t.update,t)},t.prototype.load=function(){var r=this;if(this._load)return this._load;var n=this.items.map(function(t){return t.resource}),t=n.map(function(t){return t.load()});return this._load=Promise.all(t).then(function(){var t=n[0],e=t.width,i=t.height;return r.resize(e,i),Promise.resolve(r)}),this._load},t.prototype.upload=function(t,e,i){var r=this.length,n=this.itemDirtyIds,o=this.items,s=t.gl;i.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,r,0,e.format,e.type,null);for(var a=0;a<r;a++){var h=o[a];n[a]<h.dirtyId&&(n[a]=h.dirtyId,h.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,a,h.resource.width,h.resource.height,1,e.format,e.type,h.resource.source))}return!0},t}(le),be=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(pe),xe=function(r){function s(t,e){if(e=e||{},r.call(this,t,e),this.length!==s.SIDES)throw new Error("Invalid length. Got "+this.length+", expected 6");for(var i=0;i<s.SIDES;i++)this.items[i].target=F.TEXTURE_CUBE_MAP_POSITIVE_X+i;!1!==e.autoLoad&&this.load()}return r&&(s.__proto__=r),((s.prototype=Object.create(r&&r.prototype)).constructor=s).prototype.bind=function(t){r.prototype.bind.call(this,t),t.target=F.TEXTURE_CUBE_MAP},s.prototype.upload=function(t,e,i){for(var r=this.itemDirtyIds,n=0;n<s.SIDES;n++){var o=this.items[n];r[n]<o.dirtyId&&(r[n]=o.dirtyId,o.valid&&o.resource.upload(t,o,i))}return!0},s}(ge);xe.SIDES=6;var Te=function(i){function r(t,e){e=e||{},i.call(this,document.createElement("canvas")),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}return i&&(r.__proto__=i),((r.prototype=Object.create(i&&i.prototype)).constructor=r).prototype.load=function(){var e=this;return this._load||(this._load=new Promise(function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},/^\<svg/.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.svg)))}e._loadSvg()})),this._load},r.prototype._loadSvg=function(){var o=this,s=new Image;i.crossOrigin(s,this.svg,this._crossorigin),s.src=this.svg,s.onerror=function(t){s.onerror=null,o.onError.run(t)},s.onload=function(){var t=s.width,e=s.height;if(!t||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=t*o.scale,r=e*o.scale;(o._overrideWidth||o._overrideHeight)&&(i=o._overrideWidth||o._overrideHeight/e*t,r=o._overrideHeight||o._overrideWidth/t*e),i=Math.round(i),r=Math.round(r);var n=o.source;n.width=i,n.height=r,n._pixiId="canvas_"+pt(),n.getContext("2d").drawImage(s,0,0,t,e,0,0,i,r),o._resolve(),o._resolve=null}},r.getSize=function(t){var e=r.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i},r.prototype.dispose=function(){i.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},r.test=function(t,e){return"svg"===e||"string"==typeof t&&0===t.indexOf("data:image/svg+xml;base64")||"string"==typeof t&&0===t.indexOf("<svg")},r}(pe);Te.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var Ee=function(l){function i(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){var i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]),l.crossOrigin(i,t[0].src||t[0],e.crossorigin);for(var r=0;r<t.length;++r){var n=document.createElement("source"),o=t[r],s=o.src,a=o.mime,h=(s=s||t[r]).split("?").shift().toLowerCase(),u=h.substr(h.lastIndexOf(".")+1);a=a||"video/"+u,n.src=s,n.type=a,i.appendChild(n)}t=i}l.call(this,t),this.noSubImage=!0,this._autoUpdate=!0,this._isAutoUpdating=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}l&&(i.__proto__=l);var t={autoUpdate:{configurable:!0},updateFPS:{configurable:!0}};return((i.prototype=Object.create(l&&l.prototype)).constructor=i).prototype.update=function(t){if(void 0===t&&(t=0),!this.destroyed){var e=Mt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(l.prototype.update.call(this,t),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},i.prototype.load=function(){var e=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(t){e.valid?t(e):(e._resolve=t,i.load())}),this._load},i.prototype._onError=function(){this.source.removeEventListener("error",this._onError,!0),this.onError.run(event)},i.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},i.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},i.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(Mt.shared.add(this.update,this),this._isAutoUpdating=!0)},i.prototype._onPlayStop=function(){this._isAutoUpdating&&(Mt.shared.remove(this.update,this),this._isAutoUpdating=!1)},i.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},i.prototype.dispose=function(){this._isAutoUpdating&&Mt.shared.remove(this.update,this),this.source&&(this.source.removeEventListener("error",this._onError,!0),this.source.pause(),this.source.src="",this.source.load()),l.prototype.dispose.call(this)},t.autoUpdate.get=function(){return this._autoUpdate},t.autoUpdate.set=function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(Mt.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(Mt.shared.add(this.update,this),this._isAutoUpdating=!0))},t.updateFPS.get=function(){return this._updateFPS},t.updateFPS.set=function(t){t!==this._updateFPS&&(this._updateFPS=t)},i.test=function(t,e){return t instanceof HTMLVideoElement||-1<i.TYPES.indexOf(e)},Object.defineProperties(i.prototype,t),i}(pe);Ee.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];var we=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(pe);de.push(fe,we,be,Ee,Te,ye,xe,ge);function Oe(t){this.renderer=t}Oe.prototype.destroy=function(){this.renderer=null};function Se(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new St("disposeFramebuffer",2)}var Ae=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.upload=function(t,e,i){var r=t.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===W.UNPACK),i.width===e.width&&i.height===e.height?r.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(i.width=e.width,i.height=e.height,r.texImage2D(e.target,0,r.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(ye),Pe={colorTexture:{configurable:!0}};Pe.colorTexture.get=function(){return this.colorTextures[0]},Se.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new ve(null,{scaleMode:0,resolution:1,mipmap:!1,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},Se.prototype.addDepthTexture=function(t){return this.depthTexture=t||new ve(new Ae(null,{width:this.width,height:this.height}),{scaleMode:0,resolution:1,width:this.width,height:this.height,mipmap:!1,format:L.DEPTH_COMPONENT,type:k.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},Se.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},Se.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},Se.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,e/n)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(t/o,e/o)}}},Se.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Object.defineProperties(Se.prototype,Pe);function Ce(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}var Me=function(n){function t(t){"number"==typeof t&&(t={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});n.call(this,null,t);var e=t||{},i=e.width,r=e.height;this.mipmap=!1,this.width=Math.ceil(i)||100,this.height=Math.ceil(r)||100,this.valid=!0,this._canvasRenderTarget=null,this.clearColor=[0,0,0,0],this.framebuffer=new Se(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}return n&&(t.__proto__=n),((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},t.prototype.dispose=function(){this.framebuffer.dispose(),n.prototype.dispose.call(this)},t.prototype.destroy=function(){n.prototype.destroy.call(this,!0),this.framebuffer=null},t}(ve);Ce.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var o=t.width/2/r,s=t.height/2/n,a=t.x/r+o,h=t.y/n+s;i=Qt.add(i,Qt.NW),this.x0=a+o*Qt.uX(i),this.y0=h+s*Qt.uY(i),i=Qt.add(i,2),this.x1=a+o*Qt.uX(i),this.y1=h+s*Qt.uY(i),i=Qt.add(i,2),this.x2=a+o*Qt.uX(i),this.y2=h+s*Qt.uY(i),i=Qt.add(i,2),this.x3=a+o*Qt.uX(i),this.y3=h+s*Qt.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3};var Ie=new Ce,Re=function(s){function a(t,e,i,r,n,o){if(s.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new te(0,0,1,1)),t instanceof a&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=r,this.valid=!1,this.requiresUpdate=!1,this._uvs=Ie,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(n||0),!0===n)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Nt(o.x,o.y):new Nt(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}s&&(a.__proto__=s);var t={resolution:{configurable:!0},frame:{configurable:!0},rotate:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return((a.prototype=Object.create(s&&s.prototype)).constructor=a).prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},a.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},a.prototype.destroy=function(t){if(this.baseTexture){if(t){var e=this.baseTexture.resource;e&&mt[e.url]&&a.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,a.removeFromCache(this),this.textureCacheIds=null},a.prototype.clone=function(){return new a(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},a.prototype.updateUvs=function(){this._uvs===Ie&&(this._uvs=new Ce),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},a.from=function(t,e,i){void 0===e&&(e={}),void 0===i&&(i=et.STRICT_TEXTURE_CACHE);var r="string"==typeof t,n=null;n=r?t:(t._pixiId||(t._pixiId="pixiid_"+pt()),t._pixiId);var o=mt[n];if(r&&i&&!o)throw new Error('The cacheId "'+n+'" does not exist in TextureCache.');return o||(e.resolution||(e.resolution=Tt(t)),(o=new a(new ve(t,e))).baseTexture.cacheId=n,ve.addToCache(o.baseTexture,n),a.addToCache(o,n)),o},a.fromBuffer=function(t,e,i,r){return new a(ve.fromBuffer(t,e,i,r))},a.fromLoader=function(t,e,i){var r=new fe(t);r.url=e;var n=new a(new ve(r,{scaleMode:et.SCALE_MODE,resolution:Tt(e)}));return i=i||e,ve.addToCache(n.baseTexture,i),a.addToCache(n,i),i!==e&&(ve.addToCache(n.baseTexture,e),a.addToCache(n,e)),n},a.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),mt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),mt[e]=t)},a.removeFromCache=function(t){if("string"==typeof t){var e=mt[t];if(e){var i=e.textureCacheIds.indexOf(t);return-1<i&&e.textureCacheIds.splice(i,1),delete mt[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)mt[t.textureCacheIds[r]]===t&&delete mt[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},t.resolution.get=function(){return this.baseTexture.resolution},t.frame.get=function(){return this._frame},t.frame.set=function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,o=e+r>this.baseTexture.width,s=i+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",h="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,u="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+u)}this.valid=r&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},t.rotate.get=function(){return this._rotate},t.rotate.set=function(t){this._rotate=t,this.valid&&this.updateUvs()},t.width.get=function(){return this.orig.width},t.height.get=function(){return this.orig.height},Object.defineProperties(a.prototype,t),a}(rt.a);function Ne(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Re.EMPTY=new Re(new ve),Ne(Re.EMPTY),Ne(Re.EMPTY.baseTexture),Re.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Re(new ve(new be(t)))}(),Ne(Re.WHITE),Ne(Re.WHITE.baseTexture);function De(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}var Le=function(a){function n(t,e){var i=null;if(!(t instanceof Me)){var r=arguments[1],n=arguments[2],o=arguments[3],s=arguments[4];console.warn("Please use RenderTexture.create("+r+", "+n+") instead of the ctor directly."),i=arguments[0],e=null,t=new Me({width:r,height:n,scaleMode:o,resolution:s})}a.call(this,t,e),this.legacyRenderer=i,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}return a&&(n.__proto__=a),((n.prototype=Object.create(a&&a.prototype)).constructor=n).prototype.resize=function(t,e,i){void 0===i&&(i=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i&&this.baseTexture.resize(t,e),this.updateUvs()},n.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},n.create=function(t,e,i,r){return"number"==typeof t&&(t={width:t,height:e,scaleMode:i,resolution:r}),new n(new Me(t))},n}(Re);De.prototype.createTexture=function(t,e){var i=new Me(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Le(i)},De.prototype.getOptimalTexture=function(t,e,i){void 0===i&&(i=1);var r=De.SCREEN_KEY;t*=i,e*=i,this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight||(r=(65535&(t=ft(t)))<<16|65535&(e=ft(e))),this.texturePool[r]||(this.texturePool[r]=[]);var n=this.texturePool[r].pop();return(n=n||this.createTexture(t,e)).filterPoolKey=r,n.setResolution(i),n},De.prototype.getFilterTexture=function(t,e){var i=this.getOptimalTexture(t.width,t.height,e||t.resolution);return i.filterFrame=t.filterFrame,i},De.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},De.prototype.returnFilterTexture=function(t){this.returnTexture(t)},De.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}},De.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){var e=De.SCREEN_KEY,i=this.texturePool[e];if(this.enableFullScreen=0<t.width&&0<t.height,i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[e]=[],this._pixelsWidth=t.width,this._pixelsHeight=t.height}},De.SCREEN_KEY="screen";function Ue(t,e,i,r,n,o,s){void 0===i&&(i=!1),void 0===r&&(r=5126),this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=n,this.start=o,this.instance=s}Ue.prototype.destroy=function(){this.buffer=null},Ue.from=function(t,e,i,r,n){return new Ue(t,e,i,r,n)};function Fe(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=Be++,this.disposeRunner=new St("disposeBuffer",2)}var Be=0;function ke(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}Fe.prototype.update=function(t){this.data=t||this.data,this._updateID++},Fe.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Fe.prototype.destroy=function(){this.dispose(),this.data=null},Fe.from=function(t){return t instanceof Array&&(t=new Float32Array(t)),new Fe(t)};var je={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function Ge(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=He++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new St("disposeGeometry",2),this.refCount=0}var Xe={5126:4,5123:2,5121:1},He=0,Ve={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};Ge.prototype.addAttribute=function(t,e,i,r,n,o,s,a){if(void 0===r&&(r=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e.data||(e instanceof Array&&(e=new Float32Array(e)),e=new Fe(e));var h=t.split("|");if(1<h.length){for(var u=0;u<h.length;u++)this.addAttribute(h[u],e,i,r,n);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new Ue(l,i,r,n,o,s,a),this.instanced=this.instanced||a,this},Ge.prototype.getAttribute=function(t){return this.attributes[t]},Ge.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},Ge.prototype.addIndex=function(t){return t.data||(t instanceof Array&&(t=new Uint16Array(t)),t=new Fe(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},Ge.prototype.getIndex=function(){return this.indexBuffer},Ge.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],r=new Fe;for(t in this.attributes){var n=this.attributes[t],o=this.buffers[n.buffer];e.push(o.data),i.push(n.size*Xe[n.type]/4),n.buffer=0}for(r.data=function(t,e){for(var i=0,r=0,n={},o=0;o<t.length;o++)r+=e[o],i+=t[o].length;for(var s=new ArrayBuffer(4*i),a=null,h=0,u=0;u<t.length;u++){var l=e[u],c=t[u],p=ke(c);n[p]||(n[p]=new je[p](s)),a=n[p];for(var f=0;f<c.length;f++){a[(f/l|0)*r+h+f%l]=c[f]}h+=l}return new Float32Array(s)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},Ge.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},Ge.prototype.dispose=function(){this.disposeRunner.run(this,!1)},Ge.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},Ge.prototype.clone=function(){for(var t=new Ge,e=0;e<this.buffers.length;e++)t.buffers[e]=new Fe(this.buffers[e].data.slice());for(var i in this.attributes){var r=this.attributes[i];t.attributes[i]=new Ue(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.index=!0),t},Ge.merge=function(t){for(var e,i=new Ge,r=[],n=[],o=[],s=0;s<t.length;s++){e=t[s];for(var a=0;a<e.buffers.length;a++)n[a]=n[a]||0,n[a]+=e.buffers[a].data.length,o[a]=0}for(var h=0;h<e.buffers.length;h++)r[h]=new(Ve[ke(e.buffers[h].data)])(n[h]),i.buffers[h]=new Fe(r[h]);for(var u=0;u<t.length;u++){e=t[u];for(var l=0;l<e.buffers.length;l++)r[l].set(e.buffers[l].data,o[l]),o[l]+=e.buffers[l].data.length}if(i.attributes=e.attributes,e.indexBuffer){i.indexBuffer=i.buffers[e.buffers.indexOf(e.indexBuffer)],i.indexBuffer.index=!0;for(var c=0,p=0,f=0,d=0,_=0;_<e.buffers.length;_++)if(e.buffers[_]!==e.indexBuffer){d=_;break}for(var y in e.attributes){var m=e.attributes[y];(0|m.buffer)===d&&(p+=m.size*Xe[m.type]/4)}for(var v=0;v<t.length;v++){for(var g=t[v].indexBuffer.data,b=0;b<g.length;b++)i.indexBuffer.data[b+f]+=c;c+=e.buffers[d].data.length/p,f+=g.length}}return i};function Ye(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=qe++,this.static=!!e}var ze=function(t){function e(){t.call(this),this.addAttribute("aVertexPosition",[0,0,1,0,1,1,0,1]).addIndex([0,1,3,2])}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e}(Ge),We=function(t){function e(){t.call(this),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Fe(this.vertices),this.uvBuffer=new Fe(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Ge),qe=0;Ye.prototype.update=function(){this.dirtyId++},Ye.prototype.add=function(t,e,i){this.uniforms[t]=new Ye(e,i)},Ye.from=function(t,e){return new Ye(t,e)};function Ke(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new te,this.destinationFrame=new te,this.filters=[]}Ke.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null};function Ze(t){this.renderer=t}var Qe=function(e){function t(t){e.call(this,t),this.defaultFilterStack=[{}],this.texturePool=new De,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new ze,this.quadUv=new We,this.tempRect=new te,this.activeState={},this.globalUniforms=new Ye({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this._pixelsWidth=t.view.width,this._pixelsHeight=t.view.height}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.push=function(t,e){for(var i=this.renderer,r=this.defaultFilterStack,n=this.statePool.pop()||new Ke,o=e[0].resolution,s=e[0].padding,a=e[0].autoFit,h=e[0].legacy,u=1;u<e.length;u++){var l=e[u];o=Math.min(o,l.resolution),s=Math.max(s,l.padding),a=a||l.autoFit,h=h||l.legacy}1===r.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),r.push(n),n.resolution=o,n.legacy=h,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(s),a&&n.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),n.sourceFrame.ceil(o),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,o),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height,n.renderTexture.filterFrame=n.sourceFrame,i.renderTexture.bind(n.renderTexture,n.sourceFrame),i.renderTexture.clear()},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var n=r.inputSize,o=r.inputPixel,s=r.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=n[0]*e.resolution,o[1]=n[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*n[2]-.5*o[2],s[3]=e.sourceFrame.height*n[3]-.5*o[3],e.legacy){var a=r.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var h=t[t.length-1];if(1===i.length)i[0].apply(this,e.renderTexture,h.renderTexture,!1,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,l=this.getOptimalFilterTexture(u.width,u.height,e.resolution);l.filterFrame=u.filterFrame;var c=0;for(c=0;c<i.length-1;++c){i[c].apply(this,u,l,!0,e);var p=u;u=l,l=p}i[c].apply(this,u,h.renderTexture,!1,e),this.returnFilterTexture(u),this.returnFilterTexture(l)}e.clear(),this.statePool.push(e)},t.prototype.applyFilter=function(t,e,i,r){var n=this.renderer;n.renderTexture.bind(i,i?i.filterFrame:null),r&&n.renderTexture.clear(),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.state.set(t.state),n.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(N.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(N.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,r=i.sourceFrame,n=i.destinationFrame,o=e._texture.orig,s=t.set(n.width,0,0,n.height,r.x,r.y),a=e.worldTransform.copyTo(Xt.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},t.prototype.destroy=function(){this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,i){return void 0===i&&(i=1),this.texturePool.getOptimalTexture(t,e,i)},t.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var i=t;t=e,e=i}t=t||this.activeState.renderTexture;var r=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t}(Oe);Ze.prototype.flush=function(){},Ze.prototype.destroy=function(){this.renderer=null},Ze.prototype.start=function(){},Ze.prototype.stop=function(){this.flush()},Ze.prototype.render=function(){};var Je=function(e){function t(t){e.call(this,t),this.emptyRenderer=new Ze(t),this.currentRenderer=this.emptyRenderer}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,r=e-1;0<=r;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,i,r){for(var n=t.elements,o=t.ids,s=t.count,a=0,h=0;h<s;h++){var u=n[h],l=u._batchLocation;if(0<=l&&l<r&&e[l]===u)o[h]=l;else for(;a<r;){var c=e[a];if(!c||c._batchEnabled!==i||c._batchLocation!==a){o[h]=a,e[u._batchLocation=a]=u;break}a++}}},t}(Oe);et.PREFER_ENV=S.a.any?A.WEBGL:A.WEBGL2,et.STRICT_TEXTURE_CACHE=!1;function $e(t){this.buffer=t,this.updateID=-1,this.byteLength=-1,this.refCount=0}function ti(t){this.type=$.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}var ei=0,ii=function(e){function t(t){e.call(this,t),this.webGLVersion=1,this.extensions={},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t;var i={isLost:{configurable:!0}};return i.isLost.get=function(){return!this.gl||this.gl.isContextLost()},t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=ei++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=ei++,this.renderer.runners.contextChange.run(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var i;if(et.PREFER_ENV>=A.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),i},t.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBKIT_WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.run(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")},Object.defineProperties(t.prototype,i),t}(Oe),ri=function(e){function t(t){e.call(this,t),this.managedFramebuffers=[],this.unknownFramebuffer=new Se(10,10)}e&&(t.__proto__=e);var i={size:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new te,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;et.PREFER_ENV===A.WEBGL_LEGACY&&(i=e=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}},t.prototype.bind=function(t,e){var i=this.gl;if(t){var r=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,i.bindFramebuffer(i.FRAMEBUFFER,r.framebuffer)),r.dirtyId!==t.dirtyId&&(r.dirtyId=t.dirtyId,r.dirtyFormat!==t.dirtyFormat?(r.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):r.dirtySize!==t.dirtySize&&(r.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var n=0;n<t.colorTextures.length;n++)t.colorTextures[n].texturePart?this.renderer.texture.unbind(t.colorTextures[n].texture):this.renderer.texture.unbind(t.colorTextures[n]);t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,i,r){var n=this.viewport;n.width===i&&n.height===r&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=i,n.height=r,this.gl.viewport(t,e,i,r))},i.size.get=function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},t.prototype.clear=function(t,e,i,r){var n=this.gl;n.clearColor(t,e,i,r),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},t.prototype.initFramebuffer=function(t){var e={framebuffer:this.gl.createFramebuffer(),stencil:null,dirtyId:0,dirtyFormat:0,dirtySize:0};return t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},t.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var r=t.colorTextures,n=0;n<r.length;n++)this.renderer.texture.bind(r[n],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID],r=t.colorTextures.length;e.drawBuffers||(r=Math.min(r,1));for(var n=[],o=0;o<r;o++){var s=t.colorTextures[o];s.texturePart?(this.renderer.texture.bind(s.texture,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,e.TEXTURE_CUBE_MAP_NEGATIVE_X+s.side,s.texture._glTextures[this.CONTEXT_UID].texture,0)):(this.renderer.texture.bind(s,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,e.TEXTURE_2D,s._glTextures[this.CONTEXT_UID].texture,0)),n.push(e.COLOR_ATTACHMENT0+o)}if((1<n.length&&e.drawBuffers(n),t.depthTexture)&&this.writeDepthTexture){var a=t.depthTexture;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,0)}i.stencil||!t.stencil&&!t.depth||(i.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i.stencil))},t.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(t);0<=n&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(i.framebuffer),i.stencil&&r.deleteRenderbuffer(i.stencil))}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var i=t.width,r=t.height,n=this.gl,o=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,r),e.stencil=o,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new te},Object.defineProperties(t.prototype,i),t}(Oe),ni={5126:4,5123:2,5121:1},oi=function(e){function t(t){e.call(this,t),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.boundBuffers={},this.managedGeometries={},this.managedBuffers={}}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,!t.createVertexArray){var i=this.renderer.context.extensions.vertexArrayObject;et.PREFER_ENV===A.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){},t.bindVertexArray=function(){},t.deleteVertexArray=function(){})}if(!t.vertexAttribDivisor){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,n){return o.drawElementsInstancedANGLE(t,e,i,r,n)},t.drawArraysInstanced=function(t,e,i,r){return o.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID];r||((this.managedGeometries[t.id]=t).disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={});var n=r[e.program.id]||this.initGeometryVao(t,e.program);this._activeGeometry=t,this._activeVao!==n&&(this._activeVao=n,this.hasVao?i.bindVertexArray(n):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,i=0;i<t.buffers.length;i++){var r=t.buffers[i],n=r._glBuffers[this.CONTEXT_UID];if(r._updateID!==n.updateID){n.updateID=r._updateID;var o=r.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(o,n.buffer),(this._boundBuffer=n).byteLength>=r.data.byteLength)e.bufferSubData(o,0,r.data);else{var s=r.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=r.data.byteLength,e.bufferData(o,r.data,s)}}}},t.prototype.checkCompatibility=function(t,e){var i=t.attributes,r=e.attributeData;for(var n in r)if(!i[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},t.prototype.getSignature=function(t,e){var i=t.attributes,r=e.attributeData,n=["g",t.id];for(var o in i)r[o]&&n.push(o);return n.join("-")},t.prototype.initGeometryVao=function(t,e){this.checkCompatibility(t,e);var i=this.gl,r=this.CONTEXT_UID,n=this.getSignature(t,e),o=t.glVertexArrayObjects[this.CONTEXT_UID],s=o[n];if(s)return o[e.id]=s;var a=t.buffers,h=t.attributes,u={},l={};for(var c in a)u[c]=0,l[c]=0;for(var p in h)!h[p].size&&e.attributeData[p]?h[p].size=e.attributeData[p].size:h[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),u[h[p].buffer]+=h[p].size*ni[h[p].type];for(var f in h){var d=h[f],_=d.size;void 0===d.stride&&(u[d.buffer]===_*ni[d.type]?d.stride=0:d.stride=u[d.buffer]),void 0===d.start&&(d.start=l[d.buffer],l[d.buffer]+=_*ni[d.type])}s=i.createVertexArray(),i.bindVertexArray(s);for(var y=0;y<a.length;y++){var m=a[y];m._glBuffers[r]||(m._glBuffers[r]=new $e(i.createBuffer()),(this.managedBuffers[m.id]=m).disposeRunner.add(this)),m._glBuffers[r].refCount++}return this.activateVao(t,e),this._activeVao=s,o[e.id]=s,o[n]=s},t.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var i=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,n=t.buffers;if(t.disposeRunner.remove(this),i){for(var o=0;o<n.length;o++){var s=n[o]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(n[o],e)}if(!e)for(var a in i)if("g"===a[0]){var h=i[a];this._activeVao===h&&this.unbind(),r.deleteVertexArray(h)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t);e=Object.keys(this.managedBuffers);for(var r=0;r<e.length;r++)this.disposeBuffer(this.managedBuffers[e[r]],t)},t.prototype.activateVao=function(t,e){var i=this.gl,r=this.CONTEXT_UID,n=t.buffers,o=t.attributes;t.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[r].buffer);var s=null;for(var a in o){var h=o[a],u=n[h.buffer]._glBuffers[r];if(e.attributeData[a]){s!==u&&(i.bindBuffer(i.ARRAY_BUFFER,u.buffer),s=u);var l=e.attributeData[a].location;if(i.enableVertexAttribArray(l),i.vertexAttribPointer(l,h.size,h.type||i.FLOAT,h.normalized,h.stride,h.start),h.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(l,1)}}}},t.prototype.draw=function(t,e,i,r){var n=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(i||0)*s,r||1):n.drawElements(t,e||o.indexBuffer.data.length,a,(i||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,i,e||o.getSize(),r||1):n.drawArrays(t,i,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t}(Oe);function si(t,e,i,r){var n=ai(t,t.VERTEX_SHADER,e),o=ai(t,t.FRAGMENT_SHADER,i),s=t.createProgram();if(t.attachShader(s,n),t.attachShader(s,o),r)for(var a in r)t.bindAttribLocation(s,r[a],a);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(n),t.deleteShader(o),s}function ai(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.warn(i),console.error(t.getShaderInfoLog(r)),null)}function hi(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return ui(2*e);case"bvec3":return ui(3*e);case"bvec4":return ui(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function ui(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}ti.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=$.NONE,this.autoDetect=!0),this._target=null},ti.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)};var li,ci={},pi=ci;function fi(){if(pi===ci||pi&&pi.isContextLost()){var t,e=document.createElement("canvas");et.PREFER_ENV>=A.WEBGL2&&(t=e.getContext("webgl2",{})),t||((t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),pi=t}return pi}function di(t,e,i){if("precision"===t.substring(0,9))return i!==Q.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t;var r=e;return e===Q.HIGH&&i!==Q.HIGH&&(r=Q.MEDIUM),"precision "+r+" float;\n"+t}var _i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};var yi=null,mi={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray"};function vi(t,e){if(!yi){var i=Object.keys(mi);yi={};for(var r=0;r<i.length;++r){var n=i[r];yi[t[n]]=mi[n]}}return yi[e]}var gi={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},bi={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var xi,Ti=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Ei(t){for(var e="",i=0;i<t;++i)0<i&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}function wi(t,e,i){void 0===i&&(i="pixi-shader"),this.id=Oi++,this.vertexSrc=t||wi.defaultVertexSrc,this.fragmentSrc=e||wi.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),Si[i]?(Si[i]++,i+="-"+Si[i]):Si[i]=1,this.vertexSrc="#define SHADER_NAME "+i+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+"\n"+this.fragmentSrc,this.vertexSrc=di(this.vertexSrc,et.PRECISION_VERTEX,Q.HIGH),this.fragmentSrc=di(this.fragmentSrc,et.PRECISION_FRAGMENT,function(){if(!li){li=Q.MEDIUM;var t=fi();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);li=e.precision?Q.HIGH:Q.MEDIUM}}return li}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}var Oi=0,Si={},Ai={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};wi.prototype.extractData=function(t,e){var i=fi();if(i){var r=si(i,t,e);this.attributeData=this.getAttributeData(r,i),this.uniformData=this.getUniformData(r,i),i.deleteProgram(r)}else this.uniformData={},this.attributeData={}},wi.prototype.getAttributeData=function(t,e){for(var i,r={},n=[],o=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),s=0;s<o;s++){var a=e.getActiveAttrib(t,s),h=vi(e,a.type),u={type:h,name:a.name,size:(i=h,_i[i]),location:0};r[a.name]=u,n.push(u)}n.sort(function(t,e){return t.name>e.name?1:-1});for(var l=0;l<n.length;l++)n[l].location=l;return r},wi.prototype.getUniformData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;n++){var o=e.getActiveUniform(t,n),s=o.name.replace(/\[.*?\]/,""),a=o.name.match(/\[.*?\]/,""),h=vi(e,o.type);i[s]={type:h,size:o.size,isArray:a,value:hi(h,o.size)}}return i},Ai.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},Ai.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},wi.from=function(t,e,i){var r=t+e,n=yt[r];return n||(yt[r]=n=new wi(t,e,i)),n},Object.defineProperties(wi,Ai);function Pi(t,e){for(var i in this.program=t,this.uniformGroup=e?e instanceof Ye?e:new Ye(e):new Ye({}),t.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}var Ci={uniforms:{configurable:!0}};Pi.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var r=e.uniforms[i];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},Pi.prototype.destroy=function(){this.uniformGroup=null},Ci.uniforms.get=function(){return this.uniformGroup.uniforms},Pi.from=function(t,e,i){var r=wi.from(t,e);return new Pi(r,i)},Object.defineProperties(Pi.prototype,Ci);function Mi(){this.data=0,this.blendMode=I.NORMAL,this.polygonOffset=0,this.blend=!0}var Ii={blend:{configurable:!0},offsets:{configurable:!0},culling:{configurable:!0},depthTest:{configurable:!0},clockwiseFrontFace:{configurable:!0},blendMode:{configurable:!0},polygonOffset:{configurable:!0}};Ii.blend.get=function(){return!!(1&this.data)},Ii.blend.set=function(t){!!(1&this.data)!==t&&(this.data^=1)},Ii.offsets.get=function(){return!!(2&this.data)},Ii.offsets.set=function(t){!!(2&this.data)!==t&&(this.data^=2)},Ii.culling.get=function(){return!!(4&this.data)},Ii.culling.set=function(t){!!(4&this.data)!==t&&(this.data^=4)},Ii.depthTest.get=function(){return!!(8&this.data)},Ii.depthTest.set=function(t){!!(8&this.data)!==t&&(this.data^=8)},Ii.clockwiseFrontFace.get=function(){return!!(16&this.data)},Ii.clockwiseFrontFace.set=function(t){!!(16&this.data)!==t&&(this.data^=16)},Ii.blendMode.get=function(){return this._blendMode},Ii.blendMode.set=function(t){this.blend=t!==I.NONE,this._blendMode=t},Ii.polygonOffset.get=function(){return this._polygonOffset},Ii.polygonOffset.set=function(t){this.offsets=!!t,this._polygonOffset=t},Mi.for2d=function(){var t=new Mi;return t.depthTest=!1,t.blend=!0,t},Object.defineProperties(Mi.prototype,Ii);var Ri=function(n){function o(t,e,i){var r=wi.from(t||o.defaultVertexSrc,e||o.defaultFragmentSrc);n.call(this,r,i),this.padding=0,this.resolution=et.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new Mi}n&&(o.__proto__=n);var t={blendMode:{configurable:!0}},e={defaultVertexSrc:{configurable:!0},defaultFragmentSrc:{configurable:!0}};return((o.prototype=Object.create(n&&n.prototype)).constructor=o).prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r,n)},t.blendMode.get=function(){return this.state.blendMode},t.blendMode.set=function(t){this.state.blendMode=t},e.defaultVertexSrc.get=function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},e.defaultFragmentSrc.get=function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},Object.defineProperties(o.prototype,t),Object.defineProperties(o,e),o}(Pi);Ri.SOURCE_KEY_MAP={};function Ni(t,e){this._texture=t,this.mapCoord=new Xt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._updateID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}var Di=new Xt,Li={texture:{configurable:!0}};Li.texture.get=function(){return this._texture},Li.texture.set=function(t){this._texture=t,this._updateID=-1},Ni.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];e[r]=n*i.a+o*i.c+i.tx,e[r+1]=n*i.b+o*i.d+i.ty}return e},Ni.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._updateID===e._updateID)return!1;this._updateID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(Di.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Di));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,h=this.clampOffset;return s[0]=(e._frame.x+a+h)/o.width,s[1]=(e._frame.y+a+h)/o.height,s[2]=(e._frame.x+e._frame.width-a+h)/o.width,s[3]=(e._frame.y+e._frame.height-a+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},Object.defineProperties(Ni.prototype,Li);function Ui(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}var Fi=function(i){function t(t){var e=new Xt;i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"),t.renderable=!1,this.maskSprite=t,this.maskMatrix=e}return i&&(t.__proto__=i),((t.prototype=Object.create(i&&i.prototype)).constructor=t).prototype.apply=function(t,e,i,r){var n=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.transform||(o.transform=new Ni(o,0)),o.transform.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.transform.uClampFrame,t.applyFilter(this,e,i,r))},t}(Ri),Bi=function(e){function t(t){e.call(this,t),this.scissorRenderTarget=null,this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){if(!e.isMaskData){var i=this.maskDataPool.pop()||new ti;i.pooled=!0,i.maskObject=e,e=i}switch(e.autoDetect&&this.detect(e),e.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),e._target=t,e.type){case $.SCISSOR:this.maskStack.push(e),this.renderer.scissor.push(e);break;case $.STENCIL:this.maskStack.push(e),this.renderer.stencil.push(e);break;case $.SPRITE:e.copyCountersOrReset(null),this.pushSpriteMask(e),this.maskStack.push(e)}},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case $.SCISSOR:this.renderer.scissor.pop();break;case $.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case $.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},t.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=$.SPRITE;else if(t.type=$.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var i=e.worldTransform,r=Math.atan2(i.b,i.a),n=Math.atan2(i.d,i.c);r=Math.round(r*(180/Math.PI)*100),n=((n=Math.round(n*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0===(r=(r%9e3+9e3)%9e3)&&9e3===n&&(t.type=$.SCISSOR)}},t.prototype.pushSpriteMask=function(t){var e=t.maskObject,i=t._target,r=this.alphaMaskPool[this.alphaMaskIndex];(r=r||(this.alphaMaskPool[this.alphaMaskIndex]=[new Fi(e)]))[0].resolution=this.renderer.resolution,r[0].maskSprite=e;var n=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,r),i.filterArea=n,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},t}(Oe),ki=function(e){function t(t){e.call(this,t),this.maskStack=[],this.glConst=0}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==i&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){e.prototype.destroy.call(this,this),this.maskStack=null},t}(Oe),ji=function(e){function t(t){e.call(this,t),this.glConst=WebGLRenderingContext.SCISSOR_TEST}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},t.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var i=t._scissorRect,r=e.getBounds(!0),n=this.renderer.gl;e.renderable=!1,i?r.fit(i):n.enable(n.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=r,this._useCurrent()},t.prototype.pop=function(){var t=this.renderer.gl;0<this.getStackLength()?this._useCurrent():t.disable(t.SCISSOR_TEST)},t.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,i=this.renderer.projection,r=i.transform,n=i.sourceFrame,o=i.destinationFrame,s=e?e.resolution:this.renderer.resolution,a=(t.x-n.x)*s+o.x,h=(t.y-n.y)*s+o.y,u=t.width*s,l=t.height*s;r&&(a+=r.tx*s,h+=r.ty*s),e||(h=this.renderer.height-l-h),this.renderer.gl.scissor(a,h,u,l)},t}(ki),Gi=function(e){function t(t){e.call(this,t),this.glConst=WebGLRenderingContext.STENCIL_TEST}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},t.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,r,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},t.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},t.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},t}(ki),Xi=function(e){function t(t){e.call(this,t),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Xt,this.transform=null}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.update=function(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,i,r){var n=this.projectionMatrix;r?(n.a=1/t.width*2*i,n.d=-1/t.height*2*i,n.tx=-1-e.x*n.a,n.ty=1-e.y*n.d):(n.a=1/t.width*2*i,n.d=1/t.height*2*i,n.tx=-1-e.x*n.a,n.ty=-1-e.y*n.d)},t.prototype.setTransform=function(){},t}(Oe),Hi=new te,Vi=function(e){function t(t){e.call(this,t),this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new te,this.destinationFrame=new te}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.bind=function(t,e,i){void 0===t&&(t=null),this.current=t;var r,n=this.renderer;if(t){var o=t.baseTexture;r=o.resolution,i||(Hi.width=o.realWidth,Hi.height=o.realHeight,i=Hi),e=e||i,this.renderer.framebuffer.bind(o.framebuffer,i),this.renderer.projection.update(i,e,r,!1),this.renderer.mask.setMaskStack(o.maskStack)}else r=this.renderer.resolution,i||(Hi.width=n.width,Hi.height=n.height,i=Hi),e=e||i,n.framebuffer.bind(null,i),this.renderer.projection.update(i,e,r,!0),this.renderer.mask.setMaskStack(this.defaultMaskStack);this.sourceFrame.copyFrom(e),this.destinationFrame.x=i.x/r,this.destinationFrame.y=i.y/r,this.destinationFrame.width=i.width/r,this.destinationFrame.height=i.height/r,e===i&&this.sourceFrame.copyFrom(this.destinationFrame)},t.prototype.clear=function(t){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor,this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3])},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t}(Oe);Ui.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null};var Yi=0,zi=function(e){function t(t){e.call(this,t),this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=Yi++}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.systemCheck=function(){if(!function(){if("boolean"==typeof xi)return xi;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");xi=!0===t({a:"b"},"a","b")}catch(t){xi=!1}return xi}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||this.syncUniformGroup(t.uniformGroup),r},t.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t){var e=this.getglProgram();t.static&&t.dirtyId===e.uniformGroups[t.id]||(e.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,e))},t.prototype.syncUniforms=function(t,e){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var i=0,r="var v = null;\n    var cv = null\n    var gl = renderer.gl";for(var n in t.uniforms){var o=e[n];if(o)if("float"===o.type&&1===o.size)r+="\n            if(uv."+n+" !== ud."+n+".value)\n            {\n                ud."+n+".value = uv."+n+"\n                gl.uniform1f(ud."+n+".location, uv."+n+")\n            }\n";else if("sampler2D"!==o.type&&"samplerCube"!==o.type&&"sampler2DArray"!==o.type||1!==o.size||o.isArray)if("mat3"===o.type&&1===o.size)void 0!==t.uniforms[n].a?r+="\n                gl.uniformMatrix3fv(ud."+n+".location, false, uv."+n+".toArray(true));\n                \n":r+="\n                gl.uniformMatrix3fv(ud."+n+".location, false, uv."+n+");\n                \n";else if("vec2"===o.type&&1===o.size)void 0!==t.uniforms[n].x?r+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud."+n+".location, v.x, v.y);\n                }\n":r+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud."+n+".location, v[0], v[1]);\n                }\n                \n";else if("vec4"===o.type&&1===o.size)void 0!==t.uniforms[n].width?r+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud."+n+".location, v.x, v.y, v.width, v.height)\n                }\n":r+="\n                cv = ud."+n+".value;\n                v = uv."+n+";\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud."+n+".location, v[0], v[1], v[2], v[3])\n                }\n                \n";else{r+="\n            cv = ud."+n+".value;\n            v = uv."+n+";\n            "+(1===o.size?gi:bi)[o.type].replace("location","ud."+n+".location")+";\n"}else r+="\n            renderer.texture.bind(uv."+n+", "+i+");\n\n            if(ud."+n+".value !== "+i+")\n            {\n                ud."+n+".value = "+i+";\n                gl.uniform1i(ud."+n+".location, "+i+");\n; // eslint-disable-line max-len\n            }\n",i++;else t.uniforms[n].group&&(r+="\n                    renderer.shader.syncUniformGroup(uv."+n+");\n                ")}return new Function("ud","uv","renderer",r)}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.getSignature=function(t,e){var i=t.uniforms,r=[];for(var n in i)r.push(n),e[n]&&r.push(e[n].type);return r.join("-")},t.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateShader=function(t){var e=this.gl,i=t.program,r={};for(var n in i.attributeData)r[n]=i.attributeData[n].location;var o=si(e,i.vertexSrc,i.fragmentSrc,r),s={};for(var a in i.uniformData){var h=i.uniformData[a];s[a]={location:e.getUniformLocation(o,a),value:hi(h.type,h.size)}}var u=new Ui(o,s);return i.glPrograms[this.renderer.CONTEXT_UID]=u},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.destroyed=!0},t}(Oe);function Wi(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}var qi=function(e){function i(t){e.call(this,t),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=I.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.checks=[],this.defaultState=new Mi,this.defaultState.blend=!0,this.defaultState.depth=!0}return e&&(i.__proto__=e),((i.prototype=Object.create(e&&e.prototype)).constructor=i).prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[I.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.ADD]=[t.ONE,t.ONE],e[I.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.NONE]=[0,0],e[I.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[I.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[I.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[I.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[I.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[I.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[I.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[I.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[I.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[I.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[I.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},i.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(var r=0;r<this.checks.length;r++)this.checks[r](this,t)},i.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(var i=0;i<this.checks.length;i++)this.checks[i](this,t);this.stateId=t.data},i.prototype.setBlend=function(t){this.updateCheck(i.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},i.prototype.setOffset=function(t){this.updateCheck(i.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},i.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},i.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},i.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},i.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},i.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},i.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(0),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},i.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},i.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},i.checkPolygonOffset=function(t,e){t.setPolygonOffset(e.polygonOffset,0)},i}(Oe),Ki=function(e){function t(t){e.call(this,t),this.count=0,this.checkCount=0,this.maxIdle=et.GC_MAX_IDLE,this.checkCountMax=et.GC_MAX_CHECK_COUNT,this.mode=et.GC_MODE}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==K.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),i=!(e[r]=null))}if(i){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureSystem;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture);for(var i=t.children.length-1;0<=i;i--)this.unload(t.children[i])},t}(Oe),Zi=function(e){function t(t){e.call(this,t),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ve}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var r=new Wi(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Wi(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(var o=0;o<this.boundTextures.length;o++)this.bind(null,o)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if(t){if((t=t.baseTexture||t).valid){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(var n=0;n<i.length;n++)i[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[t.target].texture),i[n]=null)},t.prototype.initTexture=function(t){var e=new Wi(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var i=this.renderer.gl;t.type===i.FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA32F),t.type===k.HALF_FLOAT&&(e.type=i.HALF_FLOAT),e.type===i.HALF_FLOAT&&t.format===i.RGBA&&(e.internalFormat=i.RGBA16F)}},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e));else{var r=t.realWidth,n=t.realHeight,o=i.gl;(e.width!==r||e.height!==n||e.dirtyId<0)&&(e.width=r,e.height=n,o.texImage2D(t.target,0,e.internalFormat,r,n,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.baseTexture||t)._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&lt(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==Y.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=1<=t.mipmap:e.mipmap=0,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=H.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&0<t.anisotropicLevel&&t.scaleMode===G.LINEAR){var n=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode?i.LINEAR:i.NEAREST)},t}(Oe),Qi=new Xt;rt.a;function Ji(){this.texArray=null,this.blend=0,this.type=N.TRIANGLES,this.start=0,this.size=0,this.data=null}function $i(){this.elements=[],this.ids=[],this.count=0}$i.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0};function tr(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}var er={int8View:{configurable:!0},uint8View:{configurable:!0},int16View:{configurable:!0},uint16View:{configurable:!0},int32View:{configurable:!0}};er.int8View.get=function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},er.uint8View.get=function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},er.int16View.get=function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},er.uint16View.get=function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},er.int32View.get=function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},tr.prototype.view=function(t){return this[t+"View"]},tr.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},tr.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},Object.defineProperties(tr.prototype,er);var ir=function(e){function y(t){e.call(this,t),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=Mi.for2d(),this.size=4*et.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}return e&&(y.__proto__=e),((y.prototype=Object.create(e&&e.prototype)).constructor=y).prototype.contextChange=function(){var t=this.renderer.gl;et.PREFER_ENV===A.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),et.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var r=Ti.replace(/%forloop%/gi,Ei(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},y.prototype.initFlushBuffers=function(){for(var t=y._drawCallPool,e=y._textureArrayPool,i=this.size/4,r=Math.floor(i/this.MAX_TEXTURES)+1;t.length<i;)t.push(new Ji);for(;e.length<r;)e.push(new $i);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null},y.prototype.onPrerender=function(){this._flushId=0},y.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},y.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,e=this.MAX_TEXTURES,i=y._textureArrayPool,r=this.renderer.batch,n=this._tempBoundTextures,o=this.renderer.textureGC.count,s=++ve._globalBatch,a=0,h=i[0],u=0;r.copyBoundTextures(n,e);for(var l=0;l<this._bufferSize;++l){var c=t[l];t[l]=null,c._batchEnabled!==s&&(h.count>=e&&(r.boundArray(h,n,s,e),this.buildDrawCalls(h,u,l),u=l,h=i[++a],++s),c._batchEnabled=s,c.touched=o,h.elements[h.count++]=c)}0<h.count&&(r.boundArray(h,n,s,e),this.buildDrawCalls(h,u,this._bufferSize),++a,++s);for(var p=0;p<n.length;p++)n[p]=null;ve._globalBatch=s},y.prototype.buildDrawCalls=function(t,e,i){var r=this._bufferedElements,n=this._attributeBuffer,o=this._indexBuffer,s=this.vertexSize,a=y._drawCallPool,h=this._dcIndex,u=this._aIndex,l=this._iIndex,c=a[h];c.start=this._iIndex,c.texArray=t;for(var p=e;p<i;++p){var f=r[p],d=f._texture.baseTexture,_=ut[d.alphaMode?1:0][f.blendMode];r[p]=null,e<p&&c.blend!==_&&(c.size=l-c.start,e=p,(c=a[++h]).texArray=t,c.start=l),this.packInterleavedGeometry(f,n,o,u,l),u+=f.vertexData.length/2*s,l+=f.indices.length,c.blend=_}e<i&&(c.size=l-c.start,++h),this._dcIndex=h,this._aIndex=u,this._iIndex=l},y.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},y.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,i=this._indexBuffer;et.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},y.prototype.drawBatches=function(){for(var t=this._dcIndex,e=this.renderer,i=e.gl,r=e.state,n=y._drawCallPool,o=null,s=0;s<t;s++){var a=n[s],h=a.texArray,u=a.type,l=a.size,c=a.start,p=a.blend;o!==h&&(o=h,this.bindAndClearTexArray(h)),r.setBlendMode(p),i.drawElements(u,l,i.UNSIGNED_SHORT,2*c)}},y.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},y.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),et.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},y.prototype.stop=function(){this.flush()},y.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},y.prototype.getAttributeBuffer=function(t){var e=ft(Math.ceil(t/8)),i=_t(e),r=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._aBuffers[r];return n||(this._aBuffers[r]=n=new tr(r*this.vertexSize*4)),n},y.prototype.getIndexBuffer=function(t){var e=ft(Math.ceil(t/12)),i=_t(e),r=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(r)),n},y.prototype.packInterleavedGeometry=function(t,e,i,r,n){for(var o=e.uint32View,s=e.float32View,a=r/this.vertexSize,h=t.uvs,u=t.indices,l=t.vertexData,c=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),f=p<1&&t._texture.baseTexture.alphaMode?function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n=n*e+.5|0)}(t._tintRGB,p):t._tintRGB+(255*p<<24),d=0;d<l.length;d+=2)s[r++]=l[d],s[r++]=l[d+1],s[r++]=h[d],s[r++]=h[d+1],o[r++]=f,s[r++]=c;for(var _=0;_<u.length;_++)i[n++]=a+u[_]},y}(Ze);ir._drawCallPool=[],ir._textureArrayPool=[];function rr(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}rr.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=Ye.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new wi(this.vertexSrc,r)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Xt,default:this.defaultGroupCache[t]};return new Pi(this.programCache[t],n)},rr.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)0<i&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"};function nr(){}var or=function(e){function t(t){void 0===t&&(t=!1),e.call(this),this._buffer=new Fe(null,t,!1),this._indexBuffer=new Fe(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,k.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,k.FLOAT).addAttribute("aColor",this._buffer,4,!0,k.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,k.FLOAT).addIndex(this._indexBuffer)}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(Ge),sr="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",ar="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",hr={defaultVertexSrc:{configurable:!0},defaultFragmentTemplate:{configurable:!0}};nr.create=function(t){var e=Object.assign({vertex:sr,fragment:ar,geometryClass:or,vertexSize:6},t),i=e.vertex,r=e.fragment,n=e.vertexSize,o=e.geometryClass;return function(e){function t(t){e.call(this,t),this.shaderGenerator=new rr(i,r),this.geometryClass=o,this.vertexSize=n}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t}(ir)},hr.defaultVertexSrc.get=function(){return sr},hr.defaultFragmentTemplate.get=function(){return ar},Object.defineProperties(nr,hr);function ur(){}nr.create();
/*!
 * @pixi/loaders - v5.2.0
 * Compiled Wed, 06 Nov 2019 02:32:43 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ur.use=function(t,e){t.data&&t.type===m.TYPE.IMAGE&&(t.texture=Re.fromLoader(t.data,t.url,t.name)),e()};var lr=function(a){function h(t,e){var r=this;a.call(this,t,e),rt.a.call(this);for(var i=0;i<h._plugins.length;++i){var n=h._plugins[i],o=n.pre,s=n.use;o&&this.pre(o),s&&this.use(s)}this.onStart.add(function(t){return r.emit("start",t)}),this.onProgress.add(function(t,e){return r.emit("progress",t,e)}),this.onError.add(function(t,e,i){return r.emit("error",t,e,i)}),this.onLoad.add(function(t,e){return r.emit("load",t,e)}),this.onComplete.add(function(t,e){return r.emit("complete",t,e)}),this._protected=!1}a&&(h.__proto__=a);var t={shared:{configurable:!0}};return((h.prototype=Object.create(a&&a.prototype)).constructor=h).prototype.destroy=function(){this._protected||(this.removeAllListeners(),this.reset())},t.shared.get=function(){var t=h._shared;return t||((t=new h)._protected=!0,h._shared=t),t},Object.defineProperties(h,t),h}(w);Object.assign(lr.prototype,rt.a.prototype),lr._plugins=[],lr.registerPlugin=function(t){return lr._plugins.push(t),t.add&&t.add(),lr},lr.registerPlugin({use:T.parsing}),lr.registerPlugin(ur);var cr=m,pr=(Object.defineProperty(yr.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(yr.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach(function(t){t&&t.disconnect()}),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var i=null;t.forEach(function(t){null===i?e._input.connect(t.destination):i.connect(t.destination),i=t}),i.connect(this._output)}},enumerable:!0,configurable:!0}),yr.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},yr),fr=(_r.prototype.init=function(t,e){this.destination=t,this.source=e||t},_r.prototype.connect=function(t){this.source.connect(t)},_r.prototype.disconnect=function(){this.source.disconnect()},_r.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},_r),dr=function(t,e){return(dr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};
/*!
 * pixi-sound - v3.0.5
 * https://github.com/pixijs/pixi-sound
 * Compiled Thu, 09 Jul 2020 17:33:34 UTC
 *
 * pixi-sound is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */function _r(t,e){this.init(t,e)}function yr(t,e){this._output=e,this._input=t}function mr(t,e){function i(){this.constructor=t}dr(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var vr,gr=function(){return(gr=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function br(){return vr}var xr,Tr,Er,wr,Or,Sr,Ar,Pr,Cr,Mr,Ir,Rr,Nr=(an.setParamValue=function(t,e){if(t.setValueAtTime){var i=br().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e},an),Dr=0,Lr=(mr(sn,Rr=rt.a),sn.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},sn.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(sn.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh(),this._update(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(sn.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(sn.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(sn.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),sn.prototype.refresh=function(){if(this._source){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),r=e.volume*(e.muted?0:1),n=this._volume*(this._muted?0:1);Nr.setParamValue(this._gain.gain,n*r*i),Nr.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed)}},sn.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&((this._pausedReal=i)?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",i))},sn.prototype.play=function(t){var e=t.start,i=t.end,r=t.speed,n=t.loop,o=t.volume,s=t.muted;this._paused=!1;var a=this._media.nodes.cloneBufferSource(),h=a.source,u=a.gain;this._source=h,this._gain=u,this._speed=r,this._volume=o,this._loop=!!n,this._muted=s,this.refresh();var l=this._source.buffer.duration;this._duration=l,this._end=i,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=i,this._source.loopStart=e,this._source.start(0,e)):i?this._source.start(0,e,i-e):this._source.start(0,e),this.emit("start"),this._update(!0),this._enabled=!0},sn.prototype._toSec=function(t){return 10<t&&(t/=1e3),t||0},Object.defineProperty(sn.prototype,"_enabled",{set:function(t){Mt.shared.remove(this._updateListener,this),t&&Mt.shared.add(this._updateListener,this)},enumerable:!0,configurable:!0}),Object.defineProperty(sn.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(sn.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),sn.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},sn.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},sn.prototype._now=function(){return this._media.context.audioContext.currentTime},sn.prototype._updateListener=function(){this._update()},sn.prototype._update=function(t){if(void 0===t&&(t=!1),this._source){var e=this._now(),i=e-this._lastUpdate;if(0<i||t){var r=this._source.playbackRate.value;this._elapsed+=i*r,this._lastUpdate=e;var n=this._duration,o=void 0;if(this._source.loopStart){var s=this._source.loopEnd-this._source.loopStart;o=(this._source.loopStart+this._elapsed%s)/n}else o=this._elapsed%n/n;this._progress=o,this.emit("progress",this._progress,n)}}},sn.prototype.init=function(t){(this._media=t).context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)},sn.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(0),this._source.disconnect(),this._source=null)},sn.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.disconnect()),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},sn),Ur=(mr(on,Ir=pr),Object.defineProperty(on.prototype,"script",{get:function(){return this._script||(this._script=this.context.audioContext.createScriptProcessor(on.BUFFER_SIZE),this._script.connect(this.context.destination)),this._script},enumerable:!0,configurable:!0}),on.prototype.destroy=function(){Ir.prototype.destroy.call(this),this.bufferSource.disconnect(),this._script&&this._script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this._script=null,this.gain=null,this.analyser=null,this.context=null},on.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,Nr.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;var i=this.context.audioContext.createGain();return e.connect(i),i.connect(this.destination),{source:e,gain:i}},Object.defineProperty(on.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!0,configurable:!0}),on.BUFFER_SIZE=0,on),Fr=(nn.prototype.init=function(t){this.parent=t,this._nodes=new Ur(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},nn.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null,this._source=null,this.source=null},nn.prototype.create=function(){return new Lr(this)},Object.defineProperty(nn.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(nn.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(nn.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(nn.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(nn.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(nn.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),nn.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},nn.prototype._loadUrl=function(t){var e=this,i=new XMLHttpRequest,r=this.parent.url;i.open("GET",r,!0),i.responseType="arraybuffer",i.onload=function(){e.source=i.response,e._decode(i.response,t)},i.send()},nn.prototype._decode=function(t,r){var n=this;this.parent.context.decode(t,function(t,e){if(t)r&&r(t);else{n.parent.isLoaded=!0,n.buffer=e;var i=n.parent.autoPlayStart();r&&r(null,n.parent,i)}})},nn),Br=(mr(rn,Mr=pr),rn.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},rn.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()},Object.defineProperty(rn,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(rn,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),rn.prototype.destroy=function(){Mr.prototype.destroy.call(this);var t=this._ctx;void 0!==t.close&&t.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(rn.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(rn.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(rn.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!0,configurable:!0}),rn.prototype.refresh=function(){this.events.emit("refresh")},rn.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},rn.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},rn.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},rn.prototype.decode=function(t,e){this._offlineCtx.decodeAudioData(t,function(t){e(null,t)},function(t){e(new Error(t.message||"Unable to decode file"))})},rn),kr={WebAudioMedia:Fr,WebAudioInstance:Lr,WebAudioNodes:Ur,WebAudioContext:Br,WebAudioUtils:Nr},jr={Filter:fr,EqualizerFilter:(Cr=fr,mr(en,Cr),en.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw new Error("No band found for frequency "+t);Nr.setParamValue(this.bandsMap[t].gain,e)},en.prototype.getGain=function(t){if(!this.bandsMap[t])throw new Error("No band found for frequency "+t);return this.bandsMap[t].gain.value},Object.defineProperty(en.prototype,"f32",{get:function(){return this.getGain(en.F32)},set:function(t){this.setGain(en.F32,t)},enumerable:!0,configurable:!0}),Object.defineProperty(en.prototype,"f64",{get:function(){return this.getGain(en.F64)},set:function(t){this.setGain(en.F64,t)},enumerable:!0,configurable:!0}),Object.defineProperty(en.prototype,"f125",{get:function(){return this.getGain(en.F125)},set:function(t){this.setGain(en.F125,t)},enumerable:!0,configurable:!0}),Object.defineProperty(en.prototype,"f250",{get:function(){return this.getGain(en.F250)},set:function(t){this.setGain(en.F250,t)},enumerable:!0,configurable:!0}),Object.defineProperty(en.prototype,"f500",{get:function(){return this.getGain(en.F500)},set:function(t){this.setGain(en.F500,t)},enumerable:!0,configurable:!0}),Object.defineProperty(en.prototype,"f1k",{get:function(){return this.getGain(en.F1K)},set:function(t){this.setGain(en.F1K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(en.prototype,"f2k",{get:function(){return this.getGain(en.F2K)},set:function(t){this.setGain(en.F2K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(en.prototype,"f4k",{get:function(){return this.getGain(en.F4K)},set:function(t){this.setGain(en.F4K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(en.prototype,"f8k",{get:function(){return this.getGain(en.F8K)},set:function(t){this.setGain(en.F8K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(en.prototype,"f16k",{get:function(){return this.getGain(en.F16K)},set:function(t){this.setGain(en.F16K,t)},enumerable:!0,configurable:!0}),en.prototype.reset=function(){this.bands.forEach(function(t){Nr.setParamValue(t.gain,0)})},en.prototype.destroy=function(){this.bands.forEach(function(t){t.disconnect()}),this.bands=null,this.bandsMap=null},en.F32=32,en.F64=64,en.F125=125,en.F250=250,en.F500=500,en.F1K=1e3,en.F2K=2e3,en.F4K=4e3,en.F8K=8e3,en.F16K=16e3,en),DistortionFilter:(Pr=fr,mr(tn,Pr),Object.defineProperty(tn.prototype,"amount",{get:function(){return this._amount},set:function(t){t*=1e3,this._amount=t;for(var e,i=new Float32Array(44100),r=Math.PI/180,n=0;n<44100;++n)e=2*n/44100-1,i[n]=(3+t)*e*20*r/(Math.PI+t*Math.abs(e));this._distortion.curve=i,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),tn.prototype.destroy=function(){this._distortion=null,Pr.prototype.destroy.call(this)},tn),StereoFilter:(Ar=fr,mr($r,Ar),Object.defineProperty($r.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?Nr.setParamValue(this._stereo.pan,t):this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!0,configurable:!0}),$r.prototype.destroy=function(){Ar.prototype.destroy.call(this),this._stereo=null,this._panner=null},$r),ReverbFilter:(Sr=fr,mr(Jr,Sr),Jr.prototype._clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},Object.defineProperty(Jr.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(Jr.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(Jr.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!0,configurable:!0}),Jr.prototype._rebuild=function(){for(var t,e=br().context.audioContext,i=e.sampleRate,r=i*this._seconds,n=e.createBuffer(2,r,i),o=n.getChannelData(0),s=n.getChannelData(1),a=0;a<r;a++)t=this._reverse?r-a:a,o[a]=(2*Math.random()-1)*Math.pow(1-t/r,this._decay),s[a]=(2*Math.random()-1)*Math.pow(1-t/r,this._decay);var h=br().context.audioContext.createConvolver();h.buffer=n,this.init(h)},Jr),MonoFilter:(Or=fr,mr(Qr,Or),Qr.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,Or.prototype.destroy.call(this)},Qr),TelephoneFilter:(wr=fr,mr(Zr,wr),Zr)},Gr=0,Xr=(mr(Kr,Er=rt.a),Kr.prototype.set=function(t,e){if(void 0===this[t])throw new Error("Property with name "+t+" does not exist.");return this[t]=e,this},Object.defineProperty(Kr.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(Kr.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),Kr.prototype._onPlay=function(){this._playing=!0},Kr.prototype._onPause=function(){this._playing=!1},Kr.prototype.init=function(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t},Kr.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},Kr.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(Kr.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(Kr.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(Kr.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(Kr.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Kr.prototype.refresh=function(){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),r=e.volume*(e.muted?0:1),n=this._volume*(this._muted?0:1);this._source.volume=n*i*r,this._source.playbackRate=this._speed*t.speed*e.speed},Kr.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&((this._pausedReal=i)?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",i))},Kr.prototype.play=function(t){var e=this,i=t.start,r=t.end,n=t.speed,o=t.loop,s=t.volume,a=t.muted;this._speed=n,this._volume=s,this._loop=!!o,this._muted=a,this.refresh(),this.loop&&null!==r&&(this.loop=!1),this._start=i,this._end=r||this._duration,this._start=Math.max(0,this._start-Kr.PADDING),this._end=Math.min(this._end+Kr.PADDING,this._duration),this._source.onloadedmetadata=function(){e._source&&(e._source.currentTime=i,e._source.onloadedmetadata=null,e.emit("progress",i,e._duration),Mt.shared.add(e._onUpdate,e))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},Kr.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},Kr.prototype._onComplete=function(){Mt.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},Kr.prototype.destroy=function(){Mt.shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},Kr.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},Kr.PADDING=.1,Kr),Hr=(mr(qr,Tr=rt.a),qr.prototype.init=function(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)},qr.prototype.create=function(){return new Xr(this)},Object.defineProperty(qr.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(qr.prototype,"duration",{get:function(){return this._source.duration},enumerable:!0,configurable:!0}),Object.defineProperty(qr.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(qr.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),qr.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(qr.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),qr.prototype.load=function(e){var i=this._source,r=this.parent;if(4!==i.readyState){if(!r.url)return e(new Error("sound.url or sound.source must be set"));i.src=r.url;var n=function(){i.removeEventListener("canplaythrough",t),i.removeEventListener("load",t),i.removeEventListener("abort",o),i.removeEventListener("error",s)},t=function(){n(),r.isLoaded=!0;var t=r.autoPlayStart();e&&e(null,r,t)},o=function(){n(),e&&e(new Error("Sound loading has been aborted"))},s=function(){n();var t="Failed to load audio element (code: "+i.error.code+")";e&&e(new Error(t))};i.addEventListener("canplaythrough",t,!1),i.addEventListener("load",t,!1),i.addEventListener("abort",o,!1),i.addEventListener("error",s,!1),i.load()}else{r.isLoaded=!0;var a=r.autoPlayStart();e&&setTimeout(function(){e(null,r,a)},0)}},qr),Vr=(mr(Wr,xr=rt.a),Wr.prototype.refresh=function(){this.emit("refresh")},Wr.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(Wr.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(Wr.prototype,"audioContext",{get:function(){return null},enumerable:!0,configurable:!0}),Wr.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},Wr.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},Wr.prototype.destroy=function(){this.removeAllListeners()},Wr),Yr={HTMLAudioMedia:Hr,HTMLAudioInstance:Xr,HTMLAudioContext:Vr},zr=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid"];function Wr(){var t=xr.call(this)||this;return t.speed=1,t.volume=1,t.muted=!1,t.paused=!1,t}function qr(){return null!==Tr&&Tr.apply(this,arguments)||this}function Kr(t){var e=Er.call(this)||this;return e.id=Gr++,e.init(t),e}function Zr(){if(!br().useLegacy){var t=br().context.audioContext,e=t.createBiquadFilter(),i=t.createBiquadFilter(),r=t.createBiquadFilter(),n=t.createBiquadFilter();return e.type="lowpass",Nr.setParamValue(e.frequency,2e3),i.type="lowpass",Nr.setParamValue(i.frequency,2e3),r.type="highpass",Nr.setParamValue(r.frequency,500),n.type="highpass",Nr.setParamValue(n.frequency,500),e.connect(i),i.connect(r),r.connect(n),wr.call(this,e,n)||this}wr.call(this,null)}function Qr(){var t=this;if(!br().useLegacy){var e=br().context.audioContext,i=e.createChannelSplitter(),r=e.createChannelMerger();return r.connect(i),(t=Or.call(this,r,i)||this)._merger=r,t}t=Or.call(this,null)||this}function Jr(t,e,i){void 0===t&&(t=3),void 0===e&&(e=2),void 0===i&&(i=!1);var r=this;if(!br().useLegacy)return(r=Sr.call(this,null)||this)._seconds=r._clamp(t,1,50),r._decay=r._clamp(e,0,100),r._reverse=i,r._rebuild(),r;r=Sr.call(this,null)||this}function $r(t){void 0===t&&(t=0);var e=this;if(!br().useLegacy){var i,r,n,o=br().context.audioContext;return n=o.createStereoPanner?i=o.createStereoPanner():((r=o.createPanner()).panningModel="equalpower",r),(e=Ar.call(this,n)||this)._stereo=i,e._panner=r,e.pan=t,e}e=Ar.call(this,null)||this}function tn(t){void 0===t&&(t=0);var e=this;if(!br().useLegacy){var i=br().context.audioContext.createWaveShaper();return(e=Pr.call(this,i)||this)._distortion=i,e.amount=t,e}e=Pr.call(this,null)||this}function en(t,e,i,r,n,o,s,a,h,u){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===u&&(u=0);var l=this;if(!br().useLegacy){var c=[{f:en.F32,type:"lowshelf",gain:t},{f:en.F64,type:"peaking",gain:e},{f:en.F125,type:"peaking",gain:i},{f:en.F250,type:"peaking",gain:r},{f:en.F500,type:"peaking",gain:n},{f:en.F1K,type:"peaking",gain:o},{f:en.F2K,type:"peaking",gain:s},{f:en.F4K,type:"peaking",gain:a},{f:en.F8K,type:"peaking",gain:h},{f:en.F16K,type:"highshelf",gain:u}].map(function(t){var e=br().context.audioContext.createBiquadFilter();return e.type=t.type,Nr.setParamValue(e.Q,1),e.frequency.value=t.f,Nr.setParamValue(e.gain,t.gain),e});(l=Cr.call(this,c[0],c[c.length-1])||this).bands=c,l.bandsMap={};for(var p=0;p<l.bands.length;p++){var f=l.bands[p];0<p&&l.bands[p-1].connect(f),l.bandsMap[f.frequency.value]=f}return l}l=Cr.call(this,null)||this}function rn(){var t=this,e=window,i=new rn.AudioContext,r=i.createDynamicsCompressor(),n=i.createAnalyser();return n.connect(r),r.connect(i.destination),(t=Mr.call(this,n,r)||this)._ctx=i,t._offlineCtx=new rn.OfflineAudioContext(1,2,e.OfflineAudioContext?i.sampleRate:44100),t._unlocked=!1,t.compressor=r,t.analyser=n,t.events=new rt.a,t.volume=1,t.speed=1,t.muted=!1,t.paused=!1,"running"!==i.state&&(t._unlock(),t._unlock=t._unlock.bind(t),document.addEventListener("mousedown",t._unlock,!0),document.addEventListener("touchstart",t._unlock,!0),document.addEventListener("touchend",t._unlock,!0)),t}function nn(){}function on(t){var e=this,i=t.audioContext,r=i.createBufferSource(),n=i.createGain(),o=i.createAnalyser();return r.connect(o),o.connect(n),n.connect(t.destination),(e=Ir.call(this,o,n)||this).context=t,e.bufferSource=r,e.gain=n,e.analyser=o,e}function sn(t){var e=Rr.call(this)||this;return e.id=Dr++,e._media=null,e._paused=!1,e._muted=!1,e._elapsed=0,e.init(t),e}function an(){}var hn,un,ln,cn,pn=(hn={m4a:"mp4",oga:"ogg"},un=document.createElement("audio"),ln={},cn=/^no$/,zr.forEach(function(t){var e=hn[t]||t,i=un.canPlayType("audio/"+t).replace(cn,""),r=un.canPlayType("audio/"+e).replace(cn,"");ln[t]=!!i||!!r}),Object.freeze(ln)),fn=/\.(\{([^\}]+)\})(\?.*)?$/;function dn(t){var e=fn,i="string"==typeof t?t:t.url;if(e.test(i)){for(var r=e.exec(i),n=r[2].split(","),o=n[n.length-1],s=0,a=n.length;s<a;s++){var h=n[s];if(pn[h]){o=h;break}}var u=i.replace(r[1],o);return"string"!=typeof t&&(t.extension=o,t.url=u),u}return i}var _n=(En.add=function(){En.legacy=br().useLegacy},Object.defineProperty(En,"legacy",{set:function(t){var e=zr;t?e.forEach(function(t){cr.setExtensionXhrType(t,cr.XHR_RESPONSE_TYPE.DEFAULT),cr.setExtensionLoadType(t,cr.LOAD_TYPE.AUDIO)}):e.forEach(function(t){cr.setExtensionXhrType(t,cr.XHR_RESPONSE_TYPE.BUFFER),cr.setExtensionLoadType(t,cr.LOAD_TYPE.XHR)})},enumerable:!0,configurable:!0}),En.pre=function(t,e){dn(t),e()},En.use=function(t,e){t.data&&-1<zr.indexOf(t.extension)?t.sound=br().add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},En),yn=(Tn.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},Tn.prototype.destroy=function(){this.parent=null},Tn),mn=(xn.from=function(t){var e={};return"string"==typeof t?e.url=t:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?e.source=t:e=t,(e=gr({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},e)).url&&(e.url=dn(e.url)),Object.freeze(e),new xn(br().useLegacy?new Hr:new Fr,e)},Object.defineProperty(xn.prototype,"context",{get:function(){return br().context},enumerable:!0,configurable:!0}),xn.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},xn.prototype.resume=function(){return this.isPlaying=0<this._instances.length,this.paused=!1,this},Object.defineProperty(xn.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),Object.defineProperty(xn.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(xn.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!0,configurable:!0}),xn.prototype.addSprites=function(t,e){if("object"==typeof t){var i={};for(var r in t)i[r]=this.addSprites(r,t[r]);return i}if("string"==typeof t){var n=new yn(this,e);return this._sprites[t]=n}},xn.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},xn.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var i in this._sprites)this.removeSprites(i);return this},Object.defineProperty(xn.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!0,configurable:!0}),xn.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;0<=t;t--)this._instances[t].stop();return this},xn.prototype.play=function(t,e){var o,i=this;if("string"==typeof t?o={sprite:n=t,loop:this.loop,complete:e}:"function"==typeof t?(o={}).complete=t:o=t,(o=gr({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},o||{})).sprite){var r=o.sprite,n=this._sprites[r];o.start=n.start,o.end=n.end,o.speed=n.speed||1,o.loop=n.loop||o.loop,delete o.sprite}if(o.offset&&(o.start=o.offset),!this.isLoaded)return new Promise(function(r,n){i.autoPlay=!0,i._autoPlayOptions=o,i._preload(function(t,e,i){t?n(t):(o.loaded&&o.loaded(t,e,i),r(i))})});this.singleInstance&&this._removeInstances();var s=this._createInstance();return this._instances.push(s),this.isPlaying=!0,s.once("end",function(){o.complete&&o.complete(i),i._onComplete(s)}),s.once("stop",function(){i._onComplete(s)}),s.play(o),s},xn.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},xn.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(xn.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(xn.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(xn.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),xn.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(xn.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(xn.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),Object.defineProperty(xn.prototype,"duration",{get:function(){return this.media.duration},enumerable:!0,configurable:!0}),xn.prototype.autoPlayStart=function(){var t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t},xn.prototype._removeInstances=function(){for(var t=this._instances.length-1;0<=t;t--)this._poolInstance(this._instances[t]);this._instances.length=0},xn.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);-1<e&&this._instances.splice(e,1),this.isPlaying=0<this._instances.length}this._poolInstance(t)},xn.prototype._createInstance=function(){if(0<xn._pool.length){var t=xn._pool.pop();return t.init(this.media),t}return this.media.create()},xn.prototype._poolInstance=function(t){t.destroy(),xn._pool.indexOf(t)<0&&xn._pool.push(t)},xn._pool=[],xn),vn=(bn.prototype.init=function(){return this.supported&&(this._webAudioContext=new Br),this._htmlAudioContext=new Vr,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(bn.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(bn.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!0,configurable:!0}),Object.defineProperty(bn.prototype,"supported",{get:function(){return null!==Br.AudioContext},enumerable:!0,configurable:!0}),bn.prototype.add=function(t,e){if("object"==typeof t){var i={};for(var r in t){var n=this._getOptions(t[r],e);i[r]=this.add(r,n)}return i}if("string"==typeof t){if(e instanceof mn)return this._sounds[t]=e;n=this._getOptions(e);var o=mn.from(n);return this._sounds[t]=o}},bn.prototype._getOptions=function(t,e){var i;return i="string"==typeof t?{url:t}:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?{source:t}:t,gr({},i,e||{})},Object.defineProperty(bn.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){_n.legacy=t,this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!0,configurable:!0}),bn.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(bn.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(bn.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!0,configurable:!0}),bn.prototype.togglePauseAll=function(){return this._context.togglePause()},bn.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},bn.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},bn.prototype.toggleMuteAll=function(){return this._context.toggleMute()},bn.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},bn.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},bn.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},bn.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},bn.prototype.exists=function(t,e){return void 0===e&&(e=!1),!!this._sounds[t]},bn.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},bn.prototype.play=function(t,e){return this.find(t).play(e)},bn.prototype.stop=function(t){return this.find(t).stop()},bn.prototype.pause=function(t){return this.find(t).pause()},bn.prototype.resume=function(t){return this.find(t).resume()},bn.prototype.volume=function(t,e){var i=this.find(t);return void 0!==e&&(i.volume=e),i.volume},bn.prototype.speed=function(t,e){var i=this.find(t);return void 0!==e&&(i.speed=e),i.speed},bn.prototype.duration=function(t){return this.find(t).duration},bn.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},bn),gn=0;function bn(){this.init()}function xn(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);var i=e.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}function Tn(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}function En(){}var wn,On={get PLAY_ID(){return gn},playOnce:function(t,e){var i="alias"+gn++;return br().add(i,{url:t,preload:!0,autoPlay:!0,loaded:function(t){t&&(br().remove(i),e&&e(t))},complete:function(){br().remove(i),e&&e(null)}}),i},render:function(t,e){var i=document.createElement("canvas");e=gr({width:512,height:128,fill:"black"},e||{}),i.width=e.width,i.height=e.height;var r=ve.from(i);if(!(t.media instanceof Fr))return r;var n=t.media,o=i.getContext("2d");o.fillStyle=e.fill;for(var s=n.buffer.getChannelData(0),a=Math.ceil(s.length/e.width),h=e.height/2,u=0;u<e.width;u++){for(var l=1,c=-1,p=0;p<a;p++){var f=s[u*a+p];f<l&&(l=f),c<f&&(c=f)}o.fillRect(u,(1+l)*h,1,Math.max(1,(c-l)*h))}return r},resolveUrl:dn,sineTone:function(t,e){void 0===t&&(t=200),void 0===e&&(e=1);var i=mn.from({singleInstance:!0});if(!(i.media instanceof Fr))return i;for(var r=i.media,n=i.context.audioContext.createBuffer(1,48e3*e,48e3),o=n.getChannelData(0),s=0;s<o.length;s++){var a=t*(s/n.sampleRate)*Math.PI;o[s]=2*Math.sin(a)}return r.buffer=n,i.isLoaded=!0,i},extensions:zr,supported:pn},Sn=(wn=new vn,vr=wn);lr.registerPlugin(_n),Object.defineProperties(Sn,{Filterable:{get:function(){return pr}},filters:{get:function(){return jr}},htmlaudio:{get:function(){return Yr}},Sound:{get:function(){return mn}},SoundLibrary:{get:function(){return vn}},SoundSprite:{get:function(){return yn}},utils:{get:function(){return On}},webaudio:{get:function(){return kr}},sound:{get:function(){return Sn}}});e.default=Sn},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(i(8)),h=i(5),u=i(2),l=i(63),c=(s=l.MapItem,n(p,s),p.prototype.initExplosionAnimation=function(){this.explosion=new PIXI.AnimatedSprite(this.getSpriteTextures(h.Config.assets.explode,16,68,68)),this.explosion.anchor.set(.5),this.explosion.x=this.size.width/2,this.explosion.y=this.size.height/2,this.explosion.loop=!1,this.explosion.visible=!1,this.display.addChild(this.explosion)},p.prototype.playExplosioAnimation=function(t){this.playSound(h.Config.assets.soundExplode),a.default.to(this.skin,{duration:.3,alpha:0}),this.explosion.visible=!0,this.explosion.play(),this.explosion.onComplete=function(){return t()}},p.prototype.handleCollisionWith=function(t){t.type===u.GameObjectTypes.Bullet&&this.destroy()},p.prototype.destroy=function(){var t=this;this.playExplosioAnimation(function(){s.prototype.destroy.call(t)})},p);function p(t,e,i){var r=s.call(this,t,e,i)||this;return r.initSkin("eagle"),r.initExplosionAnimation(),r}e.EagleMapItem=c},function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(i(8)),h=i(5),u=i(2),l=i(63),c=(s=l.MapItem,n(p,s),p.prototype.handleCollisionWith=function(t){t.type!==u.GameObjectTypes.Player&&t.type!==u.GameObjectTypes.Enemy||this.type!==u.GameObjectTypes.BonusImmortal&&this.type!==u.GameObjectTypes.BonusLife&&this.type!==u.GameObjectTypes.BonusSlow&&this.type!==u.GameObjectTypes.BonusSpeed||(this.playSound(h.Config.assets.soundBonus),this.destroy())},p.prototype.playBlinkAnimation=function(){a.default.fromTo(this.skin,{alpha:.4},{alpha:1,duration:.2,yoyo:!0,repeat:-1})},p);function p(t,e,i){var r=s.call(this,t,e,i)||this;return r.destroyDelay=10,r.blinkDelay=6,t===u.GameObjectTypes.BonusSpeed&&r.initSkin("bonusSpeed"),t===u.GameObjectTypes.BonusSlow&&r.initSkin("bonusSlow"),t===u.GameObjectTypes.BonusLife&&r.initSkin("bonusLife"),t===u.GameObjectTypes.BonusImmortal&&r.initSkin("bonusImmortal"),a.default.delayedCall(r.destroyDelay,function(){return r.destroy()}),a.default.delayedCall(r.blinkDelay,function(){return r.playBlinkAnimation()}),r}e.BonusMapItem=c}],n.c=o,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=32);function n(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,n),e.l=!0,e.exports}var r,o});